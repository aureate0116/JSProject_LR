{"version":3,"sources":["all.js","comment.js","config.js","index.js","layout.js","login.js","resource.js","resource_list.js","signup.js","timestamp.js"],"names":["url","locationHref","location","href","split","resTopic","resId","pageClassify","initIndex","getResourcesForIndex","undefined","goodRate1","document","querySelector","goodRate2","goodRate3","goodRate1Tab","goodRate2Tab","goodRate3Tab","resourceType1","resourceType2","resourceType3","resource1Tab","resource2Tab","resource3Tab","resourcesData","commentsData","axios","get","then","res","data","renderGoodRateList","renderNewFreeList","error","console","log","getCommentForIndex","commentScoreNum","getAverageScore","resultScore","commentNum","starStr","combineCommentStar","itemNum1","itemNum2","itemNum3","renderMaxNum","tabJS","tabHtml","tabPython","forEach","item","topics","combineResouorceItemType1","setAttribute","innerHTML","imgUrl","id","title","tabOnline","tabOffline","tabArticle","price","type","combineResouorceItem","loginAccount","loginPw","btnLogin","initLogin","getUserList","usersData","err","response","addEventListener","e","value","textContent","userItem","email","preventDefault","post","localStorage","setItem","accessToken","user","clear","initResourcePage","getResourcesForResources","getCommentData","getResourcesItem","getResourcesComment","renderRelatedResource","resourceContent","resourceCommentData","renderResource","renderComment","imageNBrief","titleBox","btnBox","renderItem","userName","role","lastName","firstName","imageNBriefStr","titleBoxStr","btnBoxStr","level","lang","intro","commentList","commentStr","length","btnReadMore","score","newResultScoreOjb","commentTimeAge","Ftime","commentTime","content","likeNum","dislikeNum","relatedResource","relatedStr","renderNum","resItem","initResourceList","bannerBlockTitle","foundation1Basic","foundation2Free","foundation3CN","thisTopicData","filter","renderFoundationRecommond","renderFilterResultList","basicStr","freeStr","cnStr","index","langItem","scoreTotal","resourceIdObj","resourceId","toFixed","newResultScore","resourceIdArr","Object","keys","scoreArr","values","i","resourceItem","filterItemInput","querySelectorAll","checkObj","renderList","filterKeyword","getAttribute","groupName","target","checked","push","hasType","hasLevel","hasPrice","checkLang","includes","some","str","renderfilterStr","combineResouorceItemType2","resultNumber","clearBtnText","clearFilter","clearFilterBtn","resourceSort","signUpForm","signupLastName","signupfirstName","signupMail","signupPw","signupPwConfirm","signUpFormInputs","btnSignUp","initSignup","constraints","lastname","presence","message","firstname","password","minimum","confirmpw","equality","attribute","nextElementSibling","errors","validate","alert","timespan","dateTime","Date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","now","parse","milliseconds","timeSpanStr","Math","ceil"],"mappings":"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","file":"all.js","sourcesContent":["// let commentsData = [];\n// function getAllComment(){\n//     axios.get(`${url}/comments`)\n//     .then(res=>{\n//         commentsData = res.data;\n//         console.log(commentsData);\n    \n//     }).catch(error=>{\n//       console.log(error);\n//     })\n// }\n\n\n/*****************nab tab***************/\n//hover 切換\n// const navItem = document.querySelectorAll(\".goodRate .nav-link\");\n// const tabContent = document.querySelectorAll(\".goodRate .tab-pane\");\n// console.log(navItem);\n// console.log(tabContent);\n\n// navItem.forEach((value,index)=>{\n//   value.addEventListener('mouseover',(e)=>{\n//     console.log(\"tt\",e.target.getAttribute(\"id\"));\n\n//     let labelledby = tabContent[index].getAttribute(\"aria-labelledby\");\n    \n//     //console.log(tabContent[index].classList);\n  \n//     if(e.target.getAttribute(\"id\") == labelledby ){\n//       //console.log(\"yes\");\n//       tabContent[index].classList.add(\"show\");\n//       console.log(tabContent[index].classList);\n\n//     }\n//   })\n\n// })\n\n\n","","const url=\"http://localhost:3000\";\r\n// const url=\"./json/db.json\"\r\n// const url=\"http://localhost:3000/users\"\r\n// const url=\"http://localhost:3000/resources\"\r\n// const url=\"http://localhost:3000/bookmarks\"\r\n// const url=\"http://localhost:3000/comments\"\r\n","let locationHref = location.href.split(\"/\");\r\nlet resTopic = location.href.split(\"=\")[1];\r\nlet resId = location.href.split(\"=\")[1];\r\nlet pageClassify = locationHref[3].split(\".html\")[0];\r\n\r\n\r\n// let resTopicNew = resTopic.split(\" \");\r\n// console.log(resTopic);\r\n// console.log(\"pageClassify\",pageClassify);\r\n// console.log(\"locationHref\",locationHref);\r\n\r\n//1. 頁面初始化\r\nfunction initIndex(){\r\n    getResourcesForIndex();\r\n    if(pageClassify==\"resource\"){\r\n        if(resId == undefined){\r\n            location.href = `./index.html`;\r\n        }\r\n    }\r\n    else if(pageClassify==\"resource_list\"){\r\n        if(resTopic == undefined){\r\n            location.href = `./index.html`;\r\n        }\r\n    }\r\n}\r\ninitIndex();\r\n\r\n//好評推薦\r\nconst goodRate1 = document.querySelector('#goodRate1 > div.row');\r\nconst goodRate2 = document.querySelector('#goodRate2 > div.row');\r\nconst goodRate3 = document.querySelector('#goodRate3 > div.row');\r\nconst goodRate1Tab = document.querySelector('#goodRate1-tab');\r\nconst goodRate2Tab = document.querySelector('#goodRate2-tab');\r\nconst goodRate3Tab = document.querySelector('#goodRate3-tab');\r\n\r\n//最新免費資源\r\nconst resourceType1 = document.querySelector('#resourceType1 > div.row');\r\nconst resourceType2 = document.querySelector('#resourceType2 > div.row');\r\nconst resourceType3 = document.querySelector('#resourceType3 > div.row');\r\nconst resource1Tab = document.querySelector('#resource1-tab');\r\nconst resource2Tab = document.querySelector('#resource2-tab');\r\nconst resource3Tab = document.querySelector('#resource3-tab');\r\n\r\n\r\nlet resourcesData = [];\r\nlet commentsData = [];\r\n\r\n//取得資源資料\r\nfunction getResourcesForIndex(){\r\n  axios.get(`${url}/resources`)\r\n  .then(res=>{\r\n    resourcesData = res.data;\r\n    renderGoodRateList();\r\n    renderNewFreeList();\r\n  \r\n  }).catch(error=>{\r\n    console.log(error);\r\n  })\r\n}\r\n\r\nfunction getCommentForIndex(){\r\n    axios.get(`${url}/comments`)\r\n    .then(res=>{\r\n      commentsData = res.data;\r\n    \r\n    }).catch(error=>{\r\n      console.log(error);\r\n    })\r\n}\r\n\r\n//渲染好評推薦資料\r\nfunction renderGoodRateList(){\r\n    let commentScoreNum = getAverageScore();\r\n    let resultScore = commentScoreNum[0];\r\n    let commentNum = commentScoreNum[1];\r\n    let starStr = combineCommentStar(resultScore); \r\n\r\n    let itemNum1 = 0;\r\n    let itemNum2 = 0;\r\n    let itemNum3 = 0;\r\n    let renderMaxNum = 6;\r\n    let tabJS =\"\";\r\n    let tabHtml=\"\";\r\n    let tabPython=\"\";\r\n\r\n    resourcesData.forEach( (item)=>{\r\n        // console.log(\"resultScore\");\r\n        // console.log(resultScore);\r\n        switch (item.topics){\r\n            case \"JavaScript\" :\r\n                if(itemNum1 <renderMaxNum){\r\n                    tabJS += combineResouorceItemType1(item,resultScore,starStr,commentNum);\r\n                   itemNum1 +=1;\r\n                }\r\n                break;\r\n\r\n            case \"HTML/CSS\" :\r\n                if(itemNum2 < renderMaxNum){\r\n                    tabHtml += combineResouorceItemType1(item,resultScore,starStr,commentNum);\r\n                    itemNum2+=1;\r\n                }\r\n                break;\r\n\r\n            case \"Python\" :\r\n                if(itemNum3 < renderMaxNum){\r\n                     tabPython += combineResouorceItemType1(item,resultScore,starStr,commentNum);\r\n                itemNum3+=1\r\n                }\r\n               \r\n                break;\r\n        }\r\n    })\r\n\r\n    if(goodRate1 !==null ){\r\n        if(tabJS==\"\"){\r\n            goodRate1Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n        goodRate1.innerHTML = tabJS;\r\n    }\r\n    if(goodRate2 !==null ){\r\n        if(tabHtml==\"\"){\r\n            goodRate2Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n        goodRate2.innerHTML = tabHtml;\r\n    }\r\n    if(goodRate3 !==null ){\r\n        if(tabPython==\"\"){\r\n            goodRate3Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n        goodRate3.innerHTML = tabPython;\r\n    }\r\n\r\n}\r\n\r\n\r\n//組單一資源項目html - type 1\r\nfunction combineResouorceItemType1(item,resultScore,starStr,commentNum){\r\n\r\n  if( item.imgUrl ===\"\"){\r\n    item.imgUrl = \"./assets/images/resources_cover/noimgCover.jpg\";\r\n  }\r\n\r\n  if(resultScore[item.id]===undefined || starStr[item.id]=== undefined || commentNum[item.id]=== undefined ){\r\n\r\n    return  `\r\n    <div class=\"col-md-6 col-lg-4\">\r\n    <div class=\"d-flex p-2 align-items-center\">\r\n        <div class=\"row\">\r\n            <div class=\"col-6\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"><img src=\"${item.imgUrl}\" alt=\"${item.title}\" onerror=\"this.src=./assets/images/resources_cover/noimgCover.jpg\"></a></div>\r\n            \r\n            <div class=\"col-6\">\r\n                <h4 class=\"ellipsis\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"> ${item.title}</a></h4>\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                尚無評價\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n         \r\n        \r\n    </div>\r\n    </div>\r\n    `;\r\n  }else{\r\n    return  `\r\n    <div class=\"col-md-6 col-lg-4\">\r\n    <div class=\"d-flex p-2 align-items-center\">\r\n        <div class=\"row\">\r\n            <div class=\"col-6\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"><img src=\"${item.imgUrl}\" alt=\"${item.title}\" onerror=\"this.src=./assets/images/resources_cover/noimgCover.jpg\"></a></div>\r\n\r\n            <div class=\"col-6\">\r\n                <h4 class=\"ellipsis\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"> ${item.title}</a></h4>\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                    <span class=\"fs-6 fw-bold\"> ${resultScore[item.id]}</span>\r\n                    <ul class=\"d-flex align-items-center lh-1\">\r\n                    ${starStr[item.id]}\r\n                    </ul>                                \r\n                    <span class=\"fs-7\">(${commentNum[item.id]})</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    </div>\r\n    </div>`;\r\n  }\r\n      \r\n}\r\n\r\n//渲染最新免費資源\r\nfunction renderNewFreeList(){\r\n    let commentScoreNum = getAverageScore();\r\n    let resultScore = commentScoreNum[0];\r\n    let commentNum = commentScoreNum[1];\r\n    let starStr = combineCommentStar(resultScore);\r\n\r\n    let tabOnline =\"\";\r\n    let tabOffline=\"\";\r\n    let tabArticle=\"\";\r\n\r\n    resourcesData.forEach( (item)=>{\r\n        if(item.price===\"免費\"){\r\n            if(item.type===\"線上課程\"){\r\n                tabOnline += combineResouorceItem(item,resultScore,starStr,commentNum);\r\n            }\r\n\r\n            if(item.type===\"實體課程\"){\r\n                tabOffline += combineResouorceItem(item,resultScore,starStr,commentNum);\r\n            }\r\n\r\n            if(item.type===\"文章\"){\r\n                tabArticle += combineResouorceItem(item,resultScore,starStr,commentNum);\r\n            }\r\n        }\r\n \r\n    })\r\n\r\n    if(resourceType1 !==null ){\r\n        resourceType1.innerHTML = tabOnline;\r\n        if(tabOnline==\"\"){\r\n            resource1Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n    }\r\n    if(resourceType2 !==null ){\r\n        resourceType2.innerHTML = tabOffline;\r\n        if(tabOffline==\"\"){\r\n            resource2Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n    }\r\n    if(resourceType3 !==null ){\r\n        resourceType3.innerHTML = tabArticle;\r\n        if(tabArticle==\"\"){\r\n            resource3Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n","","\r\nconst loginAccount = document.querySelector('#loginAccount');\r\nconst loginPw = document.querySelector('#loginPw');\r\nconst btnLogin = document.querySelector('#btnLogin');\r\n// const signUpFormInputs = document.querySelectorAll('input.form-control');  //input\r\n\r\n\r\nfunction initLogin(){\r\n    getUserList();\r\n}\r\ninitLogin();\r\n\r\n\r\n//取得用戶清單\r\nlet usersData = [];\r\nfunction getUserList(){\r\n    axios.get(\"http://localhost:3000/users\").then(res=>{\r\n        usersData = res.data;\r\n    }).catch(err=>{\r\n        console.log(err.response);\r\n    })\r\n}\r\n\r\n//欄位檢查\r\nif(document.querySelector(\"#loginAccount\")!==null){\r\n    document.querySelector(\"#loginAccount\").addEventListener(\"change\",e=>{\r\n    if(loginAccount.value==\"\"){\r\n        document.querySelector('.account').textContent=\"請輸入帳號\";\r\n    }else{\r\n        document.querySelector('.account').textContent=\"\";\r\n    }\r\n    usersData.forEach(userItem=>{\r\n        if(userItem.email !==loginAccount.value){\r\n            document.querySelector('.account').textContent=\"此帳號不存在\";\r\n        }else{\r\n            document.querySelector('.account').textContent=\"\";\r\n        }\r\n    })\r\n})\r\n}\r\n\r\nif(document.querySelector(\"#loginPw\")!==null){\r\n    document.querySelector(\"#loginPw\").addEventListener(\"change\",e=>{\r\n        if(loginPw.value==\"\"){\r\n            document.querySelector('.password').textContent=\"請輸入密碼\";\r\n        }else{\r\n            document.querySelector('.password').textContent=\"\";\r\n        }\r\n    })\r\n}\r\n\r\nif(btnLogin!==null){\r\n\r\n    btnLogin.addEventListener(\"click\",e=>{\r\n    e.preventDefault();\r\n\r\n        if(loginAccount.value===\"\"||loginPw.value===\"\"){\r\n            return\r\n        }\r\n\r\n        if(document.querySelector('.account').textContent==\"\" && \r\n        document.querySelector('.password').textContent==\"\" ){\r\n\r\n            axios.post(\"http://localhost:3000/login\",{\r\n                \"email\":loginAccount.value,\r\n                \"password\":loginPw.value\r\n\r\n            }).then(res=>{\r\n                localStorage.setItem('accessToken', ` ${res.data.accessToken}`);\r\n                localStorage.setItem('userId', res.data.user.id);\r\n                location.href = \"./index.html\";\r\n\r\n            }).catch(err=>{\r\n                document.querySelector('.password').textContent=\"密碼錯誤\";\r\n                localStorage.clear();\r\n            })\r\n\r\n        }\r\n\r\n\r\n})\r\n}\r\n\r\n","let resId = location.href.split(\"=\")[1];\r\n\r\nfunction initResourcePage(){\r\n    getResourcesForResources();\r\n    getCommentData();\r\n    getResourcesItem(resId);\r\n    getResourcesComment(resId);\r\n}\r\ninitResourcePage();\r\n\r\nlet resourcesData = [];\r\nlet commentsData = [];\r\n\r\n//2. 取得資料\r\nfunction getResourcesForResources(){\r\n  axios.get(`${url}/resources`)\r\n  .then(res=>{\r\n    resourcesData = res.data;\r\n    //getCommentData();\r\n    renderRelatedResource();\r\n\r\n  }).catch(error=>{\r\n    console.log(error);\r\n  })\r\n}\r\n\r\nfunction getCommentData(){\r\n  axios.get(`${url}/comments`)\r\n  .then(res=>{\r\n    commentsData = res.data; \r\n    renderRelatedResource();\r\n  }).catch(error=>{\r\n    console.log(error);\r\n  })\r\n}\r\n\r\n\r\nlet resourceContent=[];\r\nlet resourceCommentData=[];\r\n\r\nfunction getResourcesItem(id){\r\n    axios.get(`${url}/resources?id=${id}&_expand=user`)\r\n    .then(res=>{\r\n        resourceContent = res.data;\r\n        renderResource();\r\n        renderRelatedResource();\r\n    \r\n    }).catch(error=>{\r\n      console.log(error);\r\n    })\r\n}\r\n\r\nfunction getResourcesComment(id){\r\n    axios.get(`${url}/comments?_expand=resouceId&&resourceId=${id}&&_expand=user`)\r\n    .then(res=>{\r\n        resourceCommentData = res.data;\r\n        renderResource();\r\n        renderComment();\r\n\r\n    }).catch(error=>{\r\n      console.log(error);\r\n    })\r\n}\r\n\r\n/******************資源資訊***********************/\r\n\r\nconst imageNBrief = document.querySelector('.imageNBrief');\r\nconst titleBox = document.querySelector('.titleBox');\r\nconst btnBox = document.querySelector('.btnBox');\r\n\r\n\r\nfunction renderResource(){\r\n    let renderItem=resourceContent[0];\r\n    let userName =\"\";\r\n\r\n    if(renderItem!==undefined){\r\n        if( renderItem.user.role===\"admin\"){\r\n            userName = \"admin\"\r\n        }else{\r\n            userName =`${renderItem.user.lastName} ${renderItem.user.firstName} `;\r\n        }\r\n\r\n        let commentScoreNum = getAverageScore();\r\n        let resultScore = commentScoreNum[0];\r\n        let commentNum = commentScoreNum[1];\r\n        let starStr = combineCommentStar(resultScore);\r\n\r\n        let imageNBriefStr=\"\";\r\n        let titleBoxStr=\"\";\r\n        let btnBoxStr=\"\";\r\n\r\n        if( renderItem.imgUrl ===\"\"){\r\n            renderItem.imgUrl = \"./assets/images/resources_cover/noimgCover.jpg\";\r\n        }\r\n\r\n        if(resultScore[resId]===undefined || starStr[resId]=== undefined ){\r\n            titleBoxStr = `<h2 class=\"fs-5 fw-bold mt-md-0 mt-3\">${renderItem.title}</h2>\r\n            <div class=\"d-flex flex-wrap align-items-center text-secondary\">\r\n                <span class=\"fs-8 fw-bold me-lg-2\">尚無評價</span>\r\n            </div>\r\n            <div class=\"classify fs-7\">\r\n                <ul class=\"d-flex \">\r\n                    <li class=\"me-2\">  ${renderItem.topics}</li>\r\n                    <li class=\"me-2\">  ${renderItem.type}</li>\r\n                    <li class=\"me-2\">  ${renderItem.level}</li>\r\n                    <li class=\"me-2\">  ${renderItem.price}</li>\r\n                </ul>\r\n                <ul>\r\n                    <li class=\"me-2\">  ${renderItem.lang} </li>\r\n                    <li class=\"me-2\">建立者 : ${userName} </li>\r\n                </ul>\r\n            </div>`;\r\n        }else{\r\n            titleBoxStr = `<h2 class=\"fs-5 fw-bold mt-md-0 mt-3\">${renderItem.title}</h2>\r\n            <div class=\"d-flex flex-wrap align-items-center text-secondary\">\r\n                <span class=\"fs-5 fw-bold me-lg-2\"> ${resultScore[resId]}</span>\r\n                <ul class=\"d-flex align-items-center lh-1 me-lg-2\">\r\n                ${starStr[resId]}\r\n                </ul>                                \r\n                <span class=\"fs-8\">(${commentNum[resId]})</span>\r\n            </div>\r\n            <div class=\"classify fs-7\">\r\n                <ul class=\"d-flex \">\r\n                    <li class=\"me-2\">  ${renderItem.topics}</li>\r\n                    <li class=\"me-2\">  ${renderItem.type}</li>\r\n                    <li class=\"me-2\">  ${renderItem.level}</li>\r\n                    <li class=\"me-2\">  ${renderItem.price}</li>\r\n                </ul>\r\n                <ul>\r\n                    <li class=\"me-2\">  ${renderItem.lang} </li>\r\n                    <li class=\"me-2\">建立者 : ${userName} </li>\r\n                </ul>\r\n            </div>`;\r\n        }\r\n\r\n\r\n        btnBoxStr = `\r\n        <a href=\"${renderItem.url}\" target=\"_blank\" type=\"button\" class=\"btn btn-sm btn-secondary my-2 text-white px-lg-4 py-2 fs-6\">前往資源</a>\r\n        <div class=\"d-flex justify-content-center flex-row flex-md-column flex-lg-row align-items-center\">                    \r\n            <a href=\"#\" role=\"button\" class=\"d-flex align-items-center me-2 \">\r\n                <span class=\"material-icons \">bookmark_border</span>\r\n                <!-- <span class=\"material-icons\">bookmark</span> -->\r\n                <span>收藏</span>\r\n            </a>\r\n\r\n            <a href=\"#\" role=\"button\" class=\" d-flex align-items-center me-2 \">\r\n                <span class=\"material-icons material-icons-outlined\">feedback</span>\r\n                <!-- <span class=\"material-icons\">feedback</span> -->\r\n                <span>回報</span>\r\n            </a>\r\n        </div>`;\r\n\r\n        imageNBriefStr = `\r\n        <img class=\"d-md-block d-none\" src=\"${renderItem.imgUrl}\" alt=\"${renderItem.title}\">\r\n                    <div class=\"mt-md-3 text-dark\">${renderItem.intro}</div>`;\r\n        \r\n        \r\n        if(imageNBrief!==null){\r\n            imageNBrief.innerHTML = imageNBriefStr;\r\n        }\r\n        if(titleBox!==null){\r\n            titleBox.innerHTML = titleBoxStr;\r\n        }\r\n        if(btnBox!==null){\r\n            btnBox.innerHTML = btnBoxStr;\r\n        }\r\n\r\n    }\r\n   \r\n}\r\n\r\n\r\n/******************資源評論***********************/\r\n\r\nconst commentList=document.querySelector('.resourceComment > .commentList');\r\n\r\n\r\nfunction renderComment(){\r\n\r\n    let commentStr=\"\";\r\n    let userName =\"\";\r\n    // console.log(resourceCommentData)\r\n\r\n    if(resourceCommentData.length===0){\r\n        const btnReadMore = document.querySelector('.btnReadMore');\r\n        if(btnReadMore!==null){\r\n            btnReadMore.setAttribute(\"class\",\"d-none\");\r\n        }\r\n    }\r\n    //let resultScore = getAverageScore();\r\n    let commentNum = 0;\r\n    resourceCommentData.forEach(item=>{\r\n        let resultScore = {\r\n            \"1\":`${item.score}`\r\n        };\r\n        let newResultScoreOjb = combineCommentStar(resultScore);\r\n\r\n        if(item.user.role===\"admin\"){\r\n            userName = \"admin\"\r\n        }else{\r\n            userName =`${item.user.lastName} ${item.user.firstName} `;\r\n        }\r\n\r\n        \r\n        let commentTimeAge = Ftime(item.commentTime);\r\n        commentStr+=`\r\n        <div class=\"col mb-3 position-relatvie\" style=\"z-index:10;\">\r\n            <div class=\"card card-body position-relatvie\" style=\"z-index:10;\">\r\n                <div class=\"d-flex p-lg-3 align-items-lg-center flex-column flex-lg-row justify-content-between\"> \r\n                    <h3 class=\"card-title fs-7 d-flex align-items-center justify-content-lg-start justify-content-between\">\r\n                        <img class=\"rounded-circle\" src=\"./assets/images/icon_image.png\" alt=\"\">\r\n                        <p class=\"mb-0 mx-2 text-start\">\r\n                            ${userName}<br/>\r\n                            <span class=\"fs-9 text-gray\">${item.user.title}</span>\r\n                        </p>\r\n                        \r\n                    </h3>\r\n                    <div class=\"d-flex flex-lg-column justify-content-between\">\r\n                        <ul class=\"card-text d-flex align-items-center lh-1\">\r\n                        ${newResultScoreOjb[1]}\r\n                        \r\n                        </ul> \r\n                        <p class=\"mb-0 text-end\">\r\n                            <span class=\"fs-9 text-gray\">${commentTimeAge}</span></p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"d-flex flex-column\">\r\n                    <div class=\"form-floating my-3\"> \r\n                        <p>${item.content}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"d-flex justify-content-between fs-8\">\r\n                    <!-- like & dislike -->\r\n                    <div class=\"d-flex align-items-center\">\r\n                        <a href=\"#\">\r\n                            <span class=\"material-icons-outlined fs-6\">thumb_up_alt</span></a>\r\n                        <span class=\"mx-2\">${item.likeNum}</span>\r\n                        <!-- <a href=\"#\">\r\n                        <span class=\"material-icons fs-6\">thumb_up_alt</span></a> -->\r\n\r\n                            <a href=\"#\">\r\n                            <span class=\"material-icons-outlined fs-6\">thumb_down_alt</span></a>\r\n                            <span class=\"mx-2\">${item.dislikeNum}</span>\r\n                            <!-- <a href=\"#\">\r\n                            <span class=\"material-icons fs-6\">thumb_down_alt</span></a> -->\r\n\r\n                    </div>\r\n\r\n                    <div class=\"position-relatvie\" >\r\n                        <a class=\"d-flex align-items-center\" data-bs-toggle=\"collapse\" href=\"#commentOffense${commentNum+1}\" role=\"button\" aria-expanded=\"false\" aria-controls=\"commentOffense\">\r\n                            <span class=\"material-icons-outlined\">report</span>\r\n                            <span>檢舉</span>\r\n                        </a>\r\n\r\n                        <div class=\"offenseItem border bg-light rounded-3 p-3 collapse position-absolute end-0\" id=\"commentOffense${commentNum+1}\" style=\"z-index:0;\">\r\n                            <div class=\"form-check\">\r\n                                <input class=\"form-check-input\" type=\"radio\" name=\"offenseItem\" id=\"offenseItem1\">\r\n                                <label class=\"form-check-label\" for=\"offenseItem1\">\r\n                                    偏離主題\r\n                                </label>\r\n                            </div>\r\n                            <div class=\"form-check\">\r\n                                <input class=\"form-check-input\" type=\"radio\" name=\"offenseItem\" id=\"offenseItem2\">\r\n                                <label class=\"form-check-label\" for=\"offenseItem2\">\r\n                                    垃圾內容及廣告宣傳\r\n                                </label>\r\n                            </div>\r\n                            <div class=\"form-check\">\r\n                                <input class=\"form-check-input\" type=\"radio\" name=\"offenseItem\" id=\"offenseItem3\">\r\n                                <label class=\"form-check-label\" for=\"offenseItem3\">\r\n                                    騷擾內容及不雅用語\r\n                                </label>\r\n                            </div>\r\n                            <button class=\"btn btn-primary btn-sm text-white\" type=\"submit\">送出</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div><!--end card-->\r\n        </div>`;\r\n\r\n        commentNum +=1;\r\n\r\n    })\r\n\r\n    if(commentList!==null){\r\n         commentList.innerHTML = commentStr;\r\n    }\r\n   \r\n\r\n}\r\n\r\n/******************相關資源***********************/\r\n\r\nconst relatedResource = document.querySelector('.relatedResource');\r\n\r\nfunction renderRelatedResource(){\r\n    let relatedStr=\"\";\r\n    let renderNum = 1;\r\n    \r\n    if(resourcesData!==undefined){\r\n        resourcesData.forEach(resItem=>{\r\n        let resultScore = getAverageScore();\r\n        let newResultScoreOjb = combineCommentStar(resultScore);\r\n        if(resourceContent.length!==0){\r\n            //console.log(resourceContent);\r\n            if(resItem.topics === resourceContent[0].topics \r\n                && resItem.id !== resourceContent[0].id){\r\n                renderNum +=1;   \r\n                if(renderNum <=5 ){\r\n                    if(resultScore[resItem.id]==undefined||newResultScoreOjb[resItem.id]==undefined){\r\n                        relatedStr+=`\r\n                        <div class=\"my-4\">\r\n                        <h4 class=\"fs-7\"><a href=\"./resource.html?id=${resItem.id}\" target=\"_blank\"> ${resItem.title}</a></h4>\r\n                            <div class=\"d-flex flex-wrap justify-content-start align-items-center\">\r\n                                <span class=\"fs-8 text-gray me-lg-2\">尚無評價</span>                           \r\n                            </div>\r\n                        </div>\r\n                        `;\r\n                    }else{\r\n                        relatedStr+=`\r\n                        <div class=\"my-4\">\r\n                        <h4 class=\"fs-7\"><a href=\"./resource.html?id=${resItem.id}\" target=\"_blank\"> ${resItem.title}</a></h4>\r\n                        <div class=\"d-flex flex-wrap justify-content-start align-items-center text-secondary\">\r\n                            <span class=\"fs-7 fw-bold me-lg-2\">${resultScore[resItem.id]}</span>\r\n                            <ul class=\"d-flex align-items-center lh-1 me-lg-2 \">\r\n                            ${newResultScoreOjb[resItem.id]}\r\n                            </ul>                                \r\n                        </div>\r\n                        </div>\r\n                        `;\r\n                    }\r\n                \r\n                    \r\n                } \r\n            }\r\n        }\r\n        \r\n        \r\n    })\r\n    }\r\n    \r\n\r\n    if(relatedResource!==null){\r\n        relatedResource.innerHTML = relatedStr;\r\n    }\r\n}","\n\n//1. 頁面初始化\nfunction initResourceList(){\n  getResourcesForResources();\n  getCommentData();\n  //changeResourceAverageScore();\n}\ninitResourceList();\n\n\n/*****************top ***************/\n\nconst bannerBlockTitle = document.querySelector('.bannerBlock > h2');\n\nif(resTopic!==undefined && bannerBlockTitle!==null){\n  bannerBlockTitle.textContent = resTopic;\n\n}\n\n/*****************入門推薦 ***************/\n\nconst foundation1Basic = document.querySelector('#foundation1Basic > div.row');\nconst foundation2Free = document.querySelector('#foundation2Free > div.row');\nconst foundation3CN = document.querySelector('#foundation3CN > div.row');\n\nlet resourcesData = [];\nlet commentsData = [];\nlet thisTopicData = [];\n\n//2. 取得資料\nfunction getResourcesForResources(){\n  axios.get(`${url}/resources`)\n  .then(res=>{\n    //resourcesData = res.data;\n    //console.log(resTopic);\n    resourcesData = res.data.filter(item=>{\n      return item.topics == resTopic;\n    })\n    // thisTopicData = resourcesData.filter(item=>{\n    //   return item.topics == resTopic;\n    // })\n    //console.log(thisTopicData);\n    renderFoundationRecommond();\n    renderFilterResultList();\n\n  }).catch(error=>{\n    console.log(error);\n  })\n}\n\nfunction getCommentData(){\n  axios.get(`${url}/comments`)\n  .then(res=>{\n    commentsData = res.data; \n  }).catch(error=>{\n    console.log(error);\n  })\n}\n\n\n// function getTopicData(){\n//   thisTopicData = resourcesData.filter(item=>{\n//     return item.topics = resTopic;\n//   })\n// }\n\n//3. 渲染入門推薦資料\nfunction renderFoundationRecommond(){\n\n  let commentScoreNum = getAverageScore();\n  let resultScore = commentScoreNum[0];\n  let commentNum = commentScoreNum[1];\n  let starStr = combineCommentStar(resultScore); //newResultScore\n\n  let itemNum1 = 0;\n  let itemNum2 = 0;\n  let itemNum3 = 0;\n  let renderMaxNum = 5;\n  //組各tab render HTML\n  let basicStr =\"\";\n  let freeStr=\"\";\n  let cnStr=\"\";\n\n  resourcesData.forEach( (item,index)=>{\n    \n   \n      if(item.level === \"初階\"){\n        if(itemNum1 <renderMaxNum){\n           basicStr += combineResouorceItem(item,resultScore,starStr,commentNum);\n           itemNum1+=1;\n        }\n         \n      }\n      \n      if(item.price === \"免費\"){\n        if(itemNum2 <renderMaxNum){\n          freeStr += combineResouorceItem(item,resultScore,starStr,commentNum); \n          itemNum2+=1;\n        }\n         \n      }\n      \n      item.lang.forEach(langItem=>{\n        if(langItem === \"繁體中文\"){\n          if(itemNum3 <renderMaxNum){\n            cnStr += combineResouorceItem(item,resultScore,starStr,commentNum);\n            itemNum3+=1;\n          }\n          \n        }\n      })\n    \n  })\n\n  if(foundation1Basic!==null){\n    foundation1Basic.innerHTML = basicStr;\n  }\n  \n  if(foundation2Free!==null){\n    foundation2Free.innerHTML = freeStr;\n  }\n  \n  if(foundation3CN!==null){\n    foundation3CN.innerHTML = cnStr;\n  }\n}\n\n\nfunction getAverageScore(){\n\nlet scoreTotal = {};  //每筆資源評價 總分\nlet resourceIdObj = {}; //每筆資源評價 筆數\nlet resultScore = {};  //每筆資源 平均分數(星星數)\n\n  commentsData.forEach(item=>{\n      if(resourceIdObj[item.resourceId] === undefined){\n          resourceIdObj[item.resourceId] = 1;\n          scoreTotal[item.resourceId] = item.score;\n         \n      }else{\n          resourceIdObj[item.resourceId] +=1;\n          scoreTotal[item.resourceId] += item.score;\n          \n      }\n      resultScore[item.resourceId] = (scoreTotal[item.resourceId] /  resourceIdObj[item.resourceId]).toFixed(1);\n\n  })\n  // console.log(\"resourceIdObj\",resourceIdObj);\n  // console.log(\"scoreTotal\",scoreTotal);\n  // console.log(\"resultScore\",resultScore);\n  return [resultScore,resourceIdObj];\n}\n\n//4. 組星星字串\nfunction combineCommentStar(resultScore){\n  //評論分數+星星+筆數 HTML\n  let newResultScore = {...resultScore};\n  let resourceIdArr = Object.keys(newResultScore);  //['1, '2, '3'] \n  let scoreArr = Object.values(newResultScore); //['4.0', '3.3', '4.5' ,'2.8'] \n\n  scoreArr.forEach((item,index)=>{\n    let starStr=\"\"; //星星HTML String\n    //星星數\n    for(let i=1; i<=item[0] ;i++){\n      starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star</span></li>`;\n      newResultScore[`${resourceIdArr[`${index}`]}`] = starStr;\n    }\n    \n    //半顆星星+空星星  \n      if(item[2]<=2){\n        for(let i=1; i<=(5-item[0]) ;i++){\n          starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star_outline</span></li> `;\n          newResultScore[`${resourceIdArr[`${index}`]}`] = starStr;\n        }\n        \n      }else if(item[2] >=3 && item[2] <=7){\n          starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star_half</span></li>`;\n          for(let i=1; i<=(5-item[0]-1) ;i++){\n            starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star_outline</span></li>`;\n          }\n          newResultScore[`${resourceIdArr[`${index}`]}`] = starStr;\n       \n      }else if(item[2]>=8){\n          starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star</span></li`;\n        for(let i=1; i<=(5-item[0]-1) ;i++){\n          starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star_outline</span></li>`;\n          newResultScore[`${resourceIdArr[`${index}`]}`] = starStr;\n        }\n      }\n\n  })\n  return newResultScore;\n}\n\n//5. 入門推薦組單一資源項目html\nfunction combineResouorceItem(item,resultScore,starStr,commentNum){\n\n  if( item.imgUrl ===\"\"){\n    item.imgUrl = \"./assets/images/resources_cover/noimgCover.jpg\";\n  }\n\n  if(resultScore[item.id]===undefined || starStr[item.id]=== undefined || commentNum[item.id]=== undefined ){\n\n    return  `\n    <div class=\"col-lg-2 col-md-4 col-6\">\n    <div>\n        <p class=\"text-center\">\n            <a href=\"./resource.html?id=${item.id}\" target=\"_blank\">\n            <img src=\"${item.imgUrl}\" alt=\"${item.title}\" onerror=\"this.src=./assets/images/resources_cover/noimgCover.jpg\"></a></p>\n        <div class=\"p-2\">\n            <h4 class=\"fs-7 ellipsis\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"> ${item.title}</a></h4>\n            <div class=\"d-flex flex-wrap justify-content-between align-items-center\">                             \n                <span class=\"fs-8 text-gray\"> 尚無評價 </span>\n            </div>\n  \n        </div>\n    </div>\n    </div>\n    `;\n  }else{\n    return  `\n      <div class=\"col-lg-2 col-md-4 col-6\">\n      <div>\n          <p class=\"text-center\">\n              <a href=\"./resource.html?id=${item.id}\" target=\"_blank\">\n              <img src=\"${item.imgUrl}\" alt=\"${item.title}\" onerror=\"this.src=./assets/images/resources_cover/noimgCover.jpg\"></a></p>\n          <div class=\"p-2\">\n              <h4 class=\"fs-7 ellipsis\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"> ${item.title}</a></h4>\n\n              <div class=\"d-flex flex-wrap justify-content-between align-items-center text-secondary\">\n                  <span class=\"fs-7 fw-bold me-lg-2\"> ${resultScore[item.id]}</span>\n                  <ul class=\"d-flex align-items-center lh-1 me-lg-2\">\n                  ${starStr[item.id]}\n                  </ul>                                \n                  <span class=\"fs-8\">(${commentNum[item.id]})</span>\n              </div>\n\n          </div>\n      </div>\n      </div>\n      `;\n  }\n      \n}\n\n/***************** 相關主題 ***************/\n\n\n\n/***************** 資源篩選 ***************/\n\nconst resourceItem = document.querySelector('.resourceItem');\nconst filterItemInput = document.querySelectorAll('.filterItem > input');  \n\nlet checkObj={};\nlet renderList=[];\n\n// checked 監聽 : 取得 checked 清單的關鍵字 + render\nfilterItemInput.forEach((item,index)=>{\n\n  item.addEventListener(\"change\",e=>{\n    let filterKeyword = item.getAttribute(\"name\");\n    let groupName = item.getAttribute(\"data-group\");\n    console.log(filterKeyword,groupName);\n\n    if (e.target.checked) {\n      if(checkObj[groupName]===undefined){\n        checkObj[groupName]=[];\n        checkObj[groupName].push(filterKeyword);\n      }else{\n        checkObj[groupName].push(filterKeyword);\n      }\n    }else {\n        checkObj[groupName] = checkObj[groupName].filter(item=>{\n          return filterKeyword !=item;\n        })  \n        if(checkObj[groupName].length===0){\n          delete checkObj[groupName];\n        }\n    }\n\n    //  console.log(\"checkObj\");\n    //  console.log(checkObj);\n\n    renderList = resourcesData.filter(resItem=>{\n      \n      let hasType = true ;  \n      let hasLevel =true;\n      let hasPrice =true;\n      let checkLang = true;\n  \n      if(checkObj.type){\n        hasType = checkObj.type.includes(resItem.type);\n      }\n      if(checkObj.level){\n        hasLevel = checkObj.level.includes(resItem.level);\n      }\n      if(checkObj.price){\n        hasPrice = checkObj.price.includes(resItem.price);\n      }\n  \n      checkLang = resItem.lang.some((str) => {\n        //console.log(str);\n        if (!checkObj.lang) {\n          return true;\n        }\n        return checkObj.lang.includes(str);\n      });\n  \n      return hasType && hasLevel && hasPrice && checkLang ;\n  \n    })\n    // console.log(renderList);\n    renderFilterResultList(); \n\n  })\n})\n\n\n\nfunction renderFilterResultList(){ \n\n  let commentScoreNum = getAverageScore();\n  let resultScore = commentScoreNum[0];\n  let commentNum = commentScoreNum[1];\n  let starStr = combineCommentStar(resultScore);\n\n    let renderfilterStr=\"\";\n    if(renderList.length===0){\n      resourcesData.forEach(renderItem=>{\n        renderfilterStr += combineResouorceItemType2(renderItem,resultScore,starStr,commentNum);\n      })\n\n      if(resultNumber!==undefined){\n        resultNumber.setAttribute(\"class\",\"d-none\");\n      }\n      if(clearBtnText!==undefined){\n        clearBtnText.setAttribute(\"class\",\"d-none\");\n      }\n      \n\n      if(checkObj.type !== undefined || checkObj.level !== undefined || checkObj.price !== undefined || checkObj.lang !== undefined ){\n        renderfilterStr = \"沒有符合條件的項目\";\n      }\n    }else{\n      if(resultNumber!==undefined){\n         resultNumber.setAttribute(\"class\",\"d-inline-block\");\n          resultNumber.textContent = `${renderList.length} 個篩選結果`;\n      }\n      if(clearBtnText!==undefined){\n        clearBtnText.setAttribute(\"class\",\"d-inline-block\");\n      }\n      \n    \n      if(checkObj.type==undefined && checkObj.level==undefined && checkObj.price==undefined && checkObj.lang==undefined ){\n        resultNumber.setAttribute(\"class\",\"d-none\");\n        clearBtnText.setAttribute(\"class\",\"d-none\");\n      }\n\n      clearFilter();\n      \n\n      renderList.forEach(renderItem=>{\n        renderfilterStr += combineResouorceItemType2(renderItem,resultScore,starStr,commentNum);\n      })\n    }\n\n    if(resourceItem!==null){\n      resourceItem.innerHTML = renderfilterStr;\n    }\n}\n\n\nfunction combineResouorceItemType2(renderItem,resultScore,starStr,commentNum){\n  if( renderItem.imgUrl ===\"\"){\n    renderItem.imgUrl = \"./assets/images/resources_cover/noimgCover.jpg\";\n  }\n\n  if(resultScore[renderItem.id]===undefined || starStr[renderItem.id]=== undefined || commentNum[renderItem.id]=== undefined ){\n    return `<div class=\"row my-3 \">\n    <div class=\"col-2 \">\n      <a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\"><img src=\"${renderItem.imgUrl}\" alt=\"${renderItem.title}\"></a>\n    </div>\n      <div class=\"col-6\">\n          <h4 class=\"fs-7\"><a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\">${renderItem.title}</a></h4>\n          <div class=\"d-flex flex-wrap align-items-center\">\n              <span class=\"fs-8 text-gray fw-bold me-lg-2\"> 尚無評價</span>\n              <p class=\"text-dark fs-8\" >test:${renderItem.type}, ${renderItem.level} , ${renderItem.price}, ${renderItem.lang} </p>\n          </div>\n      </div>\n      <div class=\"col-4\">\n          <div class=\"d-flex flex-column flex-lg-row  align-items-end\">\n              <a href=\"${renderItem.url}\" target=\"_blank\" role=\"button\" class=\"btn btn-tiffany my-2 w-75 mx-2\">前往資源</a>\n              <a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\" role=\"button\" class=\"btn btn-yellowBrown my-2 w-75 mx-2\">查看內容</a>\n          </div>\n      </div>\n    </div>`;\n  }else{\n    return `<div class=\"row my-3 \">\n  <div class=\"col-2 \">\n     <a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\"><img src=\"${renderItem.imgUrl}\" alt=\"${renderItem.title}\"></a>  \n  </div>\n    <div class=\"col-6\">\n     <h4 class=\"fs-7\"><a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\">${renderItem.title}</a></h4>\n        <div class=\"d-flex flex-wrap align-items-center text-secondary\">\n            <span class=\"fs-7 fw-bold me-lg-2\"> ${resultScore[renderItem.id]}</span>\n            <ul class=\"d-flex align-items-center lh-1 me-lg-2  \">\n            ${starStr[renderItem.id]}\n            </ul>                                \n            <span class=\"fs-8\">(${commentNum[renderItem.id]})</span>\n            <p class=\"text-dark fs-8\">test ${renderItem.type}, ${renderItem.level} , ${renderItem.price}, ${renderItem.lang} </p>\n        </div>\n    </div>\n    <div class=\"col-4\">\n        <div class=\"d-flex flex-column flex-lg-row  align-items-end\">\n          <a href=\"${renderItem.url}\" target=\"_blank\" role=\"button\" class=\"btn btn-tiffany my-2 w-75 mx-2\">前往資源</a>\n          <a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\" role=\"button\" class=\"btn btn-yellowBrown my-2 w-75 mx-2\">查看內容</a>\n        </div>  \n    </div>\n  </div>\n      `;\n  }\n  \n}\n\n\n\n/***************** n 筆結果 / 清除篩選 / 排序 ***************/\n\nconst resultNumber = document.querySelector('.resultNumber');\nconst clearBtnText = document.querySelector('.clearBtnText');\nconst clearFilterBtn = document.querySelector('#clearFilterBtn');\nconst resourceSort = document.querySelector('#resourceSort');\n\nfunction clearFilter(){\n  clearFilterBtn.addEventListener(\"click\",e=>{\n    if(checkObj.type){\n      delete checkObj.type;\n    }\n    if(checkObj.level){\n      delete checkObj.level;\n    }\n    if(checkObj.price){\n      delete checkObj.price;\n    }\n    if(checkObj.lang){\n      delete checkObj.lang;\n    }\n    filterItemInput.forEach(item=>{\n      item.checked = false;\n    })\n    renderFilterResultList();\n    console.log(\"click check\");\n    console.log(checkObj);\n  })\n  \n}\n\n\n\n\n","const signUpForm = document.querySelector('form.signUpForm');  //form\r\n\r\nconst signupLastName = document.querySelector('#signupLastName');\r\nconst signupfirstName = document.querySelector('#signupfirstName');\r\nconst signupMail = document.querySelector('#signupMail');\r\nconst signupPw = document.querySelector('#signupPw');\r\nconst signupPwConfirm = document.querySelector('#signupPwConfirm');\r\n\r\nconst signUpFormInputs = document.querySelectorAll('input.signupInput');  //input\r\nconst btnSignUp = document.querySelector('#btnSignUp');\r\n\r\n//console.log(signUpFormInputs);\r\n\r\n\r\nfunction initSignup(){\r\n    getUserList();\r\n}\r\ninitSignup();\r\n\r\n\r\n\r\n//驗證欄位內容\r\nconst constraints ={\r\n    lastname:{\r\n        presence: {message: \"必填欄位\"},\r\n    },\r\n    firstname:{\r\n        presence: {message: \"必填欄位\"},\r\n    },\r\n    email:{\r\n        presence: {message: \"必填欄位\"},\r\n        email:{\r\n            email:true,\r\n            message: \"請填寫正確的信箱格式\"\r\n        },\r\n       \r\n    },\r\n    password:{\r\n        presence: {message: \"必填欄位\"},\r\n        length: {\r\n            minimum: 5, \r\n            message: \"密碼長度請大於5\"\r\n        }\r\n    },\r\n    confirmpw:{\r\n        presence: {message: \"必填欄位\"},\r\n        equality:{\r\n            attribute:\"password\",\r\n            message: \"與前者輸入密碼不同\",\r\n            // comparator: function(v1, v2) {\r\n            //     return v1 === v2;\r\n            //   }\r\n        }\r\n    }\r\n}\r\n\r\n\r\nsignUpFormInputs.forEach(item=>{\r\n    item.addEventListener(\"change\",e=>{\r\n       \r\n        item.nextElementSibling.textContent = '';\r\n        let errors = validate(signUpForm, constraints);\r\n        console.log(item.value);\r\n\r\n        \r\n        usersData.forEach(userItem=>{\r\n            if(userItem.email===signupMail.value){\r\n                // console.log(userItem.email);\r\n                // console.log(signupMail.value);\r\n                document.querySelector('.email').textContent = \"此信箱已存在\"         \r\n                //return;\r\n            }else{\r\n                document.querySelector('.email').textContent =\"\";\r\n                //item.nextElementSibling.textContent = \"\"\r\n            }\r\n        })\r\n    \r\n        //有錯就呈現在畫面上\r\n        if (errors) {\r\n          Object.keys(errors).forEach( keys=> {\r\n            //console.log(keys);\r\n            document.querySelector(`.${keys}`).textContent = errors[keys][0].split(\" \")[1];\r\n          });\r\n        }\r\n    })\r\n})\r\n\r\n\r\n\r\n//取得用戶清單\r\nlet usersData = [];\r\nfunction getUserList(){\r\n    axios.get(\"http://localhost:3000/users\").then(res=>{\r\n        usersData = res.data\r\n    }).catch(err=>{\r\n        console.log(err.response);\r\n    })\r\n}\r\n\r\n\r\n//註冊 post\r\nif(btnSignUp!==null){\r\n    btnSignUp.addEventListener(\"click\",e=>{\r\n    e.preventDefault();\r\n\r\n    if(signupLastName.value===\"\"||signupfirstName.value===\"\"||signupMail.value===\"\"||signupPw.value===\"\"||signupPwConfirm.value===\"\"){\r\n        console.log(\"有空欄位\");\r\n        console.log(\"signupLastName:\",signupLastName.value);\r\n        console.log(\"signupfirstName:\",signupfirstName.value);\r\n        console.log(\"signupMail:\",signupMail.value);\r\n        console.log(\"signupPw:\",signupPw.value);\r\n        console.log(\"signupPwConfirm:\",signupPwConfirm.value);\r\n        return;\r\n    }\r\n\r\n    // usersData.forEach(item=>{\r\n    //     if(item.email===signupMail.value){\r\n    //         document.querySelector('.email').textContent = \"此信箱已存在\"\r\n    //         return;\r\n    //     }else{\r\n    //         document.querySelector('.email').textContent =\"\";\r\n    //     }\r\n    // })\r\n\r\n    signUpFormInputs.forEach(item=>{\r\n        if(item.nextElementSibling.textContent !== '' ){\r\n            console.log(\"有錯誤訊息\");\r\n            return;\r\n        }\r\n    })\r\n\r\n    if(signupPw.value!== signupPwConfirm.value){\r\n        return;\r\n    }\r\n\r\n    axios.post(\"http://localhost:3000/users\",{\r\n        \"lastName\": signupLastName.value,\r\n        \"firstName\": signupfirstName.value,\r\n        \"email\": signupMail.value,\r\n        \"password\": signupPw.value,\r\n        \"role\": \"user\"\r\n\r\n    }).then(res=>{\r\n        console.log(res.data);\r\n        alert('成功註冊')\r\n        // document.querySelector('#signupLastName').value=\"\";\r\n        // document.querySelector('#signupfirstName').value=\"\";\r\n        // document.querySelector('#signupMail').value=\"\";\r\n        // document.querySelector('#signupPw').value=\"\";\r\n        // document.querySelector('#signupPwConfirm').value=\"\";\r\n        location.href ='./index.html';\r\n\r\n    }).catch(err=>{\r\n        console.log(err.response);\r\n    })\r\n\r\n    \r\n\r\n   \r\n\r\n})\r\n}\r\n\r\n\r\n","//  Unix时间戳转换为当前时间多久之前\r\n//  @param timespan  int         Unix时间戳\r\n//  @return timeSpanStr  string      转换之后的前台需要的字符串\r\n//  https://beltxman.com/1576.html\r\n\r\n// console.log(Ftime (1670564031));\r\n\r\nfunction Ftime (timespan) {\r\n    var dateTime = new Date(timespan * 1000);\r\n    var year = dateTime.getFullYear();\r\n    var month = dateTime.getMonth() + 1;\r\n    var day = dateTime.getDate();\r\n    var hour = dateTime.getHours();\r\n    var minute = dateTime.getMinutes();\r\n    //当前时间\r\n    var now = Date.parse(new Date());  //typescript转换写法\r\n    var milliseconds = 0;\r\n    var timeSpanStr;\r\n    //计算时间差\r\n    milliseconds = (now / 1000) - timespan;\r\n\r\n    //一分钟以内\r\n    if (milliseconds <= 60) {\r\n        timeSpanStr = '剛剛';\r\n    }\r\n    //大于一分钟小于一小时\r\n    else if (60 < milliseconds && milliseconds <= 60 * 60) {\r\n        timeSpanStr = Math.ceil((milliseconds / (60))) + '分鐘前';\r\n    }\r\n    //大于一小时小于等于一天\r\n    else if (60 * 60 < milliseconds && milliseconds <= 60 * 60 * 24) {\r\n        timeSpanStr = Math.ceil(milliseconds / (60 * 60)) + '小時前';\r\n    }\r\n    //大于一天小于等于15天\r\n    else if (60 * 60 * 24 < milliseconds && milliseconds <= 60 * 60 * 24 * 30) {\r\n        timeSpanStr = Math.ceil(milliseconds / (60 * 60 * 24)) + '天前';\r\n    }\r\n    //大于一个月小于一年\r\n    else if (60 * 60 * 24 * 30 < milliseconds && milliseconds <= 60 * 60 * 24 * 30 * 12){\r\n        timeSpanStr = Math.ceil(milliseconds / (60 * 60 * 24 * 30)) + '個月前';\r\n    }\r\n    //超过一年显示\r\n    else {\r\n        timeSpanStr = year + '年' + month + '月' + day + '日 ' + hour + ':' + minute;   \r\n    }\r\n    return timeSpanStr;\r\n}"]}