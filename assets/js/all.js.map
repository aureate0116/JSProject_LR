{"version":3,"sources":["acc_account.js","acc_profile.js","all.js","config.js","index.js","layout.js","login.js","resource.js","resource_list.js","signup.js","timestamp.js"],"names":["url","userId","location","href","split","localStorageUserId","localStorage","getItem","localStorageToken","pageClassify","headers","Authorization","homePage","userData","initAccount","axios","get","then","res","data","renderUserAccount","err","console","log","response","userEmail","document","querySelector","userPW","leftMenu","value","email","leftMenuStr","innerHTML","initProfile","renderUserData","firstName","lastName","userTitle","userExp","profileImg","title","undefined","experiences","prefix","toUpperCase","profileImgStr","profileInputs","querySelectorAll","forEach","item","addEventListener","e","nextElementSibling","textContent","length","btnSaveProfile","patch","locationHref","resTopic","resId","initIndex","getResourcesForIndex","goodRate1","goodRate2","goodRate3","goodRate1Tab","goodRate2Tab","goodRate3Tab","resourceType1","resourceType2","resourceType3","resource1Tab","resource2Tab","resource3Tab","resourcesData","commentsData","renderGoodRateList","renderNewFreeList","error","getCommentForIndex","commentScoreNum","getAverageScore","resultScore","commentNum","starStr","combineCommentStar","itemNum1","itemNum2","itemNum3","renderMaxNum","tabJS","tabHtml","tabPython","topics","combineResouorceItemType1","setAttribute","imgUrl","id","tabOnline","tabOffline","tabArticle","price","type","combineResouorceItem","beforeLogin","afterLogin","accountMenuImg","accountMenu","logOut","renderAccountMenu","accountMenuImgStr","accountMenuStr","setItem","loginAccount","loginPw","btnLogin","initLogin","getUserList","usersData","userItem","preventDefault","post","accessToken","user","clear","initResourcePage","getResourcesForResources","getCommentData","getResourcesItem","getResourcesComment","renderRelatedResource","resourceContent","resourceCommentData","renderResource","renderComment","imageNBrief","titleBox","btnBox","renderItem","userName","role","imageNBriefStr","titleBoxStr","btnBoxStr","level","lang","intro","commentList","commentStr","btnReadMore","score","newResultScoreOjb","commentTimeAge","Ftime","commentTime","content","likeNum","dislikeNum","relatedResource","relatedStr","renderNum","resItem","initResourceList","bannerBlockTitle","foundation1Basic","foundation2Free","foundation3CN","thisTopicData","filter","renderFoundationRecommond","renderFilterResultList","basicStr","freeStr","cnStr","index","langItem","scoreTotal","resourceIdObj","resourceId","toFixed","newResultScore","resourceIdArr","Object","keys","scoreArr","values","i","resourceItem","filterItemInput","checkObj","renderList","filterKeyword","getAttribute","groupName","target","checked","push","hasType","hasLevel","hasPrice","checkLang","includes","some","str","renderfilterStr","combineResouorceItemType2","resultNumber","clearBtnText","clearFilter","clearFilterBtn","resourceSort","signUpForm","signupLastName","signupfirstName","signupMail","signupPw","signupPwConfirm","signUpFormInputs","btnSignUp","initSignup","constraints","lastname","presence","message","firstname","password","minimum","confirmpw","equality","attribute","errors","validate","alert","timespan","dateTime","Date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","now","parse","milliseconds","timeSpanStr","Math","ceil"],"mappings":";;AAAA,IAAMA,GAAG,GAAC,uBAAV;AACA,IAAIC,MAAM,GAAGC,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB,GAApB,EAAyB,CAAzB,CAAb;AACA,IAAIC,kBAAkB,GAAGC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAzB;AACA,IAAIC,iBAAiB,GAAGF,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAxB;AACA,IAAIE,YAAY,GAAGP,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB,GAApB,EAAyB,CAAzB,EAA4BA,KAA5B,CAAkC,OAAlC,EAA2C,CAA3C,CAAnB;AACA,IAAIM,OAAO,GAAG;AACVC,EAAAA,aAAa,mBAAYH,iBAAZ;AADH,CAAd;AAGA,IAAII,QAAQ,GAAGV,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB,GAApB,EAAyB,CAAzB,WAAiCF,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB,GAApB,EAAyB,CAAzB,CAAhD,C,CAEA;AACA;;AACA,IAAIS,QAAQ,GAAC,EAAb;;AACA,SAASC,WAAT,GAAsB;AAClB,MAAGT,kBAAkB,IAAIJ,MAAtB,IAAgCI,kBAAkB,KAAI,EAAzD,EAA4D;AACxDU,IAAAA,KAAK,CAACC,GAAN,WAAahB,GAAb,uBAA6BK,kBAA7B,GAAkDK,OAAlD,EACCO,IADD,CACM,UAAAC,GAAG,EAAE;AACPL,MAAAA,QAAQ,GAAGK,GAAG,CAACC,IAAf,CADO,CAEP;;AACAC,MAAAA,iBAAiB;AAEpB,KAND,WAMS,UAAAC,GAAG,EAAE;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,QAAhB;AACH,KARD;AASH,GAVD,MAUK;AACD,QAAItB,QAAQ,CAACC,IAAT,eAAqBS,QAArB,gBAAJ,EAA+C;AAC3C,UAAIH,YAAY,KAAG,UAAf,IAA6BA,YAAY,KAAG,eAA5C,IACDP,QAAQ,CAACC,IAAT,KAAgBS,QAAQ,GAAC,aADxB,IAEDV,QAAQ,CAACC,IAAT,KAAgBS,QAAQ,GAAC,cAFxB,IAGDV,QAAQ,CAACC,IAAT,KAAgBS,QAAQ,GAAC,mBAHxB,IAIDV,QAAQ,CAACC,IAAT,KAAgBS,QAAQ,GAAC,qBAJ5B,EAIkD;AAC9CV,QAAAA,QAAQ,CAACC,IAAT;AACH;AACJ;AACJ;AACJ;;AACDW,WAAW,G,CAGX;;AACA,IAAMW,SAAS,GAAGC,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAlB;AACA,IAAMC,MAAM,GAAGF,QAAQ,CAACC,aAAT,CAAuB,SAAvB,CAAf;AAEA,IAAME,QAAQ,GAAGH,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAjB;;AAGA,SAASP,iBAAT,GAA4B;AACxBK,EAAAA,SAAS,CAACK,KAAV,GAAkBjB,QAAQ,CAAC,CAAD,CAAR,CAAYkB,KAA9B;AAEA,MAAIC,WAAW,oMAEmF3B,kBAFnF,0KAKwDA,kBALxD,iMAAf;AAYAwB,EAAAA,QAAQ,CAACI,SAAT,GAAqBD,WAArB;AACH;;;AC9DD,IAAMhC,GAAG,GAAC,uBAAV;AACA,IAAIC,MAAM,GAAGC,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB,GAApB,EAAyB,CAAzB,CAAb;AACA,IAAIC,kBAAkB,GAAGC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAzB;AACA,IAAIC,iBAAiB,GAAGF,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAxB;AACA,IAAIE,YAAY,GAAGP,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB,GAApB,EAAyB,CAAzB,EAA4BA,KAA5B,CAAkC,OAAlC,EAA2C,CAA3C,CAAnB;AACA,IAAIM,OAAO,GAAG;AACVC,EAAAA,aAAa,mBAAYH,iBAAZ;AADH,CAAd;AAGA,IAAII,QAAQ,GAAGV,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB,GAApB,EAAyB,CAAzB,WAAiCF,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB,GAApB,EAAyB,CAAzB,CAAhD,C,CAEA;AACA;;AACA,IAAIS,QAAQ,GAAC,EAAb;;AACA,SAASqB,WAAT,GAAsB;AAClB,MAAG7B,kBAAkB,IAAIJ,MAAtB,IAAgCI,kBAAkB,KAAI,EAAzD,EAA4D;AACxDU,IAAAA,KAAK,CAACC,GAAN,WAAahB,GAAb,uBAA6BK,kBAA7B,GAAkDK,OAAlD,EACCO,IADD,CACM,UAAAC,GAAG,EAAE;AACPL,MAAAA,QAAQ,GAAGK,GAAG,CAACC,IAAf,CADO,CAEP;;AACAgB,MAAAA,cAAc;AAEjB,KAND,WAMS,UAAAd,GAAG,EAAE;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,QAAhB;AACH,KARD;AASH,GAVD,MAUK;AACD,QAAItB,QAAQ,CAACC,IAAT,eAAqBS,QAArB,gBAAJ,EAA+C;AAC3C,UAAIH,YAAY,KAAG,UAAf,IAA6BA,YAAY,KAAG,eAA5C,IACDP,QAAQ,CAACC,IAAT,KAAgBS,QAAQ,GAAC,aADxB,IAEDV,QAAQ,CAACC,IAAT,KAAgBS,QAAQ,GAAC,cAFxB,IAGDV,QAAQ,CAACC,IAAT,KAAgBS,QAAQ,GAAC,mBAHxB,IAIDV,QAAQ,CAACC,IAAT,KAAgBS,QAAQ,GAAC,qBAJ5B,EAIkD;AAC9CV,QAAAA,QAAQ,CAACC,IAAT;AACH;AACJ;AACJ;AACJ;;AACD+B,WAAW,G,CAGX;;AAEA,IAAME,SAAS,GAAGV,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAlB;AACA,IAAMU,QAAQ,GAAGX,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAjB;AACA,IAAMW,SAAS,GAAGZ,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAlB;AACA,IAAMY,OAAO,GAAGb,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAhB,C,CACA;;AACA,IAAMa,UAAU,GAAGd,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAnB,C,CAEA;;AACA,IAAME,QAAQ,GAAGH,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAjB;;AAEA,SAASQ,cAAT,GAA0B;AACtBC,EAAAA,SAAS,CAACN,KAAV,GAAkBjB,QAAQ,CAAC,CAAD,CAAR,CAAYuB,SAA9B;AACAC,EAAAA,QAAQ,CAACP,KAAT,GAAiBjB,QAAQ,CAAC,CAAD,CAAR,CAAYwB,QAA7B;;AAEA,MAAGxB,QAAQ,CAAC,CAAD,CAAR,CAAY4B,KAAZ,IAAmBC,SAAtB,EAAgC;AAC5BJ,IAAAA,SAAS,CAACR,KAAV,GAAkBjB,QAAQ,CAAC,CAAD,CAAR,CAAY4B,KAA9B;AACH;;AACD,MAAG5B,QAAQ,CAAC,CAAD,CAAR,CAAY8B,WAAZ,IAAyBD,SAA5B,EAAsC;AAClCH,IAAAA,OAAO,CAACT,KAAR,GAAgBjB,QAAQ,CAAC,CAAD,CAAR,CAAY8B,WAA5B;AACH,GATqB,CAUtB;AACA;AACA;AAEA;;;AACA,MAAIC,MAAM,GAAI/B,QAAQ,CAAC,CAAD,CAAR,CAAYuB,SAAb,CAAwB,CAAxB,EAA2BS,WAA3B,EAAb;AAEA,MAAIC,aAAa,4HACwFF,MADxF,YAAjB;AAEAJ,EAAAA,UAAU,CAACP,SAAX,GAAuBa,aAAvB;AAGA,MAAId,WAAW,oMAEmF3B,kBAFnF,0KAKwDA,kBALxD,iMAAf;AAYAwB,EAAAA,QAAQ,CAACI,SAAT,GAAqBD,WAArB;AAEH,C,CAED;;;AACA,IAAMe,aAAa,GAAGrB,QAAQ,CAACsB,gBAAT,CAA0B,eAA1B,CAAtB;;AACA,IAAGD,aAAa,KAAG,IAAnB,EAAwB;AACpBA,EAAAA,aAAa,CAACE,OAAd,CAAsB,UAAAC,IAAI,EAAE;AACxBA,IAAAA,IAAI,CAACC,gBAAL,CAAsB,QAAtB,EAA+B,UAAAC,CAAC,EAAE;AAC9BF,MAAAA,IAAI,CAACG,kBAAL,CAAwBC,WAAxB,GAAsC,EAAtC;;AACA,UAAGlB,SAAS,CAACN,KAAV,IAAkB,EAArB,EAAwB;AACpBJ,QAAAA,QAAQ,CAACC,aAAT,CAAuB,YAAvB,EAAqC2B,WAArC,GAAmD,MAAnD;AACH;;AACD,UAAGjB,QAAQ,CAACP,KAAT,IAAgB,EAAnB,EAAsB;AAClBJ,QAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoC2B,WAApC,GAAkD,MAAlD;AACH;;AACD,UAAGhB,SAAS,CAACR,KAAV,CAAgByB,MAAhB,GAAyB,EAA5B,EAA+B;AAC3B7B,QAAAA,QAAQ,CAACC,aAAT,CAAuB,YAAvB,EAAqC2B,WAArC,GAAmD,SAAnD;AACH,OAV6B,CAW9B;AAEA;;AACH,KAdD;AAeH,GAhBD;AAiBH,C,CAID;AAEA;;;AACA,IAAME,cAAc,GAAC9B,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAArB;;AACA,IAAG6B,cAAc,KAAG,IAApB,EAAyB;AACrBA,EAAAA,cAAc,CAACL,gBAAf,CAAgC,OAAhC,EAAwC,UAAAC,CAAC,EAAE;AACvC,QAAGhB,SAAS,CAACN,KAAV,KAAmB,EAAnB,IAAyBO,QAAQ,CAACP,KAAT,KAAiB,EAA1C,IAAgDQ,SAAS,CAACR,KAAV,CAAgByB,MAAhB,GAAyB,EAA5E,EAA+E;AAE3ExC,MAAAA,KAAK,CAAC0C,KAAN,WAAezD,GAAf,oBAA4BK,kBAA5B,GAAiD;AAC7C,oBAAagC,QAAQ,CAACP,KADuB;AAE7C,qBAAcM,SAAS,CAACN,KAFqB;AAG7C,iBAAUQ,SAAS,CAACR,KAHyB;AAI7C,uBAAgBS,OAAO,CAACT;AAJqB,OAAjD,EAMCb,IAND,CAMM,UAAAC,GAAG,EAAE,CACP;AACH,OARD,WAQS,UAAAG,GAAG,EAAE;AACVC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,QAAhB;AACH,OAVD;AAYH;AACJ,GAhBD;AAiBH;ACvID;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;;;;ACpCA,IAAMxB,GAAG,GAAC,uBAAV,C,CACA;AACA;AACA;AACA;AACA;;;ACLA,IAAI0D,YAAY,GAAGxD,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB,GAApB,CAAnB;AACA,IAAIuD,QAAQ,GAAGzD,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB,GAApB,EAAyB,CAAzB,CAAf;AACA,IAAIwD,KAAK,GAAG1D,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB,GAApB,EAAyB,CAAzB,CAAZ;AACA,IAAIH,MAAM,GAAGC,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB,GAApB,EAAyB,CAAzB,CAAb;AACA,IAAIC,kBAAkB,GAAGC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAzB;AACA,IAAIE,YAAY,GAAGiD,YAAY,CAAC,CAAD,CAAZ,CAAgBtD,KAAhB,CAAsB,OAAtB,EAA+B,CAA/B,CAAnB;AACA,IAAIQ,QAAQ,GAAG8C,YAAY,CAAC,CAAD,CAAZ,UAAqBA,YAAY,CAAC,CAAD,CAAhD,C,CAEA;AACA;AACA;AACA;AAEA;;AACA,SAASG,SAAT,GAAoB;AAChBC,EAAAA,oBAAoB;;AACpB,MAAGrD,YAAY,IAAE,UAAjB,EAA4B;AACxB,QAAGmD,KAAK,IAAIlB,SAAZ,EAAsB;AAClBxC,MAAAA,QAAQ,CAACC,IAAT;AACH;AACJ,GAJD,MAKK,IAAGM,YAAY,IAAE,eAAjB,EAAiC;AAClC,QAAGkD,QAAQ,IAAIjB,SAAf,EAAyB;AACrBxC,MAAAA,QAAQ,CAACC,IAAT;AACH;AACJ;AAEJ;;AACD0D,SAAS,G,CAET;;AACA,IAAME,SAAS,GAAGrC,QAAQ,CAACC,aAAT,CAAuB,sBAAvB,CAAlB;AACA,IAAMqC,SAAS,GAAGtC,QAAQ,CAACC,aAAT,CAAuB,sBAAvB,CAAlB;AACA,IAAMsC,SAAS,GAAGvC,QAAQ,CAACC,aAAT,CAAuB,sBAAvB,CAAlB;AACA,IAAMuC,YAAY,GAAGxC,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,CAArB;AACA,IAAMwC,YAAY,GAAGzC,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,CAArB;AACA,IAAMyC,YAAY,GAAG1C,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,CAArB,C,CAEA;;AACA,IAAM0C,aAAa,GAAG3C,QAAQ,CAACC,aAAT,CAAuB,0BAAvB,CAAtB;AACA,IAAM2C,aAAa,GAAG5C,QAAQ,CAACC,aAAT,CAAuB,0BAAvB,CAAtB;AACA,IAAM4C,aAAa,GAAG7C,QAAQ,CAACC,aAAT,CAAuB,0BAAvB,CAAtB;AACA,IAAM6C,YAAY,GAAG9C,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,CAArB;AACA,IAAM8C,YAAY,GAAG/C,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,CAArB;AACA,IAAM+C,YAAY,GAAGhD,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,CAArB;AAGA,IAAIgD,aAAa,GAAG,EAApB;AACA,IAAIC,YAAY,GAAG,EAAnB,C,CAEA;;AACA,SAASd,oBAAT,GAA+B;AAC7B/C,EAAAA,KAAK,CAACC,GAAN,WAAahB,GAAb,iBACCiB,IADD,CACM,UAAAC,GAAG,EAAE;AACTyD,IAAAA,aAAa,GAAGzD,GAAG,CAACC,IAApB;AACA0D,IAAAA,kBAAkB;AAClBC,IAAAA,iBAAiB;AAElB,GAND,WAMS,UAAAC,KAAK,EAAE;AACdzD,IAAAA,OAAO,CAACC,GAAR,CAAYwD,KAAZ;AACD,GARD;AASD;;AAED,SAASC,kBAAT,GAA6B;AACzBjE,EAAAA,KAAK,CAACC,GAAN,WAAahB,GAAb,gBACCiB,IADD,CACM,UAAAC,GAAG,EAAE;AACT0D,IAAAA,YAAY,GAAG1D,GAAG,CAACC,IAAnB;AAED,GAJD,WAIS,UAAA4D,KAAK,EAAE;AACdzD,IAAAA,OAAO,CAACC,GAAR,CAAYwD,KAAZ;AACD,GAND;AAOH,C,CAED;;;AACA,SAASF,kBAAT,GAA6B;AACzB,MAAII,eAAe,GAAGC,eAAe,EAArC;AACA,MAAIC,WAAW,GAAGF,eAAe,CAAC,CAAD,CAAjC;AACA,MAAIG,UAAU,GAAGH,eAAe,CAAC,CAAD,CAAhC;AACA,MAAII,OAAO,GAAGC,kBAAkB,CAACH,WAAD,CAAhC;AAEA,MAAII,QAAQ,GAAG,CAAf;AACA,MAAIC,QAAQ,GAAG,CAAf;AACA,MAAIC,QAAQ,GAAG,CAAf;AACA,MAAIC,YAAY,GAAG,CAAnB;AACA,MAAIC,KAAK,GAAE,EAAX;AACA,MAAIC,OAAO,GAAC,EAAZ;AACA,MAAIC,SAAS,GAAC,EAAd;AAEAlB,EAAAA,aAAa,CAAC1B,OAAd,CAAuB,UAACC,IAAD,EAAQ;AAC3B;AACA;AACA,YAAQA,IAAI,CAAC4C,MAAb;AACI,WAAK,YAAL;AACI,YAAGP,QAAQ,GAAEG,YAAb,EAA0B;AACtBC,UAAAA,KAAK,IAAII,yBAAyB,CAAC7C,IAAD,EAAMiC,WAAN,EAAkBE,OAAlB,EAA0BD,UAA1B,CAAlC;AACDG,UAAAA,QAAQ,IAAG,CAAX;AACF;;AACD;;AAEJ,WAAK,UAAL;AACI,YAAGC,QAAQ,GAAGE,YAAd,EAA2B;AACvBE,UAAAA,OAAO,IAAIG,yBAAyB,CAAC7C,IAAD,EAAMiC,WAAN,EAAkBE,OAAlB,EAA0BD,UAA1B,CAApC;AACAI,UAAAA,QAAQ,IAAE,CAAV;AACH;;AACD;;AAEJ,WAAK,QAAL;AACI,YAAGC,QAAQ,GAAGC,YAAd,EAA2B;AACtBG,UAAAA,SAAS,IAAIE,yBAAyB,CAAC7C,IAAD,EAAMiC,WAAN,EAAkBE,OAAlB,EAA0BD,UAA1B,CAAtC;AACLK,UAAAA,QAAQ,IAAE,CAAV;AACC;;AAED;AArBR;AAuBH,GA1BD;;AA4BA,MAAG1B,SAAS,KAAI,IAAhB,EAAsB;AAClB,QAAG4B,KAAK,IAAE,EAAV,EAAa;AACTzB,MAAAA,YAAY,CAAC8B,YAAb,CAA0B,OAA1B,EAAmC,QAAnC;AACH;;AACDjC,IAAAA,SAAS,CAAC9B,SAAV,GAAsB0D,KAAtB;AACH;;AACD,MAAG3B,SAAS,KAAI,IAAhB,EAAsB;AAClB,QAAG4B,OAAO,IAAE,EAAZ,EAAe;AACXzB,MAAAA,YAAY,CAAC6B,YAAb,CAA0B,OAA1B,EAAmC,QAAnC;AACH;;AACDhC,IAAAA,SAAS,CAAC/B,SAAV,GAAsB2D,OAAtB;AACH;;AACD,MAAG3B,SAAS,KAAI,IAAhB,EAAsB;AAClB,QAAG4B,SAAS,IAAE,EAAd,EAAiB;AACbzB,MAAAA,YAAY,CAAC4B,YAAb,CAA0B,OAA1B,EAAmC,QAAnC;AACH;;AACD/B,IAAAA,SAAS,CAAChC,SAAV,GAAsB4D,SAAtB;AACH;AAEJ,C,CAGD;;;AACA,SAASE,yBAAT,CAAmC7C,IAAnC,EAAwCiC,WAAxC,EAAoDE,OAApD,EAA4DD,UAA5D,EAAuE;AAErE,MAAIlC,IAAI,CAAC+C,MAAL,KAAe,EAAnB,EAAsB;AACpB/C,IAAAA,IAAI,CAAC+C,MAAL,GAAc,gDAAd;AACD;;AAED,MAAGd,WAAW,CAACjC,IAAI,CAACgD,EAAN,CAAX,KAAuBxD,SAAvB,IAAoC2C,OAAO,CAACnC,IAAI,CAACgD,EAAN,CAAP,KAAoBxD,SAAxD,IAAqE0C,UAAU,CAAClC,IAAI,CAACgD,EAAN,CAAV,KAAuBxD,SAA/F,EAA0G;AAExG,4MAIyDQ,IAAI,CAACgD,EAJ9D,6CAI+FhD,IAAI,CAAC+C,MAJpG,sBAIoH/C,IAAI,CAACT,KAJzH,qNAO+DS,IAAI,CAACgD,EAPpE,mCAO4FhD,IAAI,CAACT,KAPjG;AAmBD,GArBD,MAqBK;AACH,4MAIyDS,IAAI,CAACgD,EAJ9D,6CAI+FhD,IAAI,CAAC+C,MAJpG,sBAIoH/C,IAAI,CAACT,KAJzH,yMAO+DS,IAAI,CAACgD,EAPpE,mCAO4FhD,IAAI,CAACT,KAPjG,6JAS8C0C,WAAW,CAACjC,IAAI,CAACgD,EAAN,CATzD,6GAWkBb,OAAO,CAACnC,IAAI,CAACgD,EAAN,CAXzB,oHAasCd,UAAU,CAAClC,IAAI,CAACgD,EAAN,CAbhD;AAoBD;AAEF,C,CAED;;;AACA,SAASpB,iBAAT,GAA4B;AACxB,MAAIG,eAAe,GAAGC,eAAe,EAArC;AACA,MAAIC,WAAW,GAAGF,eAAe,CAAC,CAAD,CAAjC;AACA,MAAIG,UAAU,GAAGH,eAAe,CAAC,CAAD,CAAhC;AACA,MAAII,OAAO,GAAGC,kBAAkB,CAACH,WAAD,CAAhC;AAEA,MAAIgB,SAAS,GAAE,EAAf;AACA,MAAIC,UAAU,GAAC,EAAf;AACA,MAAIC,UAAU,GAAC,EAAf;AAEA1B,EAAAA,aAAa,CAAC1B,OAAd,CAAuB,UAACC,IAAD,EAAQ;AAC3B,QAAGA,IAAI,CAACoD,KAAL,KAAa,IAAhB,EAAqB;AACjB,UAAGpD,IAAI,CAACqD,IAAL,KAAY,MAAf,EAAsB;AAClBJ,QAAAA,SAAS,IAAIK,oBAAoB,CAACtD,IAAD,EAAMiC,WAAN,EAAkBE,OAAlB,EAA0BD,UAA1B,CAAjC;AACH;;AAED,UAAGlC,IAAI,CAACqD,IAAL,KAAY,MAAf,EAAsB;AAClBH,QAAAA,UAAU,IAAII,oBAAoB,CAACtD,IAAD,EAAMiC,WAAN,EAAkBE,OAAlB,EAA0BD,UAA1B,CAAlC;AACH;;AAED,UAAGlC,IAAI,CAACqD,IAAL,KAAY,IAAf,EAAoB;AAChBF,QAAAA,UAAU,IAAIG,oBAAoB,CAACtD,IAAD,EAAMiC,WAAN,EAAkBE,OAAlB,EAA0BD,UAA1B,CAAlC;AACH;AACJ;AAEJ,GAfD;;AAiBA,MAAGf,aAAa,KAAI,IAApB,EAA0B;AACtBA,IAAAA,aAAa,CAACpC,SAAd,GAA0BkE,SAA1B;;AACA,QAAGA,SAAS,IAAE,EAAd,EAAiB;AACb3B,MAAAA,YAAY,CAACwB,YAAb,CAA0B,OAA1B,EAAmC,QAAnC;AACH;AACJ;;AACD,MAAG1B,aAAa,KAAI,IAApB,EAA0B;AACtBA,IAAAA,aAAa,CAACrC,SAAd,GAA0BmE,UAA1B;;AACA,QAAGA,UAAU,IAAE,EAAf,EAAkB;AACd3B,MAAAA,YAAY,CAACuB,YAAb,CAA0B,OAA1B,EAAmC,QAAnC;AACH;AACJ;;AACD,MAAGzB,aAAa,KAAI,IAApB,EAA0B;AACtBA,IAAAA,aAAa,CAACtC,SAAd,GAA0BoE,UAA1B;;AACA,QAAGA,UAAU,IAAE,EAAf,EAAkB;AACd3B,MAAAA,YAAY,CAACsB,YAAb,CAA0B,OAA1B,EAAmC,QAAnC;AACH;AACJ;AAIJ;;;AChPD,IAAI3F,kBAAkB,GAAGC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAzB,C,CACA;;AAEA,IAAMkG,WAAW,GAAG/E,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAApB;AACA,IAAM+E,UAAU,GAAGhF,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAnB;AAEA,IAAMgF,cAAc,GAAGjF,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAAvB;AACA,IAAMiF,WAAW,GAAGlF,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAApB;AAEA,IAAMkF,MAAM,GAAGnF,QAAQ,CAACC,aAAT,CAAuB,SAAvB,CAAf,C,CAEA;;AACA,IAAGtB,kBAAkB,IAAI,IAAtB,IAA8BA,kBAAkB,IAAE,EAArD,EAAwD;AACpDqG,EAAAA,UAAU,CAACV,YAAX,CAAwB,OAAxB,EAAgC,QAAhC;AACH,CAFD,MAEK;AACD,MAAGS,WAAW,KAAG,IAAjB,EAAsB;AAClBA,IAAAA,WAAW,CAACT,YAAZ,CAAyB,OAAzB,EAAiC,QAAjC;AACH,GAHA,CAKD;;;AACA,MAAInF,QAAQ,GAAC,EAAb;AAEAE,EAAAA,KAAK,CAACC,GAAN,WAAahB,GAAb,uBAA6BK,kBAA7B,GAAmDY,IAAnD,CAAwD,UAAAC,GAAG,EAAE;AACzDL,IAAAA,QAAQ,GAACK,GAAG,CAACC,IAAb;AACA2F,IAAAA,iBAAiB,CAACjG,QAAD,CAAjB;AAEH,GAJD,WAIS,UAAAQ,GAAG,EAAE;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,QAAhB;AACH,GAND;AAOH,C,CAGD;AACA;;;AACA,SAASsF,iBAAT,CAA2BjG,QAA3B,EAAoC;AAChC,MAAI+B,MAAM,GAAI/B,QAAQ,CAAC,CAAD,CAAR,CAAYuB,SAAb,CAAwB,CAAxB,EAA2BS,WAA3B,EAAb;AAEA,MAAIkE,iBAAiB,uIAC+FnE,MAD/F,YAArB;AAEA,MAAIoE,cAAc,6EAAiE3G,kBAAjE,yHAC+CA,kBAD/C,gRAAlB;AAMAsG,EAAAA,cAAc,CAAC1E,SAAf,GAAyB8E,iBAAzB;AACAH,EAAAA,WAAW,CAAC3E,SAAZ,GAAsB+E,cAAtB;AACH,C,CAGD;;;AACAH,MAAM,CAAC1D,gBAAP,CAAwB,OAAxB,EAAgC,UAAAC,CAAC,EAAE;AAC/B9C,EAAAA,YAAY,CAAC2G,OAAb,CAAqB,aAArB,EAAoC,EAApC;AACA3G,EAAAA,YAAY,CAAC2G,OAAb,CAAqB,QAArB,EAA8B,EAA9B;AACAR,EAAAA,WAAW,CAACT,YAAZ,CAAyB,OAAzB,EAAiC,SAAjC;AACAU,EAAAA,UAAU,CAACV,YAAX,CAAwB,OAAxB,EAAgC,QAAhC;AACA9F,EAAAA,QAAQ,CAACC,IAAT,GAAgB,cAAhB;AACH,CAND;;;AClDA,IAAM+G,YAAY,GAAGxF,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAArB;AACA,IAAMwF,OAAO,GAAGzF,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAhB;AACA,IAAMyF,QAAQ,GAAG1F,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAjB,C,CACA;;AAGA,SAAS0F,SAAT,GAAoB;AAChBC,EAAAA,WAAW;AACd;;AACDD,SAAS,G,CAGT;;AACA,IAAIE,SAAS,GAAG,EAAhB;;AACA,SAASD,WAAT,GAAsB;AAClBvG,EAAAA,KAAK,CAACC,GAAN,CAAU,6BAAV,EAAyCC,IAAzC,CAA8C,UAAAC,GAAG,EAAE;AAC/CqG,IAAAA,SAAS,GAAGrG,GAAG,CAACC,IAAhB;AACH,GAFD,WAES,UAAAE,GAAG,EAAE;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,QAAhB;AACH,GAJD;AAKH,C,CAED;;;AACA,IAAGE,QAAQ,CAACC,aAAT,CAAuB,eAAvB,MAA0C,IAA7C,EAAkD;AAC9CD,EAAAA,QAAQ,CAACC,aAAT,CAAuB,eAAvB,EAAwCwB,gBAAxC,CAAyD,QAAzD,EAAkE,UAAAC,CAAC,EAAE;AACrE,QAAG8D,YAAY,CAACpF,KAAb,IAAoB,EAAvB,EAA0B;AACtBJ,MAAAA,QAAQ,CAACC,aAAT,CAAuB,UAAvB,EAAmC2B,WAAnC,GAA+C,OAA/C;AACH,KAFD,MAEK;AACD5B,MAAAA,QAAQ,CAACC,aAAT,CAAuB,UAAvB,EAAmC2B,WAAnC,GAA+C,EAA/C;AACH;;AACDiE,IAAAA,SAAS,CAACtE,OAAV,CAAkB,UAAAuE,QAAQ,EAAE;AACxB,UAAGA,QAAQ,CAACzF,KAAT,KAAkBmF,YAAY,CAACpF,KAAlC,EAAwC;AACpCJ,QAAAA,QAAQ,CAACC,aAAT,CAAuB,UAAvB,EAAmC2B,WAAnC,GAA+C,QAA/C;AACH,OAFD,MAEK;AACD5B,QAAAA,QAAQ,CAACC,aAAT,CAAuB,UAAvB,EAAmC2B,WAAnC,GAA+C,EAA/C;AACH;AACJ,KAND;AAOH,GAbG;AAcH;;AAED,IAAG5B,QAAQ,CAACC,aAAT,CAAuB,UAAvB,MAAqC,IAAxC,EAA6C;AACzCD,EAAAA,QAAQ,CAACC,aAAT,CAAuB,UAAvB,EAAmCwB,gBAAnC,CAAoD,QAApD,EAA6D,UAAAC,CAAC,EAAE;AAC5D,QAAG+D,OAAO,CAACrF,KAAR,IAAe,EAAlB,EAAqB;AACjBJ,MAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoC2B,WAApC,GAAgD,OAAhD;AACH,KAFD,MAEK;AACD5B,MAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoC2B,WAApC,GAAgD,EAAhD;AACH;AACJ,GAND;AAOH;;AAED,IAAG8D,QAAQ,KAAG,IAAd,EAAmB;AAEfA,EAAAA,QAAQ,CAACjE,gBAAT,CAA0B,OAA1B,EAAkC,UAAAC,CAAC,EAAE;AACrCA,IAAAA,CAAC,CAACqE,cAAF;;AAEI,QAAGP,YAAY,CAACpF,KAAb,KAAqB,EAArB,IAAyBqF,OAAO,CAACrF,KAAR,KAAgB,EAA5C,EAA+C;AAC3C;AACH;;AAED,QAAGJ,QAAQ,CAACC,aAAT,CAAuB,UAAvB,EAAmC2B,WAAnC,IAAgD,EAAhD,IACH5B,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoC2B,WAApC,IAAiD,EADjD,EACqD;AAEjDvC,MAAAA,KAAK,CAAC2G,IAAN,CAAW,6BAAX,EAAyC;AACrC,iBAAQR,YAAY,CAACpF,KADgB;AAErC,oBAAWqF,OAAO,CAACrF;AAFkB,OAAzC,EAIGb,IAJH,CAIQ,UAAAC,GAAG,EAAE;AACTZ,QAAAA,YAAY,CAAC2G,OAAb,CAAqB,aAArB,aAAwC/F,GAAG,CAACC,IAAJ,CAASwG,WAAjD;AACArH,QAAAA,YAAY,CAAC2G,OAAb,CAAqB,QAArB,EAA+B/F,GAAG,CAACC,IAAJ,CAASyG,IAAT,CAAc1B,EAA7C;AACAhG,QAAAA,QAAQ,CAACC,IAAT,GAAgB,cAAhB;AAEH,OATD,WASS,UAAAkB,GAAG,EAAE;AACVK,QAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoC2B,WAApC,GAAgD,MAAhD;AACAhD,QAAAA,YAAY,CAACuH,KAAb;AACH,OAZD;AAcH;AAGR,GA3BG;AA4BH;;;ACjFD,IAAIjE,KAAK,GAAG1D,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB,GAApB,EAAyB,CAAzB,CAAZ;;AAEA,SAAS0H,gBAAT,GAA2B;AACvBC,EAAAA,wBAAwB;AACxBC,EAAAA,cAAc;AACdC,EAAAA,gBAAgB,CAACrE,KAAD,CAAhB;AACAsE,EAAAA,mBAAmB,CAACtE,KAAD,CAAnB;AACH;;AACDkE,gBAAgB;AAEhB,IAAInD,aAAa,GAAG,EAApB;AACA,IAAIC,YAAY,GAAG,EAAnB,C,CAEA;;AACA,SAASmD,wBAAT,GAAmC;AACjChH,EAAAA,KAAK,CAACC,GAAN,WAAahB,GAAb,iBACCiB,IADD,CACM,UAAAC,GAAG,EAAE;AACTyD,IAAAA,aAAa,GAAGzD,GAAG,CAACC,IAApB,CADS,CAET;;AACAgH,IAAAA,qBAAqB;AAEtB,GAND,WAMS,UAAApD,KAAK,EAAE;AACdzD,IAAAA,OAAO,CAACC,GAAR,CAAYwD,KAAZ;AACD,GARD;AASD;;AAED,SAASiD,cAAT,GAAyB;AACvBjH,EAAAA,KAAK,CAACC,GAAN,WAAahB,GAAb,gBACCiB,IADD,CACM,UAAAC,GAAG,EAAE;AACT0D,IAAAA,YAAY,GAAG1D,GAAG,CAACC,IAAnB;AACAgH,IAAAA,qBAAqB;AACtB,GAJD,WAIS,UAAApD,KAAK,EAAE;AACdzD,IAAAA,OAAO,CAACC,GAAR,CAAYwD,KAAZ;AACD,GAND;AAOD;;AAGD,IAAIqD,eAAe,GAAC,EAApB;AACA,IAAIC,mBAAmB,GAAC,EAAxB;;AAEA,SAASJ,gBAAT,CAA0B/B,EAA1B,EAA6B;AACzBnF,EAAAA,KAAK,CAACC,GAAN,WAAahB,GAAb,2BAAiCkG,EAAjC,oBACCjF,IADD,CACM,UAAAC,GAAG,EAAE;AACPkH,IAAAA,eAAe,GAAGlH,GAAG,CAACC,IAAtB;AACAmH,IAAAA,cAAc;AACdH,IAAAA,qBAAqB;AAExB,GAND,WAMS,UAAApD,KAAK,EAAE;AACdzD,IAAAA,OAAO,CAACC,GAAR,CAAYwD,KAAZ;AACD,GARD;AASH;;AAED,SAASmD,mBAAT,CAA6BhC,EAA7B,EAAgC;AAC5BnF,EAAAA,KAAK,CAACC,GAAN,WAAahB,GAAb,qDAA2DkG,EAA3D,qBACCjF,IADD,CACM,UAAAC,GAAG,EAAE;AACPmH,IAAAA,mBAAmB,GAAGnH,GAAG,CAACC,IAA1B;AACAmH,IAAAA,cAAc;AACdC,IAAAA,aAAa;AAEhB,GAND,WAMS,UAAAxD,KAAK,EAAE;AACdzD,IAAAA,OAAO,CAACC,GAAR,CAAYwD,KAAZ;AACD,GARD;AASH;AAED;;;AAEA,IAAMyD,WAAW,GAAG9G,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAApB;AACA,IAAM8G,QAAQ,GAAG/G,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAjB;AACA,IAAM+G,MAAM,GAAGhH,QAAQ,CAACC,aAAT,CAAuB,SAAvB,CAAf;;AAGA,SAAS2G,cAAT,GAAyB;AACrB,MAAIK,UAAU,GAACP,eAAe,CAAC,CAAD,CAA9B;AACA,MAAIQ,QAAQ,GAAE,EAAd;;AAEA,MAAGD,UAAU,KAAGjG,SAAhB,EAA0B;AACtB,QAAIiG,UAAU,CAACf,IAAX,CAAgBiB,IAAhB,KAAuB,OAA3B,EAAmC;AAC/BD,MAAAA,QAAQ,GAAG,OAAX;AACH,KAFD,MAEK;AACDA,MAAAA,QAAQ,aAAKD,UAAU,CAACf,IAAX,CAAgBvF,QAArB,cAAiCsG,UAAU,CAACf,IAAX,CAAgBxF,SAAjD,MAAR;AACH;;AAED,QAAI6C,eAAe,GAAGC,eAAe,EAArC;AACA,QAAIC,WAAW,GAAGF,eAAe,CAAC,CAAD,CAAjC;AACA,QAAIG,UAAU,GAAGH,eAAe,CAAC,CAAD,CAAhC;AACA,QAAII,OAAO,GAAGC,kBAAkB,CAACH,WAAD,CAAhC;AAEA,QAAI2D,cAAc,GAAC,EAAnB;AACA,QAAIC,WAAW,GAAC,EAAhB;AACA,QAAIC,SAAS,GAAC,EAAd;;AAEA,QAAIL,UAAU,CAAC1C,MAAX,KAAqB,EAAzB,EAA4B;AACxB0C,MAAAA,UAAU,CAAC1C,MAAX,GAAoB,gDAApB;AACH;;AAED,QAAGd,WAAW,CAACvB,KAAD,CAAX,KAAqBlB,SAArB,IAAkC2C,OAAO,CAACzB,KAAD,CAAP,KAAkBlB,SAAvD,EAAkE;AAC9DqG,MAAAA,WAAW,qDAA4CJ,UAAU,CAAClG,KAAvD,0UAMkBkG,UAAU,CAAC7C,MAN7B,6DAOkB6C,UAAU,CAACpC,IAP7B,6DAQkBoC,UAAU,CAACM,KAR7B,6DASkBN,UAAU,CAACrC,KAT7B,0GAYkBqC,UAAU,CAACO,IAZ7B,iFAasBN,QAbtB,sDAAX;AAgBH,KAjBD,MAiBK;AACDG,MAAAA,WAAW,qDAA4CJ,UAAU,CAAClG,KAAvD,0JAE+B0C,WAAW,CAACvB,KAAD,CAF1C,6GAILyB,OAAO,CAACzB,KAAD,CAJF,4GAMewB,UAAU,CAACxB,KAAD,CANzB,uKAUkB+E,UAAU,CAAC7C,MAV7B,6DAWkB6C,UAAU,CAACpC,IAX7B,6DAYkBoC,UAAU,CAACM,KAZ7B,6DAakBN,UAAU,CAACrC,KAb7B,0GAgBkBqC,UAAU,CAACO,IAhB7B,iFAiBsBN,QAjBtB,sDAAX;AAoBH;;AAGDI,IAAAA,SAAS,iCACEL,UAAU,CAAC3I,GADb,w3BAAT;AAgBA8I,IAAAA,cAAc,8DACwBH,UAAU,CAAC1C,MADnC,sBACmD0C,UAAU,CAAClG,KAD9D,uEAE+BkG,UAAU,CAACQ,KAF1C,WAAd;;AAKA,QAAGX,WAAW,KAAG,IAAjB,EAAsB;AAClBA,MAAAA,WAAW,CAACvG,SAAZ,GAAwB6G,cAAxB;AACH;;AACD,QAAGL,QAAQ,KAAG,IAAd,EAAmB;AACfA,MAAAA,QAAQ,CAACxG,SAAT,GAAqB8G,WAArB;AACH;;AACD,QAAGL,MAAM,KAAG,IAAZ,EAAiB;AACbA,MAAAA,MAAM,CAACzG,SAAP,GAAmB+G,SAAnB;AACH;AAEJ;AAEJ;AAGD;;;AAEA,IAAMI,WAAW,GAAC1H,QAAQ,CAACC,aAAT,CAAuB,iCAAvB,CAAlB;;AAGA,SAAS4G,aAAT,GAAwB;AAEpB,MAAIc,UAAU,GAAC,EAAf;AACA,MAAIT,QAAQ,GAAE,EAAd,CAHoB,CAIpB;;AAEA,MAAGP,mBAAmB,CAAC9E,MAApB,KAA6B,CAAhC,EAAkC;AAC9B,QAAM+F,WAAW,GAAG5H,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAApB;;AACA,QAAG2H,WAAW,KAAG,IAAjB,EAAsB;AAClBA,MAAAA,WAAW,CAACtD,YAAZ,CAAyB,OAAzB,EAAiC,QAAjC;AACH;AACJ,GAXmB,CAYpB;;;AACA,MAAIZ,UAAU,GAAG,CAAjB;AACAiD,EAAAA,mBAAmB,CAACpF,OAApB,CAA4B,UAAAC,IAAI,EAAE;AAC9B,QAAIiC,WAAW,GAAG;AACd,qBAAOjC,IAAI,CAACqG,KAAZ;AADc,KAAlB;AAGA,QAAIC,iBAAiB,GAAGlE,kBAAkB,CAACH,WAAD,CAA1C;;AAEA,QAAGjC,IAAI,CAAC0E,IAAL,CAAUiB,IAAV,KAAiB,OAApB,EAA4B;AACxBD,MAAAA,QAAQ,GAAG,OAAX;AACH,KAFD,MAEK;AACDA,MAAAA,QAAQ,aAAK1F,IAAI,CAAC0E,IAAL,CAAUvF,QAAf,cAA2Ba,IAAI,CAAC0E,IAAL,CAAUxF,SAArC,MAAR;AACH;;AAGD,QAAIqH,cAAc,GAAGC,KAAK,CAACxG,IAAI,CAACyG,WAAN,CAA1B;AACAN,IAAAA,UAAU,mmBAOYT,QAPZ,+EAQyC1F,IAAI,CAAC0E,IAAL,CAAUnF,KARnD,qSAcQ+G,iBAAiB,CAAC,CAAD,CAdzB,yLAkByCC,cAlBzC,wNAwBWvG,IAAI,CAAC0G,OAxBhB,ibAiC2B1G,IAAI,CAAC2G,OAjChC,+VAuC+B3G,IAAI,CAAC4G,UAvCpC,+WA8C4F1E,UAAU,GAAC,CA9CvG,0YAmDkHA,UAAU,GAAC,CAnD7H,kiDAAV;AA6EAA,IAAAA,UAAU,IAAG,CAAb;AAEH,GA7FD;;AA+FA,MAAGgE,WAAW,KAAG,IAAjB,EAAsB;AACjBA,IAAAA,WAAW,CAACnH,SAAZ,GAAwBoH,UAAxB;AACJ;AAGJ;AAED;;;AAEA,IAAMU,eAAe,GAAGrI,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAAxB;;AAEA,SAASwG,qBAAT,GAAgC;AAC5B,MAAI6B,UAAU,GAAC,EAAf;AACA,MAAIC,SAAS,GAAG,CAAhB;;AAEA,MAAGtF,aAAa,KAAGjC,SAAnB,EAA6B;AACzBiC,IAAAA,aAAa,CAAC1B,OAAd,CAAsB,UAAAiH,OAAO,EAAE;AAC/B,UAAI/E,WAAW,GAAGD,eAAe,EAAjC;AACA,UAAIsE,iBAAiB,GAAGlE,kBAAkB,CAACH,WAAD,CAA1C;;AACA,UAAGiD,eAAe,CAAC7E,MAAhB,KAAyB,CAA5B,EAA8B;AAC1B;AACA,YAAG2G,OAAO,CAACpE,MAAR,KAAmBsC,eAAe,CAAC,CAAD,CAAf,CAAmBtC,MAAtC,IACIoE,OAAO,CAAChE,EAAR,KAAekC,eAAe,CAAC,CAAD,CAAf,CAAmBlC,EADzC,EAC4C;AACxC+D,UAAAA,SAAS,IAAG,CAAZ;;AACA,cAAGA,SAAS,IAAG,CAAf,EAAkB;AACd,gBAAG9E,WAAW,CAAC+E,OAAO,CAAChE,EAAT,CAAX,IAAyBxD,SAAzB,IAAoC8G,iBAAiB,CAACU,OAAO,CAAChE,EAAT,CAAjB,IAA+BxD,SAAtE,EAAgF;AAC5EsH,cAAAA,UAAU,sIAEqCE,OAAO,CAAChE,EAF7C,mCAEqEgE,OAAO,CAACzH,KAF7E,sVAAV;AAQH,aATD,MASK;AACDuH,cAAAA,UAAU,sIAEqCE,OAAO,CAAChE,EAF7C,mCAEqEgE,OAAO,CAACzH,KAF7E,2MAI+B0C,WAAW,CAAC+E,OAAO,CAAChE,EAAT,CAJ1C,sIAMJsD,iBAAiB,CAACU,OAAO,CAAChE,EAAT,CANb,kKAAV;AAWH;AAGJ;AACJ;AACJ;AAGJ,KAtCG;AAuCH;;AAGD,MAAG6D,eAAe,KAAG,IAArB,EAA0B;AACtBA,IAAAA,eAAe,CAAC9H,SAAhB,GAA4B+H,UAA5B;AACH;AACJ;;;;;;;;;ACzVD;AACA,SAASG,gBAAT,GAA2B;AACzBpC,EAAAA,wBAAwB;AACxBC,EAAAA,cAAc,GAFW,CAGzB;AACD;;AACDmC,gBAAgB;AAGhB;;AAEA,IAAMC,gBAAgB,GAAG1I,QAAQ,CAACC,aAAT,CAAuB,mBAAvB,CAAzB;;AAEA,IAAGgC,QAAQ,KAAGjB,SAAX,IAAwB0H,gBAAgB,KAAG,IAA9C,EAAmD;AACjDA,EAAAA,gBAAgB,CAAC9G,WAAjB,GAA+BK,QAA/B;AAED;AAED;;;AAEA,IAAM0G,gBAAgB,GAAG3I,QAAQ,CAACC,aAAT,CAAuB,6BAAvB,CAAzB;AACA,IAAM2I,eAAe,GAAG5I,QAAQ,CAACC,aAAT,CAAuB,4BAAvB,CAAxB;AACA,IAAM4I,aAAa,GAAG7I,QAAQ,CAACC,aAAT,CAAuB,0BAAvB,CAAtB;AAEA,IAAIgD,aAAa,GAAG,EAApB;AACA,IAAIC,YAAY,GAAG,EAAnB;AACA,IAAI4F,aAAa,GAAG,EAApB,C,CAEA;;AACA,SAASzC,wBAAT,GAAmC;AACjChH,EAAAA,KAAK,CAACC,GAAN,WAAahB,GAAb,iBACCiB,IADD,CACM,UAAAC,GAAG,EAAE;AACT;AACA;AACAyD,IAAAA,aAAa,GAAGzD,GAAG,CAACC,IAAJ,CAASsJ,MAAT,CAAgB,UAAAvH,IAAI,EAAE;AACpC,aAAOA,IAAI,CAAC4C,MAAL,IAAenC,QAAtB;AACD,KAFe,CAAhB,CAHS,CAMT;AACA;AACA;AACA;;AACA+G,IAAAA,yBAAyB;AACzBC,IAAAA,sBAAsB;AAEvB,GAdD,WAcS,UAAA5F,KAAK,EAAE;AACdzD,IAAAA,OAAO,CAACC,GAAR,CAAYwD,KAAZ;AACD,GAhBD;AAiBD;;AAED,SAASiD,cAAT,GAAyB;AACvBjH,EAAAA,KAAK,CAACC,GAAN,WAAahB,GAAb,gBACCiB,IADD,CACM,UAAAC,GAAG,EAAE;AACT0D,IAAAA,YAAY,GAAG1D,GAAG,CAACC,IAAnB;AACD,GAHD,WAGS,UAAA4D,KAAK,EAAE;AACdzD,IAAAA,OAAO,CAACC,GAAR,CAAYwD,KAAZ;AACD,GALD;AAMD,C,CAGD;AACA;AACA;AACA;AACA;AAEA;;;AACA,SAAS2F,yBAAT,GAAoC;AAElC,MAAIzF,eAAe,GAAGC,eAAe,EAArC;AACA,MAAIC,WAAW,GAAGF,eAAe,CAAC,CAAD,CAAjC;AACA,MAAIG,UAAU,GAAGH,eAAe,CAAC,CAAD,CAAhC;AACA,MAAII,OAAO,GAAGC,kBAAkB,CAACH,WAAD,CAAhC,CALkC,CAKa;;AAE/C,MAAII,QAAQ,GAAG,CAAf;AACA,MAAIC,QAAQ,GAAG,CAAf;AACA,MAAIC,QAAQ,GAAG,CAAf;AACA,MAAIC,YAAY,GAAG,CAAnB,CAVkC,CAWlC;;AACA,MAAIkF,QAAQ,GAAE,EAAd;AACA,MAAIC,OAAO,GAAC,EAAZ;AACA,MAAIC,KAAK,GAAC,EAAV;AAEAnG,EAAAA,aAAa,CAAC1B,OAAd,CAAuB,UAACC,IAAD,EAAM6H,KAAN,EAAc;AAGjC,QAAG7H,IAAI,CAAC+F,KAAL,KAAe,IAAlB,EAAuB;AACrB,UAAG1D,QAAQ,GAAEG,YAAb,EAA0B;AACvBkF,QAAAA,QAAQ,IAAIpE,oBAAoB,CAACtD,IAAD,EAAMiC,WAAN,EAAkBE,OAAlB,EAA0BD,UAA1B,CAAhC;AACAG,QAAAA,QAAQ,IAAE,CAAV;AACF;AAEF;;AAED,QAAGrC,IAAI,CAACoD,KAAL,KAAe,IAAlB,EAAuB;AACrB,UAAGd,QAAQ,GAAEE,YAAb,EAA0B;AACxBmF,QAAAA,OAAO,IAAIrE,oBAAoB,CAACtD,IAAD,EAAMiC,WAAN,EAAkBE,OAAlB,EAA0BD,UAA1B,CAA/B;AACAI,QAAAA,QAAQ,IAAE,CAAV;AACD;AAEF;;AAEDtC,IAAAA,IAAI,CAACgG,IAAL,CAAUjG,OAAV,CAAkB,UAAA+H,QAAQ,EAAE;AAC1B,UAAGA,QAAQ,KAAK,MAAhB,EAAuB;AACrB,YAAGvF,QAAQ,GAAEC,YAAb,EAA0B;AACxBoF,UAAAA,KAAK,IAAItE,oBAAoB,CAACtD,IAAD,EAAMiC,WAAN,EAAkBE,OAAlB,EAA0BD,UAA1B,CAA7B;AACAK,UAAAA,QAAQ,IAAE,CAAV;AACD;AAEF;AACF,KARD;AAUH,GA7BD;;AA+BA,MAAG4E,gBAAgB,KAAG,IAAtB,EAA2B;AACzBA,IAAAA,gBAAgB,CAACpI,SAAjB,GAA6B2I,QAA7B;AACD;;AAED,MAAGN,eAAe,KAAG,IAArB,EAA0B;AACxBA,IAAAA,eAAe,CAACrI,SAAhB,GAA4B4I,OAA5B;AACD;;AAED,MAAGN,aAAa,KAAG,IAAnB,EAAwB;AACtBA,IAAAA,aAAa,CAACtI,SAAd,GAA0B6I,KAA1B;AACD;AACF;;AAGD,SAAS5F,eAAT,GAA0B;AAE1B,MAAI+F,UAAU,GAAG,EAAjB,CAF0B,CAEJ;;AACtB,MAAIC,aAAa,GAAG,EAApB,CAH0B,CAGF;;AACxB,MAAI/F,WAAW,GAAG,EAAlB,CAJ0B,CAIH;;AAErBP,EAAAA,YAAY,CAAC3B,OAAb,CAAqB,UAAAC,IAAI,EAAE;AACvB,QAAGgI,aAAa,CAAChI,IAAI,CAACiI,UAAN,CAAb,KAAmCzI,SAAtC,EAAgD;AAC5CwI,MAAAA,aAAa,CAAChI,IAAI,CAACiI,UAAN,CAAb,GAAiC,CAAjC;AACAF,MAAAA,UAAU,CAAC/H,IAAI,CAACiI,UAAN,CAAV,GAA8BjI,IAAI,CAACqG,KAAnC;AAEH,KAJD,MAIK;AACD2B,MAAAA,aAAa,CAAChI,IAAI,CAACiI,UAAN,CAAb,IAAiC,CAAjC;AACAF,MAAAA,UAAU,CAAC/H,IAAI,CAACiI,UAAN,CAAV,IAA+BjI,IAAI,CAACqG,KAApC;AAEH;;AACDpE,IAAAA,WAAW,CAACjC,IAAI,CAACiI,UAAN,CAAX,GAA+B,CAACF,UAAU,CAAC/H,IAAI,CAACiI,UAAN,CAAV,GAA+BD,aAAa,CAAChI,IAAI,CAACiI,UAAN,CAA7C,EAAgEC,OAAhE,CAAwE,CAAxE,CAA/B;AAEH,GAZD,EANwB,CAmBxB;AACA;AACA;;AACA,SAAO,CAACjG,WAAD,EAAa+F,aAAb,CAAP;AACD,C,CAED;;;AACA,SAAS5F,kBAAT,CAA4BH,WAA5B,EAAwC;AACtC;AACA,MAAIkG,cAAc,qBAAOlG,WAAP,CAAlB;;AACA,MAAImG,aAAa,GAAGC,MAAM,CAACC,IAAP,CAAYH,cAAZ,CAApB,CAHsC,CAGY;;AAClD,MAAII,QAAQ,GAAGF,MAAM,CAACG,MAAP,CAAcL,cAAd,CAAf,CAJsC,CAIQ;;AAE9CI,EAAAA,QAAQ,CAACxI,OAAT,CAAiB,UAACC,IAAD,EAAM6H,KAAN,EAAc;AAC7B,QAAI1F,OAAO,GAAC,EAAZ,CAD6B,CACb;AAChB;;AACA,SAAI,IAAIsG,CAAC,GAAC,CAAV,EAAaA,CAAC,IAAEzI,IAAI,CAAC,CAAD,CAApB,EAAyByI,CAAC,EAA1B,EAA6B;AAC3BtG,MAAAA,OAAO,mFAAP;AACAgG,MAAAA,cAAc,WAAIC,aAAa,WAAIP,KAAJ,EAAjB,EAAd,GAAiD1F,OAAjD;AACD,KAN4B,CAQ7B;;;AACE,QAAGnC,IAAI,CAAC,CAAD,CAAJ,IAAS,CAAZ,EAAc;AACZ,WAAI,IAAIyI,EAAC,GAAC,CAAV,EAAaA,EAAC,IAAG,IAAEzI,IAAI,CAAC,CAAD,CAAvB,EAA6ByI,EAAC,EAA9B,EAAiC;AAC/BtG,QAAAA,OAAO,4FAAP;AACAgG,QAAAA,cAAc,WAAIC,aAAa,WAAIP,KAAJ,EAAjB,EAAd,GAAiD1F,OAAjD;AACD;AAEF,KAND,MAMM,IAAGnC,IAAI,CAAC,CAAD,CAAJ,IAAU,CAAV,IAAeA,IAAI,CAAC,CAAD,CAAJ,IAAU,CAA5B,EAA8B;AAChCmC,MAAAA,OAAO,wFAAP;;AACA,WAAI,IAAIsG,GAAC,GAAC,CAAV,EAAaA,GAAC,IAAG,IAAEzI,IAAI,CAAC,CAAD,CAAN,GAAU,CAA3B,EAA+ByI,GAAC,EAAhC,EAAmC;AACjCtG,QAAAA,OAAO,2FAAP;AACD;;AACDgG,MAAAA,cAAc,WAAIC,aAAa,WAAIP,KAAJ,EAAjB,EAAd,GAAiD1F,OAAjD;AAEH,KAPK,MAOA,IAAGnC,IAAI,CAAC,CAAD,CAAJ,IAAS,CAAZ,EAAc;AAChBmC,MAAAA,OAAO,kFAAP;;AACF,WAAI,IAAIsG,GAAC,GAAC,CAAV,EAAaA,GAAC,IAAG,IAAEzI,IAAI,CAAC,CAAD,CAAN,GAAU,CAA3B,EAA+ByI,GAAC,EAAhC,EAAmC;AACjCtG,QAAAA,OAAO,2FAAP;AACAgG,QAAAA,cAAc,WAAIC,aAAa,WAAIP,KAAJ,EAAjB,EAAd,GAAiD1F,OAAjD;AACD;AACF;AAEJ,GA9BD;AA+BA,SAAOgG,cAAP;AACD,C,CAED;;;AACA,SAAS7E,oBAAT,CAA8BtD,IAA9B,EAAmCiC,WAAnC,EAA+CE,OAA/C,EAAuDD,UAAvD,EAAkE;AAEhE,MAAIlC,IAAI,CAAC+C,MAAL,KAAe,EAAnB,EAAsB;AACpB/C,IAAAA,IAAI,CAAC+C,MAAL,GAAc,gDAAd;AACD;;AAED,MAAGd,WAAW,CAACjC,IAAI,CAACgD,EAAN,CAAX,KAAuBxD,SAAvB,IAAoC2C,OAAO,CAACnC,IAAI,CAACgD,EAAN,CAAP,KAAoBxD,SAAxD,IAAqE0C,UAAU,CAAClC,IAAI,CAACgD,EAAN,CAAV,KAAuBxD,SAA/F,EAA0G;AAExG,2JAIsCQ,IAAI,CAACgD,EAJ3C,2DAKoBhD,IAAI,CAAC+C,MALzB,sBAKyC/C,IAAI,CAACT,KAL9C,gMAOgES,IAAI,CAACgD,EAPrE,mCAO6FhD,IAAI,CAACT,KAPlG;AAgBD,GAlBD,MAkBK;AACH,mKAIwCS,IAAI,CAACgD,EAJ7C,6DAKsBhD,IAAI,CAAC+C,MAL3B,sBAK2C/C,IAAI,CAACT,KALhD,oMAOkES,IAAI,CAACgD,EAPvE,mCAO+FhD,IAAI,CAACT,KAPpG,4LAUoD0C,WAAW,CAACjC,IAAI,CAACgD,EAAN,CAV/D,iHAYgBb,OAAO,CAACnC,IAAI,CAACgD,EAAN,CAZvB,gHAcoCd,UAAU,CAAClC,IAAI,CAACgD,EAAN,CAd9C;AAqBD;AAEF;AAED;;AAIA;;;AAEA,IAAM0F,YAAY,GAAGlK,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAArB;AACA,IAAMkK,eAAe,GAAGnK,QAAQ,CAACsB,gBAAT,CAA0B,qBAA1B,CAAxB;AAEA,IAAI8I,QAAQ,GAAC,EAAb;AACA,IAAIC,UAAU,GAAC,EAAf,C,CAEA;;AACAF,eAAe,CAAC5I,OAAhB,CAAwB,UAACC,IAAD,EAAM6H,KAAN,EAAc;AAEpC7H,EAAAA,IAAI,CAACC,gBAAL,CAAsB,QAAtB,EAA+B,UAAAC,CAAC,EAAE;AAChC,QAAI4I,aAAa,GAAG9I,IAAI,CAAC+I,YAAL,CAAkB,MAAlB,CAApB;AACA,QAAIC,SAAS,GAAGhJ,IAAI,CAAC+I,YAAL,CAAkB,YAAlB,CAAhB;AACA3K,IAAAA,OAAO,CAACC,GAAR,CAAYyK,aAAZ,EAA0BE,SAA1B;;AAEA,QAAI9I,CAAC,CAAC+I,MAAF,CAASC,OAAb,EAAsB;AACpB,UAAGN,QAAQ,CAACI,SAAD,CAAR,KAAsBxJ,SAAzB,EAAmC;AACjCoJ,QAAAA,QAAQ,CAACI,SAAD,CAAR,GAAoB,EAApB;AACAJ,QAAAA,QAAQ,CAACI,SAAD,CAAR,CAAoBG,IAApB,CAAyBL,aAAzB;AACD,OAHD,MAGK;AACHF,QAAAA,QAAQ,CAACI,SAAD,CAAR,CAAoBG,IAApB,CAAyBL,aAAzB;AACD;AACF,KAPD,MAOM;AACFF,MAAAA,QAAQ,CAACI,SAAD,CAAR,GAAsBJ,QAAQ,CAACI,SAAD,CAAR,CAAoBzB,MAApB,CAA2B,UAAAvH,IAAI,EAAE;AACrD,eAAO8I,aAAa,IAAG9I,IAAvB;AACD,OAFqB,CAAtB;;AAGA,UAAG4I,QAAQ,CAACI,SAAD,CAAR,CAAoB3I,MAApB,KAA6B,CAAhC,EAAkC;AAChC,eAAOuI,QAAQ,CAACI,SAAD,CAAf;AACD;AACJ,KAnB+B,CAqBhC;AACA;;;AAEAH,IAAAA,UAAU,GAAGpH,aAAa,CAAC8F,MAAd,CAAqB,UAAAP,OAAO,EAAE;AAEzC,UAAIoC,OAAO,GAAG,IAAd;AACA,UAAIC,QAAQ,GAAE,IAAd;AACA,UAAIC,QAAQ,GAAE,IAAd;AACA,UAAIC,SAAS,GAAG,IAAhB;;AAEA,UAAGX,QAAQ,CAACvF,IAAZ,EAAiB;AACf+F,QAAAA,OAAO,GAAGR,QAAQ,CAACvF,IAAT,CAAcmG,QAAd,CAAuBxC,OAAO,CAAC3D,IAA/B,CAAV;AACD;;AACD,UAAGuF,QAAQ,CAAC7C,KAAZ,EAAkB;AAChBsD,QAAAA,QAAQ,GAAGT,QAAQ,CAAC7C,KAAT,CAAeyD,QAAf,CAAwBxC,OAAO,CAACjB,KAAhC,CAAX;AACD;;AACD,UAAG6C,QAAQ,CAACxF,KAAZ,EAAkB;AAChBkG,QAAAA,QAAQ,GAAGV,QAAQ,CAACxF,KAAT,CAAeoG,QAAf,CAAwBxC,OAAO,CAAC5D,KAAhC,CAAX;AACD;;AAEDmG,MAAAA,SAAS,GAAGvC,OAAO,CAAChB,IAAR,CAAayD,IAAb,CAAkB,UAACC,GAAD,EAAS;AACrC;AACA,YAAI,CAACd,QAAQ,CAAC5C,IAAd,EAAoB;AAClB,iBAAO,IAAP;AACD;;AACD,eAAO4C,QAAQ,CAAC5C,IAAT,CAAcwD,QAAd,CAAuBE,GAAvB,CAAP;AACD,OANW,CAAZ;AAQA,aAAON,OAAO,IAAIC,QAAX,IAAuBC,QAAvB,IAAmCC,SAA1C;AAED,KA3BY,CAAb,CAxBgC,CAoDhC;;AACA9B,IAAAA,sBAAsB;AAEvB,GAvDD;AAwDD,CA1DD;;AA8DA,SAASA,sBAAT,GAAiC;AAE/B,MAAI1F,eAAe,GAAGC,eAAe,EAArC;AACA,MAAIC,WAAW,GAAGF,eAAe,CAAC,CAAD,CAAjC;AACA,MAAIG,UAAU,GAAGH,eAAe,CAAC,CAAD,CAAhC;AACA,MAAII,OAAO,GAAGC,kBAAkB,CAACH,WAAD,CAAhC;AAEE,MAAI0H,eAAe,GAAC,EAApB;;AACA,MAAGd,UAAU,CAACxI,MAAX,KAAoB,CAAvB,EAAyB;AACvBoB,IAAAA,aAAa,CAAC1B,OAAd,CAAsB,UAAA0F,UAAU,EAAE;AAChCkE,MAAAA,eAAe,IAAIC,yBAAyB,CAACnE,UAAD,EAAYxD,WAAZ,EAAwBE,OAAxB,EAAgCD,UAAhC,CAA5C;AACD,KAFD;;AAIA,QAAG2H,YAAY,KAAGrK,SAAlB,EAA4B;AAC1BqK,MAAAA,YAAY,CAAC/G,YAAb,CAA0B,OAA1B,EAAkC,QAAlC;AACD;;AACD,QAAGgH,YAAY,KAAGtK,SAAlB,EAA4B;AAC1BsK,MAAAA,YAAY,CAAChH,YAAb,CAA0B,OAA1B,EAAkC,QAAlC;AACD;;AAGD,QAAG8F,QAAQ,CAACvF,IAAT,KAAkB7D,SAAlB,IAA+BoJ,QAAQ,CAAC7C,KAAT,KAAmBvG,SAAlD,IAA+DoJ,QAAQ,CAACxF,KAAT,KAAmB5D,SAAlF,IAA+FoJ,QAAQ,CAAC5C,IAAT,KAAkBxG,SAApH,EAA+H;AAC7HmK,MAAAA,eAAe,GAAG,WAAlB;AACD;AACF,GAhBD,MAgBK;AACH,QAAGE,YAAY,KAAGrK,SAAlB,EAA4B;AACzBqK,MAAAA,YAAY,CAAC/G,YAAb,CAA0B,OAA1B,EAAkC,gBAAlC;AACC+G,MAAAA,YAAY,CAACzJ,WAAb,aAA8ByI,UAAU,CAACxI,MAAzC;AACH;;AACD,QAAGyJ,YAAY,KAAGtK,SAAlB,EAA4B;AAC1BsK,MAAAA,YAAY,CAAChH,YAAb,CAA0B,OAA1B,EAAkC,gBAAlC;AACD;;AAGD,QAAG8F,QAAQ,CAACvF,IAAT,IAAe7D,SAAf,IAA4BoJ,QAAQ,CAAC7C,KAAT,IAAgBvG,SAA5C,IAAyDoJ,QAAQ,CAACxF,KAAT,IAAgB5D,SAAzE,IAAsFoJ,QAAQ,CAAC5C,IAAT,IAAexG,SAAxG,EAAmH;AACjHqK,MAAAA,YAAY,CAAC/G,YAAb,CAA0B,OAA1B,EAAkC,QAAlC;AACAgH,MAAAA,YAAY,CAAChH,YAAb,CAA0B,OAA1B,EAAkC,QAAlC;AACD;;AAEDiH,IAAAA,WAAW;AAGXlB,IAAAA,UAAU,CAAC9I,OAAX,CAAmB,UAAA0F,UAAU,EAAE;AAC7BkE,MAAAA,eAAe,IAAIC,yBAAyB,CAACnE,UAAD,EAAYxD,WAAZ,EAAwBE,OAAxB,EAAgCD,UAAhC,CAA5C;AACD,KAFD;AAGD;;AAED,MAAGwG,YAAY,KAAG,IAAlB,EAAuB;AACrBA,IAAAA,YAAY,CAAC3J,SAAb,GAAyB4K,eAAzB;AACD;AACJ;;AAGD,SAASC,yBAAT,CAAmCnE,UAAnC,EAA8CxD,WAA9C,EAA0DE,OAA1D,EAAkED,UAAlE,EAA6E;AAC3E,MAAIuD,UAAU,CAAC1C,MAAX,KAAqB,EAAzB,EAA4B;AAC1B0C,IAAAA,UAAU,CAAC1C,MAAX,GAAoB,gDAApB;AACD;;AAED,MAAGd,WAAW,CAACwD,UAAU,CAACzC,EAAZ,CAAX,KAA6BxD,SAA7B,IAA0C2C,OAAO,CAACsD,UAAU,CAACzC,EAAZ,CAAP,KAA0BxD,SAApE,IAAiF0C,UAAU,CAACuD,UAAU,CAACzC,EAAZ,CAAV,KAA6BxD,SAAjH,EAA4H;AAC1H,+GAEgCiG,UAAU,CAACzC,EAF3C,6CAE4EyC,UAAU,CAAC1C,MAFvF,sBAEuG0C,UAAU,CAAClG,KAFlH,yHAKqDkG,UAAU,CAACzC,EALhE,kCAKuFyC,UAAU,CAAClG,KALlG,sOAQ4CkG,UAAU,CAACpC,IARvD,eAQgEoC,UAAU,CAACM,KAR3E,gBAQsFN,UAAU,CAACrC,KARjG,eAQ2GqC,UAAU,CAACO,IARtH,oLAaqBP,UAAU,CAAC3I,GAbhC,oKAcwC2I,UAAU,CAACzC,EAdnD;AAkBD,GAnBD,MAmBK;AACH,4GAE+ByC,UAAU,CAACzC,EAF1C,6CAE2EyC,UAAU,CAAC1C,MAFtF,sBAEsG0C,UAAU,CAAClG,KAFjH,kHAKgDkG,UAAU,CAACzC,EAL3D,kCAKkFyC,UAAU,CAAClG,KAL7F,sJAO8C0C,WAAW,CAACwD,UAAU,CAACzC,EAAZ,CAPzD,uGASUb,OAAO,CAACsD,UAAU,CAACzC,EAAZ,CATjB,oGAW8Bd,UAAU,CAACuD,UAAU,CAACzC,EAAZ,CAXxC,oEAYyCyC,UAAU,CAACpC,IAZpD,eAY6DoC,UAAU,CAACM,KAZxE,gBAYmFN,UAAU,CAACrC,KAZ9F,eAYwGqC,UAAU,CAACO,IAZnH,wKAiBiBP,UAAU,CAAC3I,GAjB5B,gKAkBoC2I,UAAU,CAACzC,EAlB/C;AAuBD;AAEF;AAID;;;AAEA,IAAM6G,YAAY,GAAGrL,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAArB;AACA,IAAMqL,YAAY,GAAGtL,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAArB;AACA,IAAMuL,cAAc,GAAGxL,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAAvB;AACA,IAAMwL,YAAY,GAAGzL,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAArB;;AAEA,SAASsL,WAAT,GAAsB;AACpBC,EAAAA,cAAc,CAAC/J,gBAAf,CAAgC,OAAhC,EAAwC,UAAAC,CAAC,EAAE;AACzC,QAAG0I,QAAQ,CAACvF,IAAZ,EAAiB;AACf,aAAOuF,QAAQ,CAACvF,IAAhB;AACD;;AACD,QAAGuF,QAAQ,CAAC7C,KAAZ,EAAkB;AAChB,aAAO6C,QAAQ,CAAC7C,KAAhB;AACD;;AACD,QAAG6C,QAAQ,CAACxF,KAAZ,EAAkB;AAChB,aAAOwF,QAAQ,CAACxF,KAAhB;AACD;;AACD,QAAGwF,QAAQ,CAAC5C,IAAZ,EAAiB;AACf,aAAO4C,QAAQ,CAAC5C,IAAhB;AACD;;AACD2C,IAAAA,eAAe,CAAC5I,OAAhB,CAAwB,UAAAC,IAAI,EAAE;AAC5BA,MAAAA,IAAI,CAACkJ,OAAL,GAAe,KAAf;AACD,KAFD;AAGAzB,IAAAA,sBAAsB;AACtBrJ,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYuK,QAAZ;AACD,GAnBD;AAqBD;;;ACzcD,IAAMsB,UAAU,GAAG1L,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAAnB,C,CAA+D;;AAE/D,IAAM0L,cAAc,GAAG3L,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAAvB;AACA,IAAM2L,eAAe,GAAG5L,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAAxB;AACA,IAAM4L,UAAU,GAAG7L,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAnB;AACA,IAAM6L,QAAQ,GAAG9L,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAjB;AACA,IAAM8L,eAAe,GAAG/L,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAAxB;AAEA,IAAM+L,gBAAgB,GAAGhM,QAAQ,CAACsB,gBAAT,CAA0B,mBAA1B,CAAzB,C,CAA0E;;AAC1E,IAAM2K,SAAS,GAAGjM,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAlB,C,CAEA;;AAGA,SAASiM,UAAT,GAAqB;AACjBtG,EAAAA,WAAW;AACd;;AACDsG,UAAU,G,CAIV;;AACA,IAAMC,WAAW,GAAE;AACfC,EAAAA,QAAQ,EAAC;AACLC,IAAAA,QAAQ,EAAE;AAACC,MAAAA,OAAO,EAAE;AAAV;AADL,GADM;AAIfC,EAAAA,SAAS,EAAC;AACNF,IAAAA,QAAQ,EAAE;AAACC,MAAAA,OAAO,EAAE;AAAV;AADJ,GAJK;AAOfjM,EAAAA,KAAK,EAAC;AACFgM,IAAAA,QAAQ,EAAE;AAACC,MAAAA,OAAO,EAAE;AAAV,KADR;AAEFjM,IAAAA,KAAK,EAAC;AACFA,MAAAA,KAAK,EAAC,IADJ;AAEFiM,MAAAA,OAAO,EAAE;AAFP;AAFJ,GAPS;AAefE,EAAAA,QAAQ,EAAC;AACLH,IAAAA,QAAQ,EAAE;AAACC,MAAAA,OAAO,EAAE;AAAV,KADL;AAELzK,IAAAA,MAAM,EAAE;AACJ4K,MAAAA,OAAO,EAAE,CADL;AAEJH,MAAAA,OAAO,EAAE;AAFL;AAFH,GAfM;AAsBfI,EAAAA,SAAS,EAAC;AACNL,IAAAA,QAAQ,EAAE;AAACC,MAAAA,OAAO,EAAE;AAAV,KADJ;AAENK,IAAAA,QAAQ,EAAC;AACLC,MAAAA,SAAS,EAAC,UADL;AAELN,MAAAA,OAAO,EAAE,WAFJ,CAGL;AACA;AACA;;AALK;AAFH;AAtBK,CAAnB;AAmCAN,gBAAgB,CAACzK,OAAjB,CAAyB,UAAAC,IAAI,EAAE;AAC3BA,EAAAA,IAAI,CAACC,gBAAL,CAAsB,QAAtB,EAA+B,UAAAC,CAAC,EAAE;AAE9BF,IAAAA,IAAI,CAACG,kBAAL,CAAwBC,WAAxB,GAAsC,EAAtC;AACA,QAAIiL,MAAM,GAAGC,QAAQ,CAACpB,UAAD,EAAaS,WAAb,CAArB;AACAvM,IAAAA,OAAO,CAACC,GAAR,CAAY2B,IAAI,CAACpB,KAAjB;AAGAyF,IAAAA,SAAS,CAACtE,OAAV,CAAkB,UAAAuE,QAAQ,EAAE;AACxB,UAAGA,QAAQ,CAACzF,KAAT,KAAiBwL,UAAU,CAACzL,KAA/B,EAAqC;AACjC;AACA;AACAJ,QAAAA,QAAQ,CAACC,aAAT,CAAuB,QAAvB,EAAiC2B,WAAjC,GAA+C,QAA/C,CAHiC,CAIjC;AACH,OALD,MAKK;AACD5B,QAAAA,QAAQ,CAACC,aAAT,CAAuB,QAAvB,EAAiC2B,WAAjC,GAA8C,EAA9C,CADC,CAED;AACH;AACJ,KAVD,EAP8B,CAmB9B;;AACA,QAAIiL,MAAJ,EAAY;AACVhD,MAAAA,MAAM,CAACC,IAAP,CAAY+C,MAAZ,EAAoBtL,OAApB,CAA6B,UAAAuI,IAAI,EAAG;AAClC;AACA9J,QAAAA,QAAQ,CAACC,aAAT,YAA2B6J,IAA3B,GAAmClI,WAAnC,GAAiDiL,MAAM,CAAC/C,IAAD,CAAN,CAAa,CAAb,EAAgBpL,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAjD;AACD,OAHD;AAID;AACJ,GA1BD;AA2BH,CA5BD,E,CAgCA;;AACA,IAAImH,SAAS,GAAG,EAAhB;;AACA,SAASD,WAAT,GAAsB;AAClBvG,EAAAA,KAAK,CAACC,GAAN,CAAU,6BAAV,EAAyCC,IAAzC,CAA8C,UAAAC,GAAG,EAAE;AAC/CqG,IAAAA,SAAS,GAAGrG,GAAG,CAACC,IAAhB;AACH,GAFD,WAES,UAAAE,GAAG,EAAE;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,QAAhB;AACH,GAJD;AAKH,C,CAGD;;;AACA,IAAGmM,SAAS,KAAG,IAAf,EAAoB;AAChBA,EAAAA,SAAS,CAACxK,gBAAV,CAA2B,OAA3B,EAAmC,UAAAC,CAAC,EAAE;AACtCA,IAAAA,CAAC,CAACqE,cAAF;;AAEA,QAAG4F,cAAc,CAACvL,KAAf,KAAuB,EAAvB,IAA2BwL,eAAe,CAACxL,KAAhB,KAAwB,EAAnD,IAAuDyL,UAAU,CAACzL,KAAX,KAAmB,EAA1E,IAA8E0L,QAAQ,CAAC1L,KAAT,KAAiB,EAA/F,IAAmG2L,eAAe,CAAC3L,KAAhB,KAAwB,EAA9H,EAAiI;AAC7HR,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8B8L,cAAc,CAACvL,KAA7C;AACAR,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAA+B+L,eAAe,CAACxL,KAA/C;AACAR,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BgM,UAAU,CAACzL,KAArC;AACAR,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwBiM,QAAQ,CAAC1L,KAAjC;AACAR,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAA+BkM,eAAe,CAAC3L,KAA/C;AACA;AACH,KAXqC,CAatC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA4L,IAAAA,gBAAgB,CAACzK,OAAjB,CAAyB,UAAAC,IAAI,EAAE;AAC3B,UAAGA,IAAI,CAACG,kBAAL,CAAwBC,WAAxB,KAAwC,EAA3C,EAA+C;AAC3ChC,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACA;AACH;AACJ,KALD;;AAOA,QAAGiM,QAAQ,CAAC1L,KAAT,KAAkB2L,eAAe,CAAC3L,KAArC,EAA2C;AACvC;AACH;;AAEDf,IAAAA,KAAK,CAAC2G,IAAN,CAAW,6BAAX,EAAyC;AACrC,kBAAY2F,cAAc,CAACvL,KADU;AAErC,mBAAawL,eAAe,CAACxL,KAFQ;AAGrC,eAASyL,UAAU,CAACzL,KAHiB;AAIrC,kBAAY0L,QAAQ,CAAC1L,KAJgB;AAKrC,cAAQ,MAL6B;AAMrC,eAAQ,EAN6B;AAOrC,qBAAc,EAPuB;AAQrC,eAAQ;AAAC,sBAAa;AAAd;AAR6B,KAAzC,EAUGb,IAVH,CAUQ,UAAAC,GAAG,EAAE;AACTI,MAAAA,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACC,IAAhB;AACAsN,MAAAA,KAAK,CAAC,MAAD,CAAL,CAFS,CAGT;AACA;AACA;AACA;AACA;;AACAvO,MAAAA,QAAQ,CAACC,IAAT,GAAe,cAAf;AAEH,KApBD,WAoBS,UAAAkB,GAAG,EAAE;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,QAAhB;AACH,KAtBD;AAwBH,GAzDG;AA0DH;;;AC9JD,SAASkI,KAAT,CAAgBgF,QAAhB,EAA0B;AACtB,MAAIC,QAAQ,GAAG,IAAIC,IAAJ,CAASF,QAAQ,GAAG,IAApB,CAAf;AACA,MAAIG,IAAI,GAAGF,QAAQ,CAACG,WAAT,EAAX;AACA,MAAIC,KAAK,GAAGJ,QAAQ,CAACK,QAAT,KAAsB,CAAlC;AACA,MAAIC,GAAG,GAAGN,QAAQ,CAACO,OAAT,EAAV;AACA,MAAIC,IAAI,GAAGR,QAAQ,CAACS,QAAT,EAAX;AACA,MAAIC,MAAM,GAAGV,QAAQ,CAACW,UAAT,EAAb;AAEA,MAAIC,GAAG,GAAGX,IAAI,CAACY,KAAL,CAAW,IAAIZ,IAAJ,EAAX,CAAV,CARsB,CAQa;;AACnC,MAAIa,YAAY,GAAG,CAAnB;AACA,MAAIC,WAAJ,CAVsB,CAWtB;;AACAD,EAAAA,YAAY,GAAIF,GAAG,GAAG,IAAP,GAAeb,QAA9B,CAZsB,CActB;;AACA,MAAIe,YAAY,IAAI,EAApB,EAAwB;AACpBC,IAAAA,WAAW,GAAG,IAAd;AACH,GAFD,CAGA;AAHA,OAIK,IAAI,KAAKD,YAAL,IAAqBA,YAAY,IAAI,KAAK,EAA9C,EAAkD;AACnDC,MAAAA,WAAW,GAAGC,IAAI,CAACC,IAAL,CAAWH,YAAY,GAAI,EAA3B,IAAmC,KAAjD;AACH,KAFI,CAGL;AAHK,SAIA,IAAI,KAAK,EAAL,GAAUA,YAAV,IAA0BA,YAAY,IAAI,KAAK,EAAL,GAAU,EAAxD,EAA4D;AAC7DC,QAAAA,WAAW,GAAGC,IAAI,CAACC,IAAL,CAAUH,YAAY,IAAI,KAAK,EAAT,CAAtB,IAAsC,KAApD;AACH,OAFI,CAGL;AAHK,WAIA,IAAI,KAAK,EAAL,GAAU,EAAV,GAAeA,YAAf,IAA+BA,YAAY,IAAI,KAAK,EAAL,GAAU,EAAV,GAAe,EAAlE,EAAsE;AACvEC,UAAAA,WAAW,GAAGC,IAAI,CAACC,IAAL,CAAUH,YAAY,IAAI,KAAK,EAAL,GAAU,EAAd,CAAtB,IAA2C,IAAzD;AACH,SAFI,CAGL;AAHK,aAIA,IAAI,KAAK,EAAL,GAAU,EAAV,GAAe,EAAf,GAAoBA,YAApB,IAAoCA,YAAY,IAAI,KAAK,EAAL,GAAU,EAAV,GAAe,EAAf,GAAoB,EAA5E,EAA+E;AAChFC,YAAAA,WAAW,GAAGC,IAAI,CAACC,IAAL,CAAUH,YAAY,IAAI,KAAK,EAAL,GAAU,EAAV,GAAe,EAAnB,CAAtB,IAAgD,KAA9D;AACH,WAFI,CAGL;AAHK,eAIA;AACDC,cAAAA,WAAW,GAAGb,IAAI,GAAG,GAAP,GAAaE,KAAb,GAAqB,GAArB,GAA2BE,GAA3B,GAAiC,IAAjC,GAAwCE,IAAxC,GAA+C,GAA/C,GAAqDE,MAAnE;AACH;;AACD,SAAOK,WAAP;AACH,C,CAGD","file":"all.js","sourcesContent":["const url=\"http://localhost:3000\";\r\nlet userId = location.href.split(\"=\")[1];\r\nlet localStorageUserId = localStorage.getItem(\"userId\");  \r\nlet localStorageToken = localStorage.getItem(\"accessToken\");\r\nlet pageClassify = location.href.split(\"/\")[3].split(\".html\")[0];\r\nlet headers = {\r\n    Authorization: `Bearer ${localStorageToken}` \r\n}\r\nlet homePage = location.href.split(\"/\")[0]+`//`+location.href.split(\"/\")[2];\r\n\r\n//如果localStorage userid 是空的 或是 該id 跟 這個page的id 不同 ，就轉跳至首頁\r\n//取得該用戶資料\r\nlet userData=[];\r\nfunction initAccount(){\r\n    if(localStorageUserId == userId && localStorageUserId !==\"\"){\r\n        axios.get(`${url}/users?id=${localStorageUserId}`,headers)\r\n        .then(res=>{\r\n            userData = res.data;\r\n            //console.log(userData);\r\n            renderUserAccount();\r\n        \r\n        }).catch(err=>{\r\n            console.log(err.response);\r\n        })\r\n    }else{\r\n        if( location.href !== `${homePage}/index.html`){\r\n            if( pageClassify!==\"resource\" && pageClassify!==\"resource_list\" \r\n            && location.href!==homePage+\"/login.html\"\r\n            && location.href!==homePage+\"/signup.html\"\r\n            && location.href!==homePage+\"/acc_account.html\"\r\n            && location.href!==homePage+\"/acc_resources.html\"){\r\n                location.href = `./index.html`;\r\n            }\r\n        }\r\n    }\r\n}\r\ninitAccount();\r\n\r\n\r\n//渲染既有資料\r\nconst userEmail = document.querySelector('#userEmail');\r\nconst userPW = document.querySelector('#userPW');\r\n\r\nconst leftMenu = document.querySelector('.leftMenu');\r\n\r\n\r\nfunction renderUserAccount(){\r\n    userEmail.value = userData[0].email;\r\n\r\n    let leftMenuStr=`<ul class=\"nav flex-row flex-lg-column\">\r\n        <li class=\"nav-item \">\r\n        <a class=\"nav-link active ps-0 px-lg-3\" aria-current=\"page\" href=\"./acc_profile.html?userid=${localStorageUserId}\">個人資料</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n        <a class=\"nav-link ps-0 px-lg-3\" href=\"./acc_account.html?userid=${localStorageUserId}\">帳戶安全</a>\r\n        </li>\r\n        <!-- <li class=\"nav-item ps-0 px-lg-3\">\r\n        <a class=\"nav-link\" href=\"#\">通知</a>\r\n        </li> -->\r\n    </ul>  `;\r\n    \r\n    leftMenu.innerHTML = leftMenuStr;\r\n}","const url=\"http://localhost:3000\";\r\nlet userId = location.href.split(\"=\")[1];\r\nlet localStorageUserId = localStorage.getItem(\"userId\");  \r\nlet localStorageToken = localStorage.getItem(\"accessToken\");\r\nlet pageClassify = location.href.split(\"/\")[3].split(\".html\")[0];\r\nlet headers = {\r\n    Authorization: `Bearer ${localStorageToken}` \r\n}\r\nlet homePage = location.href.split(\"/\")[0]+`//`+location.href.split(\"/\")[2];\r\n\r\n//如果localStorage userid 是空的 或是 該id 跟 這個page的id 不同 ，就轉跳至首頁\r\n//取得該用戶資料\r\nlet userData=[];\r\nfunction initProfile(){\r\n    if(localStorageUserId == userId && localStorageUserId !==\"\"){\r\n        axios.get(`${url}/users?id=${localStorageUserId}`,headers)\r\n        .then(res=>{\r\n            userData = res.data;\r\n            //console.log(userData);\r\n            renderUserData();\r\n        \r\n        }).catch(err=>{\r\n            console.log(err.response);\r\n        })\r\n    }else{\r\n        if( location.href !== `${homePage}/index.html`){\r\n            if( pageClassify!==\"resource\" && pageClassify!==\"resource_list\" \r\n            && location.href!==homePage+\"/login.html\"\r\n            && location.href!==homePage+\"/signup.html\"\r\n            && location.href!==homePage+\"/acc_account.html\"\r\n            && location.href!==homePage+\"/acc_resources.html\"){\r\n                location.href = `./index.html`;\r\n            }\r\n        }\r\n    }\r\n}\r\ninitProfile();\r\n\r\n\r\n//渲染用戶既有資料\r\n\r\nconst firstName = document.querySelector('#firstName');\r\nconst lastName = document.querySelector('#lastName');\r\nconst userTitle = document.querySelector('#userTitle');\r\nconst userExp = document.querySelector('#userExp');\r\n// const websiteUrl = document.querySelector('#websiteUrl');\r\nconst profileImg = document.querySelector('.profileImg');\r\n\r\n//左側選單\r\nconst leftMenu = document.querySelector('.leftMenu');\r\n\r\nfunction renderUserData() {\r\n    firstName.value = userData[0].firstName;\r\n    lastName.value = userData[0].lastName;\r\n   \r\n    if(userData[0].title!=undefined){\r\n        userTitle.value = userData[0].title;\r\n    }\r\n    if(userData[0].experiences!=undefined){\r\n        userExp.value = userData[0].experiences;\r\n    }\r\n    // if( userData[0].links.websiteUrl!=undefined){\r\n    //     websiteUrl.value = userData[0].links.websiteUrl;\r\n    // }\r\n\r\n    // console.log(profileImg);\r\n    let prefix = (userData[0].firstName)[0].toUpperCase();\r\n    \r\n    let profileImgStr=`\r\n    <span class=\"userImg d-inline-block bg-primary p-4 rounded-circle fw-bold lh-1 text-white text-center\">${prefix}</span>`;\r\n    profileImg.innerHTML = profileImgStr;\r\n\r\n\r\n    let leftMenuStr=`<ul class=\"nav flex-row flex-lg-column\">\r\n        <li class=\"nav-item \">\r\n        <a class=\"nav-link active ps-0 px-lg-3\" aria-current=\"page\" href=\"./acc_profile.html?userid=${localStorageUserId}\">個人資料</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n        <a class=\"nav-link ps-0 px-lg-3\" href=\"./acc_account.html?userid=${localStorageUserId}\">帳戶安全</a>\r\n        </li>\r\n        <!-- <li class=\"nav-item ps-0 px-lg-3\">\r\n        <a class=\"nav-link\" href=\"#\">通知</a>\r\n        </li> -->\r\n    </ul>  `;\r\n    \r\n    leftMenu.innerHTML = leftMenuStr;\r\n\r\n}\r\n\r\n//如果欄位編輯, 檢查欄位格式\r\nconst profileInputs = document.querySelectorAll('.profileInput');\r\nif(profileInputs!==null){\r\n    profileInputs.forEach(item=>{\r\n        item.addEventListener(\"change\",e=>{\r\n            item.nextElementSibling.textContent = '';\r\n            if(firstName.value ==\"\"){\r\n                document.querySelector('.firstName').textContent = '必填欄位';\r\n            }\r\n            if(lastName.value==\"\"){\r\n                document.querySelector('.lastName').textContent = '必填欄位';\r\n            }\r\n            if(userTitle.value.length > 15){\r\n                document.querySelector('.userTitle').textContent = '字述請少於15';\r\n            }\r\n            // if(websiteUrl.value){\r\n    \r\n            // }\r\n        })\r\n    })\r\n}\r\n\r\n\r\n\r\n//上傳圖片\r\n\r\n//儲存按鈕監聽,格式正確才儲存\r\nconst btnSaveProfile=document.querySelector('.btnSaveProfile');\r\nif(btnSaveProfile!==null){\r\n    btnSaveProfile.addEventListener(\"click\",e=>{\r\n        if(firstName.value !==\"\" && lastName.value!==\"\" && userTitle.value.length < 15){\r\n               \r\n            axios.patch(`${url}/users/${localStorageUserId}`,{\r\n                \"lastName\" : lastName.value,\r\n                \"firstName\" : firstName.value,\r\n                \"title\" : userTitle.value,\r\n                \"experiences\" : userExp.value,\r\n            })\r\n            .then(res=>{\r\n                //console.log(res.data);\r\n            }).catch(err=>{\r\n                console.log(err.response);\r\n            })\r\n           \r\n        }\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","// let commentsData = [];\n// function getAllComment(){\n//     axios.get(`${url}/comments`)\n//     .then(res=>{\n//         commentsData = res.data;\n//         console.log(commentsData);\n    \n//     }).catch(error=>{\n//       console.log(error);\n//     })\n// }\n\n\n/*****************nab tab***************/\n//hover 切換\n// const navItem = document.querySelectorAll(\".goodRate .nav-link\");\n// const tabContent = document.querySelectorAll(\".goodRate .tab-pane\");\n// console.log(navItem);\n// console.log(tabContent);\n\n// navItem.forEach((value,index)=>{\n//   value.addEventListener('mouseover',(e)=>{\n//     console.log(\"tt\",e.target.getAttribute(\"id\"));\n\n//     let labelledby = tabContent[index].getAttribute(\"aria-labelledby\");\n    \n//     //console.log(tabContent[index].classList);\n  \n//     if(e.target.getAttribute(\"id\") == labelledby ){\n//       //console.log(\"yes\");\n//       tabContent[index].classList.add(\"show\");\n//       console.log(tabContent[index].classList);\n\n//     }\n//   })\n\n// })\n\n\n","const url=\"http://localhost:3000\";\r\n// const url=\"./json/db.json\"\r\n// const url=\"http://localhost:3000/users\"\r\n// const url=\"http://localhost:3000/resources\"\r\n// const url=\"http://localhost:3000/bookmarks\"\r\n// const url=\"http://localhost:3000/comments\"\r\n","let locationHref = location.href.split(\"/\");\r\nlet resTopic = location.href.split(\"=\")[1];\r\nlet resId = location.href.split(\"=\")[1];\r\nlet userId = location.href.split(\"=\")[1];\r\nlet localStorageUserId = localStorage.getItem(\"userId\");  \r\nlet pageClassify = locationHref[3].split(\".html\")[0];\r\nlet homePage = locationHref[0]+`//`+locationHref[2];\r\n\r\n// let resTopicNew = resTopic.split(\" \");\r\n// console.log(resTopic);\r\n// console.log(\"pageClassify\",pageClassify);\r\n// console.log(\"locationHref\",locationHref);\r\n\r\n//1. 頁面初始化\r\nfunction initIndex(){\r\n    getResourcesForIndex();\r\n    if(pageClassify==\"resource\"){\r\n        if(resId == undefined){\r\n            location.href = `./index.html`;\r\n        }\r\n    }\r\n    else if(pageClassify==\"resource_list\"){\r\n        if(resTopic == undefined){\r\n            location.href = `./index.html`;\r\n        }\r\n    }\r\n    \r\n}\r\ninitIndex();\r\n\r\n//好評推薦\r\nconst goodRate1 = document.querySelector('#goodRate1 > div.row');\r\nconst goodRate2 = document.querySelector('#goodRate2 > div.row');\r\nconst goodRate3 = document.querySelector('#goodRate3 > div.row');\r\nconst goodRate1Tab = document.querySelector('#goodRate1-tab');\r\nconst goodRate2Tab = document.querySelector('#goodRate2-tab');\r\nconst goodRate3Tab = document.querySelector('#goodRate3-tab');\r\n\r\n//最新免費資源\r\nconst resourceType1 = document.querySelector('#resourceType1 > div.row');\r\nconst resourceType2 = document.querySelector('#resourceType2 > div.row');\r\nconst resourceType3 = document.querySelector('#resourceType3 > div.row');\r\nconst resource1Tab = document.querySelector('#resource1-tab');\r\nconst resource2Tab = document.querySelector('#resource2-tab');\r\nconst resource3Tab = document.querySelector('#resource3-tab');\r\n\r\n\r\nlet resourcesData = [];\r\nlet commentsData = [];\r\n\r\n//取得資源資料\r\nfunction getResourcesForIndex(){\r\n  axios.get(`${url}/resources`)\r\n  .then(res=>{\r\n    resourcesData = res.data;\r\n    renderGoodRateList();\r\n    renderNewFreeList();\r\n  \r\n  }).catch(error=>{\r\n    console.log(error);\r\n  })\r\n}\r\n\r\nfunction getCommentForIndex(){\r\n    axios.get(`${url}/comments`)\r\n    .then(res=>{\r\n      commentsData = res.data;\r\n    \r\n    }).catch(error=>{\r\n      console.log(error);\r\n    })\r\n}\r\n\r\n//渲染好評推薦資料\r\nfunction renderGoodRateList(){\r\n    let commentScoreNum = getAverageScore();\r\n    let resultScore = commentScoreNum[0];\r\n    let commentNum = commentScoreNum[1];\r\n    let starStr = combineCommentStar(resultScore); \r\n\r\n    let itemNum1 = 0;\r\n    let itemNum2 = 0;\r\n    let itemNum3 = 0;\r\n    let renderMaxNum = 6;\r\n    let tabJS =\"\";\r\n    let tabHtml=\"\";\r\n    let tabPython=\"\";\r\n\r\n    resourcesData.forEach( (item)=>{\r\n        // console.log(\"resultScore\");\r\n        // console.log(resultScore);\r\n        switch (item.topics){\r\n            case \"JavaScript\" :\r\n                if(itemNum1 <renderMaxNum){\r\n                    tabJS += combineResouorceItemType1(item,resultScore,starStr,commentNum);\r\n                   itemNum1 +=1;\r\n                }\r\n                break;\r\n\r\n            case \"HTML/CSS\" :\r\n                if(itemNum2 < renderMaxNum){\r\n                    tabHtml += combineResouorceItemType1(item,resultScore,starStr,commentNum);\r\n                    itemNum2+=1;\r\n                }\r\n                break;\r\n\r\n            case \"Python\" :\r\n                if(itemNum3 < renderMaxNum){\r\n                     tabPython += combineResouorceItemType1(item,resultScore,starStr,commentNum);\r\n                itemNum3+=1\r\n                }\r\n               \r\n                break;\r\n        }\r\n    })\r\n\r\n    if(goodRate1 !==null ){\r\n        if(tabJS==\"\"){\r\n            goodRate1Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n        goodRate1.innerHTML = tabJS;\r\n    }\r\n    if(goodRate2 !==null ){\r\n        if(tabHtml==\"\"){\r\n            goodRate2Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n        goodRate2.innerHTML = tabHtml;\r\n    }\r\n    if(goodRate3 !==null ){\r\n        if(tabPython==\"\"){\r\n            goodRate3Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n        goodRate3.innerHTML = tabPython;\r\n    }\r\n\r\n}\r\n\r\n\r\n//組單一資源項目html - type 1\r\nfunction combineResouorceItemType1(item,resultScore,starStr,commentNum){\r\n\r\n  if( item.imgUrl ===\"\"){\r\n    item.imgUrl = \"./assets/images/resources_cover/noimgCover.jpg\";\r\n  }\r\n\r\n  if(resultScore[item.id]===undefined || starStr[item.id]=== undefined || commentNum[item.id]=== undefined ){\r\n\r\n    return  `\r\n    <div class=\"col-md-6 col-lg-4\">\r\n    <div class=\"d-flex p-2 align-items-center\">\r\n        <div class=\"row\">\r\n            <div class=\"col-6\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"><img src=\"${item.imgUrl}\" alt=\"${item.title}\" onerror=\"this.src=./assets/images/resources_cover/noimgCover.jpg\"></a></div>\r\n            \r\n            <div class=\"col-6\">\r\n                <h4 class=\"ellipsis\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"> ${item.title}</a></h4>\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                尚無評價\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n         \r\n        \r\n    </div>\r\n    </div>\r\n    `;\r\n  }else{\r\n    return  `\r\n    <div class=\"col-md-6 col-lg-4\">\r\n    <div class=\"d-flex p-2 align-items-center\">\r\n        <div class=\"row\">\r\n            <div class=\"col-6\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"><img src=\"${item.imgUrl}\" alt=\"${item.title}\" onerror=\"this.src=./assets/images/resources_cover/noimgCover.jpg\"></a></div>\r\n\r\n            <div class=\"col-6\">\r\n                <h4 class=\"ellipsis\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"> ${item.title}</a></h4>\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                    <span class=\"fs-6 fw-bold\"> ${resultScore[item.id]}</span>\r\n                    <ul class=\"d-flex align-items-center lh-1\">\r\n                    ${starStr[item.id]}\r\n                    </ul>                                \r\n                    <span class=\"fs-7\">(${commentNum[item.id]})</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    </div>\r\n    </div>`;\r\n  }\r\n      \r\n}\r\n\r\n//渲染最新免費資源\r\nfunction renderNewFreeList(){\r\n    let commentScoreNum = getAverageScore();\r\n    let resultScore = commentScoreNum[0];\r\n    let commentNum = commentScoreNum[1];\r\n    let starStr = combineCommentStar(resultScore);\r\n\r\n    let tabOnline =\"\";\r\n    let tabOffline=\"\";\r\n    let tabArticle=\"\";\r\n\r\n    resourcesData.forEach( (item)=>{\r\n        if(item.price===\"免費\"){\r\n            if(item.type===\"線上課程\"){\r\n                tabOnline += combineResouorceItem(item,resultScore,starStr,commentNum);\r\n            }\r\n\r\n            if(item.type===\"實體課程\"){\r\n                tabOffline += combineResouorceItem(item,resultScore,starStr,commentNum);\r\n            }\r\n\r\n            if(item.type===\"文章\"){\r\n                tabArticle += combineResouorceItem(item,resultScore,starStr,commentNum);\r\n            }\r\n        }\r\n \r\n    })\r\n\r\n    if(resourceType1 !==null ){\r\n        resourceType1.innerHTML = tabOnline;\r\n        if(tabOnline==\"\"){\r\n            resource1Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n    }\r\n    if(resourceType2 !==null ){\r\n        resourceType2.innerHTML = tabOffline;\r\n        if(tabOffline==\"\"){\r\n            resource2Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n    }\r\n    if(resourceType3 !==null ){\r\n        resourceType3.innerHTML = tabArticle;\r\n        if(tabArticle==\"\"){\r\n            resource3Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n","let localStorageUserId = localStorage.getItem(\"userId\");\r\n// console.log(localStorageUserId);\r\n\r\nconst beforeLogin = document.querySelector('.beforeLogin');\r\nconst afterLogin = document.querySelector('.afterLogin');\r\n\r\nconst accountMenuImg = document.querySelector('.accountMenuImg');\r\nconst accountMenu = document.querySelector('.accountMenu');\r\n\r\nconst logOut = document.querySelector('.logOut');\r\n\r\n//如果有取得 userid  就表示有登入\r\nif(localStorageUserId == null || localStorageUserId==\"\"){\r\n    afterLogin.setAttribute(\"class\",\"d-none\");\r\n}else{\r\n    if(beforeLogin!==null){\r\n        beforeLogin.setAttribute(\"class\",\"d-none\");\r\n    }\r\n\r\n    //get userData\r\n    let userData=[];\r\n   \r\n    axios.get(`${url}/users?id=${localStorageUserId}`).then(res=>{\r\n        userData=res.data;\r\n        renderAccountMenu(userData);\r\n       \r\n    }).catch(err=>{\r\n        console.log(err.response);\r\n    })\r\n}\r\n\r\n\r\n//隱藏登入註冊, 顯示會員功能, 帶入相關會員資訊 , 切換至會員頁時帶入會員 id 資料等\r\n//將 userid 渲染至選單連結中\r\nfunction renderAccountMenu(userData){\r\n    let prefix = (userData[0].firstName)[0].toUpperCase();\r\n\r\n    let accountMenuImgStr=`\r\n    <span class=\"userImg d-inline-block bg-primary px-2 py-2 rounded-circle fw-bold fs-7 lh-1 text-white text-center\">${prefix}</span>`;\r\n    let accountMenuStr=`<li><a class=\"dropdown-item\" href=\"./acc_profile.html?userid=${localStorageUserId}\">個人資料</a></li>\r\n    <li><a class=\"dropdown-item\" href=\"./acc_resources.html?userid=${localStorageUserId}\">我的資源</a></li>\r\n    <li><a class=\"dropdown-item\" href=\"#\">我的募集</a></li>\r\n    <li><a class=\"dropdown-item\" href=\"#\">我的學習</a></li>\r\n    <li><a class=\"dropdown-item\" href=\"#\">設定</a></li>`;\r\n\r\n    accountMenuImg.innerHTML=accountMenuImgStr;\r\n    accountMenu.innerHTML=accountMenuStr;\r\n}\r\n\r\n\r\n//如果登出,就清空 localStorage userId\r\nlogOut.addEventListener(\"click\",e=>{\r\n    localStorage.setItem('accessToken', \"\");\r\n    localStorage.setItem('userId',\"\");\r\n    beforeLogin.setAttribute(\"class\",\"d-block\");\r\n    afterLogin.setAttribute(\"class\",\"d-none\");\r\n    location.href = \"./index.html\";\r\n})\r\n\r\n","\r\nconst loginAccount = document.querySelector('#loginAccount');\r\nconst loginPw = document.querySelector('#loginPw');\r\nconst btnLogin = document.querySelector('#btnLogin');\r\n// const signUpFormInputs = document.querySelectorAll('input.form-control');  //input\r\n\r\n\r\nfunction initLogin(){\r\n    getUserList();\r\n}\r\ninitLogin();\r\n\r\n\r\n//取得用戶清單\r\nlet usersData = [];\r\nfunction getUserList(){\r\n    axios.get(\"http://localhost:3000/users\").then(res=>{\r\n        usersData = res.data;\r\n    }).catch(err=>{\r\n        console.log(err.response);\r\n    })\r\n}\r\n\r\n//欄位檢查\r\nif(document.querySelector(\"#loginAccount\")!==null){\r\n    document.querySelector(\"#loginAccount\").addEventListener(\"change\",e=>{\r\n    if(loginAccount.value==\"\"){\r\n        document.querySelector('.account').textContent=\"請輸入帳號\";\r\n    }else{\r\n        document.querySelector('.account').textContent=\"\";\r\n    }\r\n    usersData.forEach(userItem=>{\r\n        if(userItem.email !==loginAccount.value){\r\n            document.querySelector('.account').textContent=\"此帳號不存在\";\r\n        }else{\r\n            document.querySelector('.account').textContent=\"\";\r\n        }\r\n    })\r\n})\r\n}\r\n\r\nif(document.querySelector(\"#loginPw\")!==null){\r\n    document.querySelector(\"#loginPw\").addEventListener(\"change\",e=>{\r\n        if(loginPw.value==\"\"){\r\n            document.querySelector('.password').textContent=\"請輸入密碼\";\r\n        }else{\r\n            document.querySelector('.password').textContent=\"\";\r\n        }\r\n    })\r\n}\r\n\r\nif(btnLogin!==null){\r\n\r\n    btnLogin.addEventListener(\"click\",e=>{\r\n    e.preventDefault();\r\n\r\n        if(loginAccount.value===\"\"||loginPw.value===\"\"){\r\n            return\r\n        }\r\n\r\n        if(document.querySelector('.account').textContent==\"\" && \r\n        document.querySelector('.password').textContent==\"\" ){\r\n\r\n            axios.post(\"http://localhost:3000/login\",{\r\n                \"email\":loginAccount.value,\r\n                \"password\":loginPw.value\r\n\r\n            }).then(res=>{\r\n                localStorage.setItem('accessToken', ` ${res.data.accessToken}`);\r\n                localStorage.setItem('userId', res.data.user.id);\r\n                location.href = \"./index.html\";\r\n\r\n            }).catch(err=>{\r\n                document.querySelector('.password').textContent=\"密碼錯誤\";\r\n                localStorage.clear();\r\n            })\r\n\r\n        }\r\n\r\n\r\n})\r\n}\r\n\r\n","let resId = location.href.split(\"=\")[1];\r\n\r\nfunction initResourcePage(){\r\n    getResourcesForResources();\r\n    getCommentData();\r\n    getResourcesItem(resId);\r\n    getResourcesComment(resId);\r\n}\r\ninitResourcePage();\r\n\r\nlet resourcesData = [];\r\nlet commentsData = [];\r\n\r\n//2. 取得資料\r\nfunction getResourcesForResources(){\r\n  axios.get(`${url}/resources`)\r\n  .then(res=>{\r\n    resourcesData = res.data;\r\n    //getCommentData();\r\n    renderRelatedResource();\r\n\r\n  }).catch(error=>{\r\n    console.log(error);\r\n  })\r\n}\r\n\r\nfunction getCommentData(){\r\n  axios.get(`${url}/comments`)\r\n  .then(res=>{\r\n    commentsData = res.data; \r\n    renderRelatedResource();\r\n  }).catch(error=>{\r\n    console.log(error);\r\n  })\r\n}\r\n\r\n\r\nlet resourceContent=[];\r\nlet resourceCommentData=[];\r\n\r\nfunction getResourcesItem(id){\r\n    axios.get(`${url}/resources?id=${id}&_expand=user`)\r\n    .then(res=>{\r\n        resourceContent = res.data;\r\n        renderResource();\r\n        renderRelatedResource();\r\n    \r\n    }).catch(error=>{\r\n      console.log(error);\r\n    })\r\n}\r\n\r\nfunction getResourcesComment(id){\r\n    axios.get(`${url}/comments?_expand=resouceId&&resourceId=${id}&&_expand=user`)\r\n    .then(res=>{\r\n        resourceCommentData = res.data;\r\n        renderResource();\r\n        renderComment();\r\n\r\n    }).catch(error=>{\r\n      console.log(error);\r\n    })\r\n}\r\n\r\n/******************資源資訊***********************/\r\n\r\nconst imageNBrief = document.querySelector('.imageNBrief');\r\nconst titleBox = document.querySelector('.titleBox');\r\nconst btnBox = document.querySelector('.btnBox');\r\n\r\n\r\nfunction renderResource(){\r\n    let renderItem=resourceContent[0];\r\n    let userName =\"\";\r\n\r\n    if(renderItem!==undefined){\r\n        if( renderItem.user.role===\"admin\"){\r\n            userName = \"admin\"\r\n        }else{\r\n            userName =`${renderItem.user.lastName} ${renderItem.user.firstName} `;\r\n        }\r\n\r\n        let commentScoreNum = getAverageScore();\r\n        let resultScore = commentScoreNum[0];\r\n        let commentNum = commentScoreNum[1];\r\n        let starStr = combineCommentStar(resultScore);\r\n\r\n        let imageNBriefStr=\"\";\r\n        let titleBoxStr=\"\";\r\n        let btnBoxStr=\"\";\r\n\r\n        if( renderItem.imgUrl ===\"\"){\r\n            renderItem.imgUrl = \"./assets/images/resources_cover/noimgCover.jpg\";\r\n        }\r\n\r\n        if(resultScore[resId]===undefined || starStr[resId]=== undefined ){\r\n            titleBoxStr = `<h2 class=\"fs-5 fw-bold mt-md-0 mt-3\">${renderItem.title}</h2>\r\n            <div class=\"d-flex flex-wrap align-items-center text-secondary\">\r\n                <span class=\"fs-8 fw-bold me-lg-2\">尚無評價</span>\r\n            </div>\r\n            <div class=\"classify fs-7\">\r\n                <ul class=\"d-flex \">\r\n                    <li class=\"me-2\">  ${renderItem.topics}</li>\r\n                    <li class=\"me-2\">  ${renderItem.type}</li>\r\n                    <li class=\"me-2\">  ${renderItem.level}</li>\r\n                    <li class=\"me-2\">  ${renderItem.price}</li>\r\n                </ul>\r\n                <ul>\r\n                    <li class=\"me-2\">  ${renderItem.lang} </li>\r\n                    <li class=\"me-2\">建立者 : ${userName} </li>\r\n                </ul>\r\n            </div>`;\r\n        }else{\r\n            titleBoxStr = `<h2 class=\"fs-5 fw-bold mt-md-0 mt-3\">${renderItem.title}</h2>\r\n            <div class=\"d-flex flex-wrap align-items-center text-secondary\">\r\n                <span class=\"fs-5 fw-bold me-lg-2\"> ${resultScore[resId]}</span>\r\n                <ul class=\"d-flex align-items-center lh-1 me-lg-2\">\r\n                ${starStr[resId]}\r\n                </ul>                                \r\n                <span class=\"fs-8\">(${commentNum[resId]})</span>\r\n            </div>\r\n            <div class=\"classify fs-7\">\r\n                <ul class=\"d-flex \">\r\n                    <li class=\"me-2\">  ${renderItem.topics}</li>\r\n                    <li class=\"me-2\">  ${renderItem.type}</li>\r\n                    <li class=\"me-2\">  ${renderItem.level}</li>\r\n                    <li class=\"me-2\">  ${renderItem.price}</li>\r\n                </ul>\r\n                <ul>\r\n                    <li class=\"me-2\">  ${renderItem.lang} </li>\r\n                    <li class=\"me-2\">建立者 : ${userName} </li>\r\n                </ul>\r\n            </div>`;\r\n        }\r\n\r\n\r\n        btnBoxStr = `\r\n        <a href=\"${renderItem.url}\" target=\"_blank\" type=\"button\" class=\"btn btn-sm btn-secondary my-2 text-white px-lg-4 py-2 fs-6\">前往資源</a>\r\n        <div class=\"d-flex justify-content-center flex-row flex-md-column flex-lg-row align-items-center\">                    \r\n            <a href=\"#\" role=\"button\" class=\"d-flex align-items-center me-2 \">\r\n                <span class=\"material-icons \">bookmark_border</span>\r\n                <!-- <span class=\"material-icons\">bookmark</span> -->\r\n                <span>收藏</span>\r\n            </a>\r\n\r\n            <a href=\"#\" role=\"button\" class=\" d-flex align-items-center me-2 \">\r\n                <span class=\"material-icons material-icons-outlined\">feedback</span>\r\n                <!-- <span class=\"material-icons\">feedback</span> -->\r\n                <span>回報</span>\r\n            </a>\r\n        </div>`;\r\n\r\n        imageNBriefStr = `\r\n        <img class=\"d-md-block d-none\" src=\"${renderItem.imgUrl}\" alt=\"${renderItem.title}\">\r\n                    <div class=\"mt-md-3 text-dark\">${renderItem.intro}</div>`;\r\n        \r\n        \r\n        if(imageNBrief!==null){\r\n            imageNBrief.innerHTML = imageNBriefStr;\r\n        }\r\n        if(titleBox!==null){\r\n            titleBox.innerHTML = titleBoxStr;\r\n        }\r\n        if(btnBox!==null){\r\n            btnBox.innerHTML = btnBoxStr;\r\n        }\r\n\r\n    }\r\n   \r\n}\r\n\r\n\r\n/******************資源評論***********************/\r\n\r\nconst commentList=document.querySelector('.resourceComment > .commentList');\r\n\r\n\r\nfunction renderComment(){\r\n\r\n    let commentStr=\"\";\r\n    let userName =\"\";\r\n    // console.log(resourceCommentData)\r\n\r\n    if(resourceCommentData.length===0){\r\n        const btnReadMore = document.querySelector('.btnReadMore');\r\n        if(btnReadMore!==null){\r\n            btnReadMore.setAttribute(\"class\",\"d-none\");\r\n        }\r\n    }\r\n    //let resultScore = getAverageScore();\r\n    let commentNum = 0;\r\n    resourceCommentData.forEach(item=>{\r\n        let resultScore = {\r\n            \"1\":`${item.score}`\r\n        };\r\n        let newResultScoreOjb = combineCommentStar(resultScore);\r\n\r\n        if(item.user.role===\"admin\"){\r\n            userName = \"admin\"\r\n        }else{\r\n            userName =`${item.user.lastName} ${item.user.firstName} `;\r\n        }\r\n\r\n        \r\n        let commentTimeAge = Ftime(item.commentTime);\r\n        commentStr+=`\r\n        <div class=\"col mb-3 position-relatvie\" style=\"z-index:10;\">\r\n            <div class=\"card card-body position-relatvie\" style=\"z-index:10;\">\r\n                <div class=\"d-flex p-lg-3 align-items-lg-center flex-column flex-lg-row justify-content-between\"> \r\n                    <h3 class=\"card-title fs-7 d-flex align-items-center justify-content-lg-start justify-content-between\">\r\n                        <img class=\"rounded-circle\" src=\"./assets/images/icon_image.png\" alt=\"\">\r\n                        <p class=\"mb-0 mx-2 text-start\">\r\n                            ${userName}<br/>\r\n                            <span class=\"fs-9 text-gray\">${item.user.title}</span>\r\n                        </p>\r\n                        \r\n                    </h3>\r\n                    <div class=\"d-flex flex-lg-column justify-content-between\">\r\n                        <ul class=\"card-text d-flex align-items-center lh-1\">\r\n                        ${newResultScoreOjb[1]}\r\n                        \r\n                        </ul> \r\n                        <p class=\"mb-0 text-end\">\r\n                            <span class=\"fs-9 text-gray\">${commentTimeAge}</span></p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"d-flex flex-column\">\r\n                    <div class=\"form-floating my-3\"> \r\n                        <p>${item.content}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"d-flex justify-content-between fs-8\">\r\n                    <!-- like & dislike -->\r\n                    <div class=\"d-flex align-items-center\">\r\n                        <a href=\"#\">\r\n                            <span class=\"material-icons-outlined fs-6\">thumb_up_alt</span></a>\r\n                        <span class=\"mx-2\">${item.likeNum}</span>\r\n                        <!-- <a href=\"#\">\r\n                        <span class=\"material-icons fs-6\">thumb_up_alt</span></a> -->\r\n\r\n                            <a href=\"#\">\r\n                            <span class=\"material-icons-outlined fs-6\">thumb_down_alt</span></a>\r\n                            <span class=\"mx-2\">${item.dislikeNum}</span>\r\n                            <!-- <a href=\"#\">\r\n                            <span class=\"material-icons fs-6\">thumb_down_alt</span></a> -->\r\n\r\n                    </div>\r\n\r\n                    <div class=\"position-relatvie\" >\r\n                        <a class=\"d-flex align-items-center\" data-bs-toggle=\"collapse\" href=\"#commentOffense${commentNum+1}\" role=\"button\" aria-expanded=\"false\" aria-controls=\"commentOffense\">\r\n                            <span class=\"material-icons-outlined\">report</span>\r\n                            <span>檢舉</span>\r\n                        </a>\r\n\r\n                        <div class=\"offenseItem border bg-light rounded-3 p-3 collapse position-absolute end-0\" id=\"commentOffense${commentNum+1}\" style=\"z-index:0;\">\r\n                            <div class=\"form-check\">\r\n                                <input class=\"form-check-input\" type=\"radio\" name=\"offenseItem\" id=\"offenseItem1\">\r\n                                <label class=\"form-check-label\" for=\"offenseItem1\">\r\n                                    偏離主題\r\n                                </label>\r\n                            </div>\r\n                            <div class=\"form-check\">\r\n                                <input class=\"form-check-input\" type=\"radio\" name=\"offenseItem\" id=\"offenseItem2\">\r\n                                <label class=\"form-check-label\" for=\"offenseItem2\">\r\n                                    垃圾內容及廣告宣傳\r\n                                </label>\r\n                            </div>\r\n                            <div class=\"form-check\">\r\n                                <input class=\"form-check-input\" type=\"radio\" name=\"offenseItem\" id=\"offenseItem3\">\r\n                                <label class=\"form-check-label\" for=\"offenseItem3\">\r\n                                    騷擾內容及不雅用語\r\n                                </label>\r\n                            </div>\r\n                            <button class=\"btn btn-primary btn-sm text-white\" type=\"submit\">送出</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div><!--end card-->\r\n        </div>`;\r\n\r\n        commentNum +=1;\r\n\r\n    })\r\n\r\n    if(commentList!==null){\r\n         commentList.innerHTML = commentStr;\r\n    }\r\n   \r\n\r\n}\r\n\r\n/******************相關資源***********************/\r\n\r\nconst relatedResource = document.querySelector('.relatedResource');\r\n\r\nfunction renderRelatedResource(){\r\n    let relatedStr=\"\";\r\n    let renderNum = 1;\r\n    \r\n    if(resourcesData!==undefined){\r\n        resourcesData.forEach(resItem=>{\r\n        let resultScore = getAverageScore();\r\n        let newResultScoreOjb = combineCommentStar(resultScore);\r\n        if(resourceContent.length!==0){\r\n            //console.log(resourceContent);\r\n            if(resItem.topics === resourceContent[0].topics \r\n                && resItem.id !== resourceContent[0].id){\r\n                renderNum +=1;   \r\n                if(renderNum <=5 ){\r\n                    if(resultScore[resItem.id]==undefined||newResultScoreOjb[resItem.id]==undefined){\r\n                        relatedStr+=`\r\n                        <div class=\"my-4\">\r\n                        <h4 class=\"fs-7\"><a href=\"./resource.html?id=${resItem.id}\" target=\"_blank\"> ${resItem.title}</a></h4>\r\n                            <div class=\"d-flex flex-wrap justify-content-start align-items-center\">\r\n                                <span class=\"fs-8 text-gray me-lg-2\">尚無評價</span>                           \r\n                            </div>\r\n                        </div>\r\n                        `;\r\n                    }else{\r\n                        relatedStr+=`\r\n                        <div class=\"my-4\">\r\n                        <h4 class=\"fs-7\"><a href=\"./resource.html?id=${resItem.id}\" target=\"_blank\"> ${resItem.title}</a></h4>\r\n                        <div class=\"d-flex flex-wrap justify-content-start align-items-center text-secondary\">\r\n                            <span class=\"fs-7 fw-bold me-lg-2\">${resultScore[resItem.id]}</span>\r\n                            <ul class=\"d-flex align-items-center lh-1 me-lg-2 \">\r\n                            ${newResultScoreOjb[resItem.id]}\r\n                            </ul>                                \r\n                        </div>\r\n                        </div>\r\n                        `;\r\n                    }\r\n                \r\n                    \r\n                } \r\n            }\r\n        }\r\n        \r\n        \r\n    })\r\n    }\r\n    \r\n\r\n    if(relatedResource!==null){\r\n        relatedResource.innerHTML = relatedStr;\r\n    }\r\n}","\n\n//1. 頁面初始化\nfunction initResourceList(){\n  getResourcesForResources();\n  getCommentData();\n  //changeResourceAverageScore();\n}\ninitResourceList();\n\n\n/*****************top ***************/\n\nconst bannerBlockTitle = document.querySelector('.bannerBlock > h2');\n\nif(resTopic!==undefined && bannerBlockTitle!==null){\n  bannerBlockTitle.textContent = resTopic;\n\n}\n\n/*****************入門推薦 ***************/\n\nconst foundation1Basic = document.querySelector('#foundation1Basic > div.row');\nconst foundation2Free = document.querySelector('#foundation2Free > div.row');\nconst foundation3CN = document.querySelector('#foundation3CN > div.row');\n\nlet resourcesData = [];\nlet commentsData = [];\nlet thisTopicData = [];\n\n//2. 取得資料\nfunction getResourcesForResources(){\n  axios.get(`${url}/resources`)\n  .then(res=>{\n    //resourcesData = res.data;\n    //console.log(resTopic);\n    resourcesData = res.data.filter(item=>{\n      return item.topics == resTopic;\n    })\n    // thisTopicData = resourcesData.filter(item=>{\n    //   return item.topics == resTopic;\n    // })\n    //console.log(thisTopicData);\n    renderFoundationRecommond();\n    renderFilterResultList();\n\n  }).catch(error=>{\n    console.log(error);\n  })\n}\n\nfunction getCommentData(){\n  axios.get(`${url}/comments`)\n  .then(res=>{\n    commentsData = res.data; \n  }).catch(error=>{\n    console.log(error);\n  })\n}\n\n\n// function getTopicData(){\n//   thisTopicData = resourcesData.filter(item=>{\n//     return item.topics = resTopic;\n//   })\n// }\n\n//3. 渲染入門推薦資料\nfunction renderFoundationRecommond(){\n\n  let commentScoreNum = getAverageScore();\n  let resultScore = commentScoreNum[0];\n  let commentNum = commentScoreNum[1];\n  let starStr = combineCommentStar(resultScore); //newResultScore\n\n  let itemNum1 = 0;\n  let itemNum2 = 0;\n  let itemNum3 = 0;\n  let renderMaxNum = 5;\n  //組各tab render HTML\n  let basicStr =\"\";\n  let freeStr=\"\";\n  let cnStr=\"\";\n\n  resourcesData.forEach( (item,index)=>{\n    \n   \n      if(item.level === \"初階\"){\n        if(itemNum1 <renderMaxNum){\n           basicStr += combineResouorceItem(item,resultScore,starStr,commentNum);\n           itemNum1+=1;\n        }\n         \n      }\n      \n      if(item.price === \"免費\"){\n        if(itemNum2 <renderMaxNum){\n          freeStr += combineResouorceItem(item,resultScore,starStr,commentNum); \n          itemNum2+=1;\n        }\n         \n      }\n      \n      item.lang.forEach(langItem=>{\n        if(langItem === \"繁體中文\"){\n          if(itemNum3 <renderMaxNum){\n            cnStr += combineResouorceItem(item,resultScore,starStr,commentNum);\n            itemNum3+=1;\n          }\n          \n        }\n      })\n    \n  })\n\n  if(foundation1Basic!==null){\n    foundation1Basic.innerHTML = basicStr;\n  }\n  \n  if(foundation2Free!==null){\n    foundation2Free.innerHTML = freeStr;\n  }\n  \n  if(foundation3CN!==null){\n    foundation3CN.innerHTML = cnStr;\n  }\n}\n\n\nfunction getAverageScore(){\n\nlet scoreTotal = {};  //每筆資源評價 總分\nlet resourceIdObj = {}; //每筆資源評價 筆數\nlet resultScore = {};  //每筆資源 平均分數(星星數)\n\n  commentsData.forEach(item=>{\n      if(resourceIdObj[item.resourceId] === undefined){\n          resourceIdObj[item.resourceId] = 1;\n          scoreTotal[item.resourceId] = item.score;\n         \n      }else{\n          resourceIdObj[item.resourceId] +=1;\n          scoreTotal[item.resourceId] += item.score;\n          \n      }\n      resultScore[item.resourceId] = (scoreTotal[item.resourceId] /  resourceIdObj[item.resourceId]).toFixed(1);\n\n  })\n  // console.log(\"resourceIdObj\",resourceIdObj);\n  // console.log(\"scoreTotal\",scoreTotal);\n  // console.log(\"resultScore\",resultScore);\n  return [resultScore,resourceIdObj];\n}\n\n//4. 組星星字串\nfunction combineCommentStar(resultScore){\n  //評論分數+星星+筆數 HTML\n  let newResultScore = {...resultScore};\n  let resourceIdArr = Object.keys(newResultScore);  //['1, '2, '3'] \n  let scoreArr = Object.values(newResultScore); //['4.0', '3.3', '4.5' ,'2.8'] \n\n  scoreArr.forEach((item,index)=>{\n    let starStr=\"\"; //星星HTML String\n    //星星數\n    for(let i=1; i<=item[0] ;i++){\n      starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star</span></li>`;\n      newResultScore[`${resourceIdArr[`${index}`]}`] = starStr;\n    }\n    \n    //半顆星星+空星星  \n      if(item[2]<=2){\n        for(let i=1; i<=(5-item[0]) ;i++){\n          starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star_outline</span></li> `;\n          newResultScore[`${resourceIdArr[`${index}`]}`] = starStr;\n        }\n        \n      }else if(item[2] >=3 && item[2] <=7){\n          starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star_half</span></li>`;\n          for(let i=1; i<=(5-item[0]-1) ;i++){\n            starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star_outline</span></li>`;\n          }\n          newResultScore[`${resourceIdArr[`${index}`]}`] = starStr;\n       \n      }else if(item[2]>=8){\n          starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star</span></li`;\n        for(let i=1; i<=(5-item[0]-1) ;i++){\n          starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star_outline</span></li>`;\n          newResultScore[`${resourceIdArr[`${index}`]}`] = starStr;\n        }\n      }\n\n  })\n  return newResultScore;\n}\n\n//5. 入門推薦組單一資源項目html\nfunction combineResouorceItem(item,resultScore,starStr,commentNum){\n\n  if( item.imgUrl ===\"\"){\n    item.imgUrl = \"./assets/images/resources_cover/noimgCover.jpg\";\n  }\n\n  if(resultScore[item.id]===undefined || starStr[item.id]=== undefined || commentNum[item.id]=== undefined ){\n\n    return  `\n    <div class=\"col-lg-2 col-md-4 col-6\">\n    <div>\n        <p class=\"text-center\">\n            <a href=\"./resource.html?id=${item.id}\" target=\"_blank\">\n            <img src=\"${item.imgUrl}\" alt=\"${item.title}\" onerror=\"this.src=./assets/images/resources_cover/noimgCover.jpg\"></a></p>\n        <div class=\"p-2\">\n            <h4 class=\"fs-7 ellipsis\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"> ${item.title}</a></h4>\n            <div class=\"d-flex flex-wrap justify-content-between align-items-center\">                             \n                <span class=\"fs-8 text-gray\"> 尚無評價 </span>\n            </div>\n  \n        </div>\n    </div>\n    </div>\n    `;\n  }else{\n    return  `\n      <div class=\"col-lg-2 col-md-4 col-6\">\n      <div>\n          <p class=\"text-center\">\n              <a href=\"./resource.html?id=${item.id}\" target=\"_blank\">\n              <img src=\"${item.imgUrl}\" alt=\"${item.title}\" onerror=\"this.src=./assets/images/resources_cover/noimgCover.jpg\"></a></p>\n          <div class=\"p-2\">\n              <h4 class=\"fs-7 ellipsis\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"> ${item.title}</a></h4>\n\n              <div class=\"d-flex flex-wrap justify-content-between align-items-center text-secondary\">\n                  <span class=\"fs-7 fw-bold me-lg-2\"> ${resultScore[item.id]}</span>\n                  <ul class=\"d-flex align-items-center lh-1 me-lg-2\">\n                  ${starStr[item.id]}\n                  </ul>                                \n                  <span class=\"fs-8\">(${commentNum[item.id]})</span>\n              </div>\n\n          </div>\n      </div>\n      </div>\n      `;\n  }\n      \n}\n\n/***************** 相關主題 ***************/\n\n\n\n/***************** 資源篩選 ***************/\n\nconst resourceItem = document.querySelector('.resourceItem');\nconst filterItemInput = document.querySelectorAll('.filterItem > input');  \n\nlet checkObj={};\nlet renderList=[];\n\n// checked 監聽 : 取得 checked 清單的關鍵字 + render\nfilterItemInput.forEach((item,index)=>{\n\n  item.addEventListener(\"change\",e=>{\n    let filterKeyword = item.getAttribute(\"name\");\n    let groupName = item.getAttribute(\"data-group\");\n    console.log(filterKeyword,groupName);\n\n    if (e.target.checked) {\n      if(checkObj[groupName]===undefined){\n        checkObj[groupName]=[];\n        checkObj[groupName].push(filterKeyword);\n      }else{\n        checkObj[groupName].push(filterKeyword);\n      }\n    }else {\n        checkObj[groupName] = checkObj[groupName].filter(item=>{\n          return filterKeyword !=item;\n        })  \n        if(checkObj[groupName].length===0){\n          delete checkObj[groupName];\n        }\n    }\n\n    //  console.log(\"checkObj\");\n    //  console.log(checkObj);\n\n    renderList = resourcesData.filter(resItem=>{\n      \n      let hasType = true ;  \n      let hasLevel =true;\n      let hasPrice =true;\n      let checkLang = true;\n  \n      if(checkObj.type){\n        hasType = checkObj.type.includes(resItem.type);\n      }\n      if(checkObj.level){\n        hasLevel = checkObj.level.includes(resItem.level);\n      }\n      if(checkObj.price){\n        hasPrice = checkObj.price.includes(resItem.price);\n      }\n  \n      checkLang = resItem.lang.some((str) => {\n        //console.log(str);\n        if (!checkObj.lang) {\n          return true;\n        }\n        return checkObj.lang.includes(str);\n      });\n  \n      return hasType && hasLevel && hasPrice && checkLang ;\n  \n    })\n    // console.log(renderList);\n    renderFilterResultList(); \n\n  })\n})\n\n\n\nfunction renderFilterResultList(){ \n\n  let commentScoreNum = getAverageScore();\n  let resultScore = commentScoreNum[0];\n  let commentNum = commentScoreNum[1];\n  let starStr = combineCommentStar(resultScore);\n\n    let renderfilterStr=\"\";\n    if(renderList.length===0){\n      resourcesData.forEach(renderItem=>{\n        renderfilterStr += combineResouorceItemType2(renderItem,resultScore,starStr,commentNum);\n      })\n\n      if(resultNumber!==undefined){\n        resultNumber.setAttribute(\"class\",\"d-none\");\n      }\n      if(clearBtnText!==undefined){\n        clearBtnText.setAttribute(\"class\",\"d-none\");\n      }\n      \n\n      if(checkObj.type !== undefined || checkObj.level !== undefined || checkObj.price !== undefined || checkObj.lang !== undefined ){\n        renderfilterStr = \"沒有符合條件的項目\";\n      }\n    }else{\n      if(resultNumber!==undefined){\n         resultNumber.setAttribute(\"class\",\"d-inline-block\");\n          resultNumber.textContent = `${renderList.length} 個篩選結果`;\n      }\n      if(clearBtnText!==undefined){\n        clearBtnText.setAttribute(\"class\",\"d-inline-block\");\n      }\n      \n    \n      if(checkObj.type==undefined && checkObj.level==undefined && checkObj.price==undefined && checkObj.lang==undefined ){\n        resultNumber.setAttribute(\"class\",\"d-none\");\n        clearBtnText.setAttribute(\"class\",\"d-none\");\n      }\n\n      clearFilter();\n      \n\n      renderList.forEach(renderItem=>{\n        renderfilterStr += combineResouorceItemType2(renderItem,resultScore,starStr,commentNum);\n      })\n    }\n\n    if(resourceItem!==null){\n      resourceItem.innerHTML = renderfilterStr;\n    }\n}\n\n\nfunction combineResouorceItemType2(renderItem,resultScore,starStr,commentNum){\n  if( renderItem.imgUrl ===\"\"){\n    renderItem.imgUrl = \"./assets/images/resources_cover/noimgCover.jpg\";\n  }\n\n  if(resultScore[renderItem.id]===undefined || starStr[renderItem.id]=== undefined || commentNum[renderItem.id]=== undefined ){\n    return `<div class=\"row my-3 \">\n    <div class=\"col-2 \">\n      <a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\"><img src=\"${renderItem.imgUrl}\" alt=\"${renderItem.title}\"></a>\n    </div>\n      <div class=\"col-6\">\n          <h4 class=\"fs-7\"><a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\">${renderItem.title}</a></h4>\n          <div class=\"d-flex flex-wrap align-items-center\">\n              <span class=\"fs-8 text-gray fw-bold me-lg-2\"> 尚無評價</span>\n              <p class=\"text-dark fs-8\" >test:${renderItem.type}, ${renderItem.level} , ${renderItem.price}, ${renderItem.lang} </p>\n          </div>\n      </div>\n      <div class=\"col-4\">\n          <div class=\"d-flex flex-column flex-lg-row  align-items-end\">\n              <a href=\"${renderItem.url}\" target=\"_blank\" role=\"button\" class=\"btn btn-tiffany my-2 w-75 mx-2\">前往資源</a>\n              <a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\" role=\"button\" class=\"btn btn-yellowBrown my-2 w-75 mx-2\">查看內容</a>\n          </div>\n      </div>\n    </div>`;\n  }else{\n    return `<div class=\"row my-3 \">\n  <div class=\"col-2 \">\n     <a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\"><img src=\"${renderItem.imgUrl}\" alt=\"${renderItem.title}\"></a>  \n  </div>\n    <div class=\"col-6\">\n     <h4 class=\"fs-7\"><a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\">${renderItem.title}</a></h4>\n        <div class=\"d-flex flex-wrap align-items-center text-secondary\">\n            <span class=\"fs-7 fw-bold me-lg-2\"> ${resultScore[renderItem.id]}</span>\n            <ul class=\"d-flex align-items-center lh-1 me-lg-2  \">\n            ${starStr[renderItem.id]}\n            </ul>                                \n            <span class=\"fs-8\">(${commentNum[renderItem.id]})</span>\n            <p class=\"text-dark fs-8\">test ${renderItem.type}, ${renderItem.level} , ${renderItem.price}, ${renderItem.lang} </p>\n        </div>\n    </div>\n    <div class=\"col-4\">\n        <div class=\"d-flex flex-column flex-lg-row  align-items-end\">\n          <a href=\"${renderItem.url}\" target=\"_blank\" role=\"button\" class=\"btn btn-tiffany my-2 w-75 mx-2\">前往資源</a>\n          <a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\" role=\"button\" class=\"btn btn-yellowBrown my-2 w-75 mx-2\">查看內容</a>\n        </div>  \n    </div>\n  </div>\n      `;\n  }\n  \n}\n\n\n\n/***************** n 筆結果 / 清除篩選 / 排序 ***************/\n\nconst resultNumber = document.querySelector('.resultNumber');\nconst clearBtnText = document.querySelector('.clearBtnText');\nconst clearFilterBtn = document.querySelector('#clearFilterBtn');\nconst resourceSort = document.querySelector('#resourceSort');\n\nfunction clearFilter(){\n  clearFilterBtn.addEventListener(\"click\",e=>{\n    if(checkObj.type){\n      delete checkObj.type;\n    }\n    if(checkObj.level){\n      delete checkObj.level;\n    }\n    if(checkObj.price){\n      delete checkObj.price;\n    }\n    if(checkObj.lang){\n      delete checkObj.lang;\n    }\n    filterItemInput.forEach(item=>{\n      item.checked = false;\n    })\n    renderFilterResultList();\n    console.log(\"click check\");\n    console.log(checkObj);\n  })\n  \n}\n\n\n\n\n","const signUpForm = document.querySelector('form.signUpForm');  //form\r\n\r\nconst signupLastName = document.querySelector('#signupLastName');\r\nconst signupfirstName = document.querySelector('#signupfirstName');\r\nconst signupMail = document.querySelector('#signupMail');\r\nconst signupPw = document.querySelector('#signupPw');\r\nconst signupPwConfirm = document.querySelector('#signupPwConfirm');\r\n\r\nconst signUpFormInputs = document.querySelectorAll('input.signupInput');  //input\r\nconst btnSignUp = document.querySelector('#btnSignUp');\r\n\r\n//console.log(signUpFormInputs);\r\n\r\n\r\nfunction initSignup(){\r\n    getUserList();\r\n}\r\ninitSignup();\r\n\r\n\r\n\r\n//驗證欄位內容\r\nconst constraints ={\r\n    lastname:{\r\n        presence: {message: \"必填欄位\"},\r\n    },\r\n    firstname:{\r\n        presence: {message: \"必填欄位\"},\r\n    },\r\n    email:{\r\n        presence: {message: \"必填欄位\"},\r\n        email:{\r\n            email:true,\r\n            message: \"請填寫正確的信箱格式\"\r\n        },\r\n       \r\n    },\r\n    password:{\r\n        presence: {message: \"必填欄位\"},\r\n        length: {\r\n            minimum: 5, \r\n            message: \"密碼長度請大於5\"\r\n        }\r\n    },\r\n    confirmpw:{\r\n        presence: {message: \"必填欄位\"},\r\n        equality:{\r\n            attribute:\"password\",\r\n            message: \"與前者輸入密碼不同\",\r\n            // comparator: function(v1, v2) {\r\n            //     return v1 === v2;\r\n            //   }\r\n        }\r\n    }\r\n}\r\n\r\n\r\nsignUpFormInputs.forEach(item=>{\r\n    item.addEventListener(\"change\",e=>{\r\n       \r\n        item.nextElementSibling.textContent = '';\r\n        let errors = validate(signUpForm, constraints);\r\n        console.log(item.value);\r\n\r\n        \r\n        usersData.forEach(userItem=>{\r\n            if(userItem.email===signupMail.value){\r\n                // console.log(userItem.email);\r\n                // console.log(signupMail.value);\r\n                document.querySelector('.email').textContent = \"此信箱已存在\"         \r\n                //return;\r\n            }else{\r\n                document.querySelector('.email').textContent =\"\";\r\n                //item.nextElementSibling.textContent = \"\"\r\n            }\r\n        })\r\n    \r\n        //有錯就呈現在畫面上\r\n        if (errors) {\r\n          Object.keys(errors).forEach( keys=> {\r\n            //console.log(keys);\r\n            document.querySelector(`.${keys}`).textContent = errors[keys][0].split(\" \")[1];\r\n          });\r\n        }\r\n    })\r\n})\r\n\r\n\r\n\r\n//取得用戶清單\r\nlet usersData = [];\r\nfunction getUserList(){\r\n    axios.get(\"http://localhost:3000/users\").then(res=>{\r\n        usersData = res.data\r\n    }).catch(err=>{\r\n        console.log(err.response);\r\n    })\r\n}\r\n\r\n\r\n//註冊 post\r\nif(btnSignUp!==null){\r\n    btnSignUp.addEventListener(\"click\",e=>{\r\n    e.preventDefault();\r\n\r\n    if(signupLastName.value===\"\"||signupfirstName.value===\"\"||signupMail.value===\"\"||signupPw.value===\"\"||signupPwConfirm.value===\"\"){\r\n        console.log(\"有空欄位\");\r\n        console.log(\"signupLastName:\",signupLastName.value);\r\n        console.log(\"signupfirstName:\",signupfirstName.value);\r\n        console.log(\"signupMail:\",signupMail.value);\r\n        console.log(\"signupPw:\",signupPw.value);\r\n        console.log(\"signupPwConfirm:\",signupPwConfirm.value);\r\n        return;\r\n    }\r\n\r\n    // usersData.forEach(item=>{\r\n    //     if(item.email===signupMail.value){\r\n    //         document.querySelector('.email').textContent = \"此信箱已存在\"\r\n    //         return;\r\n    //     }else{\r\n    //         document.querySelector('.email').textContent =\"\";\r\n    //     }\r\n    // })\r\n\r\n    signUpFormInputs.forEach(item=>{\r\n        if(item.nextElementSibling.textContent !== '' ){\r\n            console.log(\"有錯誤訊息\");\r\n            return;\r\n        }\r\n    })\r\n\r\n    if(signupPw.value!== signupPwConfirm.value){\r\n        return;\r\n    }\r\n\r\n    axios.post(\"http://localhost:3000/users\",{\r\n        \"lastName\": signupLastName.value,\r\n        \"firstName\": signupfirstName.value,\r\n        \"email\": signupMail.value,\r\n        \"password\": signupPw.value,\r\n        \"role\": \"user\",\r\n        \"title\":\"\",\r\n        \"experiences\":\"\",\r\n        \"links\":{\"websiteUrl\":\"\"}\r\n\r\n    }).then(res=>{\r\n        console.log(res.data);\r\n        alert('成功註冊')\r\n        // document.querySelector('#signupLastName').value=\"\";\r\n        // document.querySelector('#signupfirstName').value=\"\";\r\n        // document.querySelector('#signupMail').value=\"\";\r\n        // document.querySelector('#signupPw').value=\"\";\r\n        // document.querySelector('#signupPwConfirm').value=\"\";\r\n        location.href ='./login.html';\r\n\r\n    }).catch(err=>{\r\n        console.log(err.response);\r\n    })\r\n\r\n})\r\n}\r\n\r\n\r\n","\r\n\r\nfunction Ftime (timespan) {\r\n    var dateTime = new Date(timespan * 1000);\r\n    var year = dateTime.getFullYear();\r\n    var month = dateTime.getMonth() + 1;\r\n    var day = dateTime.getDate();\r\n    var hour = dateTime.getHours();\r\n    var minute = dateTime.getMinutes();\r\n   \r\n    var now = Date.parse(new Date());  //typescript轉換\r\n    var milliseconds = 0;\r\n    var timeSpanStr;\r\n    //時間差\r\n    milliseconds = (now / 1000) - timespan;\r\n\r\n    // < 1min\r\n    if (milliseconds <= 60) {\r\n        timeSpanStr = '剛剛';\r\n    }\r\n    // > 1min < 60min\r\n    else if (60 < milliseconds && milliseconds <= 60 * 60) {\r\n        timeSpanStr = Math.ceil((milliseconds / (60))) + '分鐘前';\r\n    }\r\n    // >1hr < 24hr \r\n    else if (60 * 60 < milliseconds && milliseconds <= 60 * 60 * 24) {\r\n        timeSpanStr = Math.ceil(milliseconds / (60 * 60)) + '小時前';\r\n    }\r\n    // >1day > 15day \r\n    else if (60 * 60 * 24 < milliseconds && milliseconds <= 60 * 60 * 24 * 30) {\r\n        timeSpanStr = Math.ceil(milliseconds / (60 * 60 * 24)) + '天前';\r\n    }\r\n    // > 1month < 12 month \r\n    else if (60 * 60 * 24 * 30 < milliseconds && milliseconds <= 60 * 60 * 24 * 30 * 12){\r\n        timeSpanStr = Math.ceil(milliseconds / (60 * 60 * 24 * 30)) + '個月前';\r\n    }\r\n    // > 1year\r\n    else {\r\n        timeSpanStr = year + '年' + month + '月' + day + '日 ' + hour + ':' + minute;   \r\n    }\r\n    return timeSpanStr;\r\n}\r\n\r\n\r\n//  https://beltxman.com/1576.html\r\n"]}