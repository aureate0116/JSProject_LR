{"version":3,"sources":["all.js","comment.js","config.js","index.js","resource.js","resource_list.js","timestamp.js"],"names":["url","locationHref","location","href","split","resTopic","resId","pageClassify","initIndex","getResourcesForIndex","undefined","goodRate1","document","querySelector","goodRate2","goodRate3","goodRate1Tab","goodRate2Tab","goodRate3Tab","resourceType1","resourceType2","resourceType3","resource1Tab","resource2Tab","resource3Tab","resourcesData","commentsData","axios","get","then","res","data","renderGoodRateList","renderNewFreeList","error","console","log","getCommentForIndex","resultScore","getAverageScore","newResultScoreOjb","combineCommentStar","itemNum1","itemNum2","itemNum3","renderMaxNum","tabJS","tabHtml","tabPython","forEach","item","index","topics","combineResouorceItemType1","resourceIdObj","setAttribute","innerHTML","imgUrl","id","title","tabOnline","tabOffline","tabArticle","classify","price","type","combineResouorceItem","initResourcePage","getResourcesForResources","getCommentData","getResourcesItem","getResourcesComment","renderRelatedResource","resourceContent","resourceCommentData","renderResource","renderComment","imageNBrief","titleBox","btnBox","renderItem","userName","user","role","lastName","firstName","imageNBriefStr","titleBoxStr","btnBoxStr","level","lang","length","intro","commentList","commentStr","btnReadMore","commentNum","score","commentTimeAge","Ftime","commentTime","content","likeNum","dislikeNum","relatedResource","relatedStr","renderNum","resItem","initResourceList","bannerBlockTitle","textContent","foundation1Basic","foundation2Free","foundation3CN","renderFoundationRecommond","renderFilterResultList","basicStr","freeStr","cnStr","langItem","scoreTotal","resourceId","toFixed","newResultScore","resourceIdArr","Object","keys","scoreArr","values","starStr","i","resourceItem","filterItemInput","querySelectorAll","newResourcesRenderList","getRenderList","tempRenderList","groupNameArr","addToTempRenderList","filterKeyword","groupName","resIndex","langth","push","set","Set","filter","has","add","removeFromTempRenderList","splice","inputItem","addEventListener","e","target","getAttribute","checked","nameItem","tempItem","filterCheckedArr","filterKeywords","arrItem","resourcesRenderList","langItemStr","checkedItem","renderfilterStr","finalRenderList","resultNumber","clearFilterBtn","resourceSort","filterAndSort","filterResultNum","timespan","dateTime","Date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","now","parse","milliseconds","timeSpanStr","Math","ceil"],"mappings":"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","file":"all.js","sourcesContent":["// let commentsData = [];\n// function getAllComment(){\n//     axios.get(`${url}/comments`)\n//     .then(res=>{\n//         commentsData = res.data;\n//         console.log(commentsData);\n    \n//     }).catch(error=>{\n//       console.log(error);\n//     })\n// }\n\n\n/*****************nab tab***************/\n//hover 切換\n// const navItem = document.querySelectorAll(\".goodRate .nav-link\");\n// const tabContent = document.querySelectorAll(\".goodRate .tab-pane\");\n// console.log(navItem);\n// console.log(tabContent);\n\n// navItem.forEach((value,index)=>{\n//   value.addEventListener('mouseover',(e)=>{\n//     console.log(\"tt\",e.target.getAttribute(\"id\"));\n\n//     let labelledby = tabContent[index].getAttribute(\"aria-labelledby\");\n    \n//     //console.log(tabContent[index].classList);\n  \n//     if(e.target.getAttribute(\"id\") == labelledby ){\n//       //console.log(\"yes\");\n//       tabContent[index].classList.add(\"show\");\n//       console.log(tabContent[index].classList);\n\n//     }\n//   })\n\n// })\n\n\n","","const url=\"http://localhost:3000\";\r\n// const url=\"./json/db.json\"\r\n// const url=\"http://localhost:3000/users\"\r\n// const url=\"http://localhost:3000/resources\"\r\n// const url=\"http://localhost:3000/bookmarks\"\r\n// const url=\"http://localhost:3000/comments\"\r\n","let locationHref = location.href.split(\"/\");\r\nlet resTopic = location.href.split(\"=\")[1];\r\nlet resId = location.href.split(\"=\")[1];\r\nlet pageClassify = locationHref[3].split(\".html\")[0];\r\n\r\n// console.log(\"pageClassify\",pageClassify);\r\n// console.log(\"locationHref\",locationHref);\r\n\r\n//1. 頁面初始化\r\nfunction initIndex(){\r\n    getResourcesForIndex();\r\n    if(pageClassify==\"resource\"){\r\n        if(resId == undefined){\r\n            location.href = `./index.html`;\r\n        }\r\n    }\r\n    else if(pageClassify==\"resource_list\"){\r\n        if(resTopic == undefined){\r\n            location.href = `./index.html`;\r\n        }\r\n    }\r\n}\r\ninitIndex();\r\n\r\n//好評推薦\r\nconst goodRate1 = document.querySelector('#goodRate1 > div.row');\r\nconst goodRate2 = document.querySelector('#goodRate2 > div.row');\r\nconst goodRate3 = document.querySelector('#goodRate3 > div.row');\r\nconst goodRate1Tab = document.querySelector('#goodRate1-tab');\r\nconst goodRate2Tab = document.querySelector('#goodRate2-tab');\r\nconst goodRate3Tab = document.querySelector('#goodRate3-tab');\r\n\r\n//最新免費資源\r\nconst resourceType1 = document.querySelector('#resourceType1 > div.row');\r\nconst resourceType2 = document.querySelector('#resourceType2 > div.row');\r\nconst resourceType3 = document.querySelector('#resourceType3 > div.row');\r\nconst resource1Tab = document.querySelector('#resource1-tab');\r\nconst resource2Tab = document.querySelector('#resource2-tab');\r\nconst resource3Tab = document.querySelector('#resource3-tab');\r\n\r\n\r\nlet resourcesData = [];\r\nlet commentsData = [];\r\n\r\n//取得資源資料\r\nfunction getResourcesForIndex(){\r\n  axios.get(`${url}/resources`)\r\n  .then(res=>{\r\n    resourcesData = res.data;\r\n    renderGoodRateList();\r\n    renderNewFreeList();\r\n  \r\n  }).catch(error=>{\r\n    console.log(error);\r\n  })\r\n}\r\n\r\nfunction getCommentForIndex(){\r\n    axios.get(`${url}/comments`)\r\n    .then(res=>{\r\n      commentsData = res.data;\r\n    \r\n    }).catch(error=>{\r\n      console.log(error);\r\n    })\r\n}\r\n\r\n//渲染好評推薦資料\r\nfunction renderGoodRateList(){\r\n    let resultScore = getAverageScore();\r\n    let newResultScoreOjb = combineCommentStar(resultScore); \r\n    let itemNum1 = 0;\r\n    let itemNum2 = 0;\r\n    let itemNum3 = 0;\r\n    let renderMaxNum = 6;\r\n    let tabJS =\"\";\r\n    let tabHtml=\"\";\r\n    let tabPython=\"\";\r\n\r\n    resourcesData.forEach( (item,index)=>{\r\n        // console.log(\"resultScore\");\r\n        // console.log(resultScore);\r\n        switch (item.topics){\r\n            case \"JavaScript\" :\r\n                if(itemNum1 <renderMaxNum){\r\n                    tabJS += combineResouorceItemType1(item,index,resultScore,newResultScoreOjb,resourceIdObj);\r\n                   itemNum1 +=1;\r\n                }\r\n                break;\r\n\r\n            case \"HTML/CSS\" :\r\n                if(itemNum2 < renderMaxNum){\r\n                    tabHtml += combineResouorceItemType1(item,index,resultScore,newResultScoreOjb,resourceIdObj);\r\n                    itemNum2+=1;\r\n                }\r\n                break;\r\n\r\n            case \"Python\" :\r\n                if(itemNum3 < renderMaxNum){\r\n                     tabPython += combineResouorceItemType1(item,index,resultScore,newResultScoreOjb,resourceIdObj);\r\n                itemNum3+=1\r\n                }\r\n               \r\n                break;\r\n        }\r\n    })\r\n\r\n    if(goodRate1 !==null ){\r\n        if(tabJS==\"\"){\r\n            goodRate1Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n        goodRate1.innerHTML = tabJS;\r\n    }\r\n    if(goodRate2 !==null ){\r\n        if(tabHtml==\"\"){\r\n            goodRate2Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n        goodRate2.innerHTML = tabHtml;\r\n    }\r\n    if(goodRate3 !==null ){\r\n        if(tabPython==\"\"){\r\n            goodRate3Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n        goodRate3.innerHTML = tabPython;\r\n    }\r\n\r\n}\r\n\r\n\r\n//組單一資源項目html - type 1\r\nfunction combineResouorceItemType1(item,index,resultScore,newResultScoreOjb,resourceIdObj){\r\n\r\n  if( item.imgUrl ===\"\"){\r\n    item.imgUrl = \"./assets/images/resources_cover/noimgCover.jpg\";\r\n  }\r\n\r\n  if(resultScore[`${index+1}`]===undefined || newResultScoreOjb[item.id]=== undefined || resourceIdObj[`${index+1}`]=== undefined ){\r\n\r\n    return  `\r\n    <div class=\"col-md-6 col-lg-4\">\r\n    <div class=\"d-flex p-2 align-items-center\">\r\n        <div class=\"row\">\r\n            <div class=\"col-6\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"><img src=\"${item.imgUrl}\" alt=\"${item.title}\" onerror=\"this.src=./assets/images/resources_cover/noimgCover.jpg\"></a></div>\r\n            \r\n            <div class=\"col-6\">\r\n                <h4 class=\"ellipsis\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"> ${item.title}</a></h4>\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                尚無評價\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n         \r\n        \r\n    </div>\r\n    </div>\r\n    `;\r\n  }else{\r\n    return  `\r\n    <div class=\"col-md-6 col-lg-4\">\r\n    <div class=\"d-flex p-2 align-items-center\">\r\n        <div class=\"row\">\r\n            <div class=\"col-6\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"><img src=\"${item.imgUrl}\" alt=\"${item.title}\" onerror=\"this.src=./assets/images/resources_cover/noimgCover.jpg\"></a></div>\r\n\r\n            <div class=\"col-6\">\r\n                <h4 class=\"ellipsis\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"> ${item.title}</a></h4>\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                    <span class=\"fs-6 fw-bold\"> ${resultScore[`${index+1}`]}</span>\r\n                    <ul class=\"d-flex align-items-center lh-1\">\r\n                    ${newResultScoreOjb[item.id]}\r\n                    </ul>                                \r\n                    <span class=\"fs-7\">(${resourceIdObj[`${index+1}`]})</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    </div>\r\n    </div>`;\r\n  }\r\n      \r\n}\r\n\r\n//渲染最新免費資源\r\nfunction renderNewFreeList(){\r\n    let resultScore = getAverageScore();\r\n    let newResultScoreOjb = combineCommentStar(resultScore); //newResultScore\r\n\r\n    let tabOnline =\"\";\r\n    let tabOffline=\"\";\r\n    let tabArticle=\"\";\r\n\r\n    resourcesData.forEach( (item,index)=>{\r\n        if(item.classify.price===\"免費\"){\r\n            if(item.classify.type===\"線上課程\"){\r\n                tabOnline += combineResouorceItem(item,index,resultScore,newResultScoreOjb,resourceIdObj);\r\n            }\r\n\r\n            if(item.classify.type===\"實體課程\"){\r\n                tabOffline += combineResouorceItem(item,index,resultScore,newResultScoreOjb,resourceIdObj);\r\n            }\r\n\r\n            if(item.classify.type===\"文章\"){\r\n                tabArticle += combineResouorceItem(item,index,resultScore,newResultScoreOjb,resourceIdObj);\r\n            }\r\n        }\r\n \r\n    })\r\n\r\n    if(resourceType1 !==null ){\r\n        resourceType1.innerHTML = tabOnline;\r\n        if(tabOnline==\"\"){\r\n            resource1Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n    }\r\n    if(resourceType2 !==null ){\r\n        resourceType2.innerHTML = tabOffline;\r\n        if(tabOffline==\"\"){\r\n            resource2Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n    }\r\n    if(resourceType3 !==null ){\r\n        resourceType3.innerHTML = tabArticle;\r\n        if(tabArticle==\"\"){\r\n            resource3Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n","let resId = location.href.split(\"=\")[1];\r\n\r\nfunction initResourcePage(){\r\n    getResourcesForResources();\r\n    getCommentData();\r\n    getResourcesItem(resId);\r\n    getResourcesComment(resId);\r\n}\r\ninitResourcePage();\r\n\r\nlet resourcesData = [];\r\nlet commentsData = [];\r\n\r\n//2. 取得資料\r\nfunction getResourcesForResources(){\r\n  axios.get(`${url}/resources`)\r\n  .then(res=>{\r\n    resourcesData = res.data;\r\n    //getCommentData();\r\n    renderRelatedResource();\r\n\r\n  }).catch(error=>{\r\n    console.log(error);\r\n  })\r\n}\r\n\r\nfunction getCommentData(){\r\n  axios.get(`${url}/comments`)\r\n  .then(res=>{\r\n    commentsData = res.data; \r\n    renderRelatedResource();\r\n  }).catch(error=>{\r\n    console.log(error);\r\n  })\r\n}\r\n\r\n\r\nlet resourceContent=[];\r\nlet resourceCommentData=[];\r\n\r\nfunction getResourcesItem(id){\r\n    axios.get(`${url}/resources?id=${id}&_expand=user`)\r\n    .then(res=>{\r\n        resourceContent = res.data;\r\n        renderResource();\r\n        renderRelatedResource();\r\n    \r\n    }).catch(error=>{\r\n      console.log(error);\r\n    })\r\n}\r\n\r\nfunction getResourcesComment(id){\r\n    axios.get(`${url}/comments?_expand=resouceId&&resourceId=${id}&&_expand=user`)\r\n    .then(res=>{\r\n        resourceCommentData = res.data;\r\n        renderResource();\r\n        renderComment();\r\n\r\n    }).catch(error=>{\r\n      console.log(error);\r\n    })\r\n}\r\n\r\n/******************資源資訊***********************/\r\n\r\nconst imageNBrief = document.querySelector('.imageNBrief');\r\nconst titleBox = document.querySelector('.titleBox');\r\nconst btnBox = document.querySelector('.btnBox');\r\n\r\n\r\nfunction renderResource(){\r\n    let renderItem=resourceContent[0];\r\n    let userName =\"\";\r\n\r\n    if(renderItem!==undefined){\r\n        if( renderItem.user.role===\"admin\"){\r\n            userName = \"admin\"\r\n        }else{\r\n            userName =`${renderItem.user.lastName} ${renderItem.user.firstName} `;\r\n        }\r\n\r\n        let resultScore = getAverageScore();\r\n        let newResultScoreOjb = combineCommentStar(resultScore);\r\n\r\n        let imageNBriefStr=\"\";\r\n        let titleBoxStr=\"\";\r\n        let btnBoxStr=\"\";\r\n\r\n        if( renderItem.imgUrl ===\"\"){\r\n            renderItem.imgUrl = \"./assets/images/resources_cover/noimgCover.jpg\";\r\n        }\r\n\r\n        if(resultScore[resId]===undefined || newResultScoreOjb[resId]=== undefined ){\r\n            titleBoxStr = `<h2 class=\"fs-5 fw-bold mt-md-0 mt-3\">${renderItem.title}</h2>\r\n            <div class=\"d-flex flex-wrap align-items-center text-secondary\">\r\n                <span class=\"fs-8 fw-bold me-lg-2\">尚無評價</span>\r\n            </div>\r\n            <div class=\"classify fs-7\">\r\n                <ul class=\"d-flex \">\r\n                    <li class=\"me-2\">  ${renderItem.topics}</li>\r\n                    <li class=\"me-2\">  ${renderItem.classify.type}</li>\r\n                    <li class=\"me-2\">  ${renderItem.classify.level}</li>\r\n                    <li class=\"me-2\">  ${renderItem.classify.price}</li>\r\n                </ul>\r\n                <ul>\r\n                    <li class=\"me-2\">  ${renderItem.classify.lang} </li>\r\n                    <li class=\"me-2\">建立者 : ${userName} </li>\r\n                </ul>\r\n            </div>`;\r\n        }else{\r\n            titleBoxStr = `<h2 class=\"fs-5 fw-bold mt-md-0 mt-3\">${renderItem.title}</h2>\r\n            <div class=\"d-flex flex-wrap align-items-center text-secondary\">\r\n                <span class=\"fs-5 fw-bold me-lg-2\"> ${resultScore[resId]}</span>\r\n                <ul class=\"d-flex align-items-center lh-1 me-lg-2\">\r\n                ${newResultScoreOjb[resId]}\r\n                </ul>                                \r\n                <span class=\"fs-8\">(${resourceCommentData.length})</span>\r\n            </div>\r\n            <div class=\"classify fs-7\">\r\n                <ul class=\"d-flex \">\r\n                    <li class=\"me-2\">  ${renderItem.topics}</li>\r\n                    <li class=\"me-2\">  ${renderItem.classify.type}</li>\r\n                    <li class=\"me-2\">  ${renderItem.classify.level}</li>\r\n                    <li class=\"me-2\">  ${renderItem.classify.price}</li>\r\n                </ul>\r\n                <ul>\r\n                    <li class=\"me-2\">  ${renderItem.classify.lang} </li>\r\n                    <li class=\"me-2\">建立者 : ${userName} </li>\r\n                </ul>\r\n            </div>`;\r\n        }\r\n\r\n\r\n        btnBoxStr = `\r\n        <a href=\"${renderItem.url}\" target=\"_blank\" type=\"button\" class=\"btn btn-sm btn-secondary my-2 text-white px-lg-4 py-2 fs-6\">前往資源</a>\r\n        <div class=\"d-flex justify-content-center flex-row flex-md-column flex-lg-row align-items-center\">                    \r\n            <a href=\"#\" role=\"button\" class=\"d-flex align-items-center me-2 \">\r\n                <span class=\"material-icons \">bookmark_border</span>\r\n                <!-- <span class=\"material-icons\">bookmark</span> -->\r\n                <span>收藏</span>\r\n            </a>\r\n\r\n            <a href=\"#\" role=\"button\" class=\" d-flex align-items-center me-2 \">\r\n                <span class=\"material-icons material-icons-outlined\">feedback</span>\r\n                <!-- <span class=\"material-icons\">feedback</span> -->\r\n                <span>回報</span>\r\n            </a>\r\n        </div>`;\r\n\r\n        imageNBriefStr = `\r\n        <img class=\"d-md-block d-none\" src=\"${renderItem.imgUrl}\" alt=\"${renderItem.title}\">\r\n                    <div class=\"mt-md-3 text-dark\">${renderItem.intro}</div>`;\r\n        \r\n        \r\n        if(imageNBrief!==null){\r\n            imageNBrief.innerHTML = imageNBriefStr;\r\n        }\r\n        if(titleBox!==null){\r\n            titleBox.innerHTML = titleBoxStr;\r\n        }\r\n        if(btnBox!==null){\r\n            btnBox.innerHTML = btnBoxStr;\r\n        }\r\n\r\n    }\r\n   \r\n}\r\n\r\n\r\n/******************資源評論***********************/\r\n\r\nconst commentList=document.querySelector('.resourceComment > .commentList');\r\n\r\n\r\nfunction renderComment(){\r\n\r\n    let commentStr=\"\";\r\n    let userName =\"\";\r\n    // console.log(resourceCommentData)\r\n\r\n    if(resourceCommentData.length===0){\r\n        const btnReadMore = document.querySelector('.btnReadMore');\r\n        if(btnReadMore!==null){\r\n            btnReadMore.setAttribute(\"class\",\"d-none\");\r\n        }\r\n    }\r\n    //let resultScore = getAverageScore();\r\n    let commentNum = 0;\r\n    resourceCommentData.forEach(item=>{\r\n        let resultScore = {\r\n            \"1\":`${item.score}`\r\n        };\r\n        let newResultScoreOjb = combineCommentStar(resultScore);\r\n\r\n        if(item.user.role===\"admin\"){\r\n            userName = \"admin\"\r\n        }else{\r\n            userName =`${item.user.lastName} ${item.user.firstName} `;\r\n        }\r\n\r\n        \r\n        let commentTimeAge = Ftime(item.commentTime);\r\n        commentStr+=`\r\n        <div class=\"col mb-3 position-relatvie\" style=\"z-index:10;\">\r\n            <div class=\"card card-body position-relatvie\" style=\"z-index:10;\">\r\n                <div class=\"d-flex p-lg-3 align-items-lg-center flex-column flex-lg-row justify-content-between\"> \r\n                    <h3 class=\"card-title fs-7 d-flex align-items-center justify-content-lg-start justify-content-between\">\r\n                        <img class=\"rounded-circle\" src=\"./assets/images/icon_image.png\" alt=\"\">\r\n                        <p class=\"mb-0 mx-2 text-start\">\r\n                            ${userName}<br/>\r\n                            <span class=\"fs-9 text-gray\">${item.user.title}</span>\r\n                        </p>\r\n                        \r\n                    </h3>\r\n                    <div class=\"d-flex flex-lg-column justify-content-between\">\r\n                        <ul class=\"card-text d-flex align-items-center lh-1\">\r\n                        ${newResultScoreOjb[1]}\r\n                        \r\n                        </ul> \r\n                        <p class=\"mb-0 text-end\">\r\n                            <span class=\"fs-9 text-gray\">${commentTimeAge}</span></p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"d-flex flex-column\">\r\n                    <div class=\"form-floating my-3\"> \r\n                        <p>${item.content}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"d-flex justify-content-between fs-8\">\r\n                    <!-- like & dislike -->\r\n                    <div class=\"d-flex align-items-center\">\r\n                        <a href=\"#\">\r\n                            <span class=\"material-icons-outlined fs-6\">thumb_up_alt</span></a>\r\n                        <span class=\"mx-2\">${item.likeNum}</span>\r\n                        <!-- <a href=\"#\">\r\n                        <span class=\"material-icons fs-6\">thumb_up_alt</span></a> -->\r\n\r\n                            <a href=\"#\">\r\n                            <span class=\"material-icons-outlined fs-6\">thumb_down_alt</span></a>\r\n                            <span class=\"mx-2\">${item.dislikeNum}</span>\r\n                            <!-- <a href=\"#\">\r\n                            <span class=\"material-icons fs-6\">thumb_down_alt</span></a> -->\r\n\r\n                    </div>\r\n\r\n                    <div class=\"position-relatvie\" >\r\n                        <a class=\"d-flex align-items-center\" data-bs-toggle=\"collapse\" href=\"#commentOffense${commentNum+1}\" role=\"button\" aria-expanded=\"false\" aria-controls=\"commentOffense\">\r\n                            <span class=\"material-icons-outlined\">report</span>\r\n                            <span>檢舉</span>\r\n                        </a>\r\n\r\n                        <div class=\"offenseItem border bg-light rounded-3 p-3 collapse position-absolute end-0\" id=\"commentOffense${commentNum+1}\" style=\"z-index:0;\">\r\n                            <div class=\"form-check\">\r\n                                <input class=\"form-check-input\" type=\"radio\" name=\"offenseItem\" id=\"offenseItem1\">\r\n                                <label class=\"form-check-label\" for=\"offenseItem1\">\r\n                                    偏離主題\r\n                                </label>\r\n                            </div>\r\n                            <div class=\"form-check\">\r\n                                <input class=\"form-check-input\" type=\"radio\" name=\"offenseItem\" id=\"offenseItem2\">\r\n                                <label class=\"form-check-label\" for=\"offenseItem2\">\r\n                                    垃圾內容及廣告宣傳\r\n                                </label>\r\n                            </div>\r\n                            <div class=\"form-check\">\r\n                                <input class=\"form-check-input\" type=\"radio\" name=\"offenseItem\" id=\"offenseItem3\">\r\n                                <label class=\"form-check-label\" for=\"offenseItem3\">\r\n                                    騷擾內容及不雅用語\r\n                                </label>\r\n                            </div>\r\n                            <button class=\"btn btn-primary btn-sm text-white\" type=\"submit\">送出</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div><!--end card-->\r\n        </div>`;\r\n\r\n        commentNum +=1;\r\n\r\n    })\r\n\r\n    if(commentList!==null){\r\n         commentList.innerHTML = commentStr;\r\n    }\r\n   \r\n\r\n}\r\n\r\n/******************相關資源***********************/\r\n\r\nconst relatedResource = document.querySelector('.relatedResource');\r\n\r\nfunction renderRelatedResource(){\r\n    let relatedStr=\"\";\r\n    let renderNum = 1;\r\n    \r\n    if(resourcesData!==undefined){\r\n        resourcesData.forEach(resItem=>{\r\n        let resultScore = getAverageScore();\r\n        let newResultScoreOjb = combineCommentStar(resultScore);\r\n        if(resourceContent.length!==0){\r\n            //console.log(resourceContent);\r\n            if(resItem.topics === resourceContent[0].topics \r\n                && resItem.id !== resourceContent[0].id){\r\n                renderNum +=1;   \r\n                if(renderNum <=5 ){\r\n                    if(resultScore[resItem.id]==undefined||newResultScoreOjb[resItem.id]==undefined){\r\n                        relatedStr+=`\r\n                        <div class=\"my-4\">\r\n                        <h4 class=\"fs-7\"><a href=\"./resource.html?id=${resItem.id}\" target=\"_blank\"> ${resItem.title}</a></h4>\r\n                            <div class=\"d-flex flex-wrap justify-content-start align-items-center\">\r\n                                <span class=\"fs-8 text-gray me-lg-2\">尚無評價</span>                           \r\n                            </div>\r\n                        </div>\r\n                        `;\r\n                    }else{\r\n                        relatedStr+=`\r\n                        <div class=\"my-4\">\r\n                        <h4 class=\"fs-7\"><a href=\"./resource.html?id=${resItem.id}\" target=\"_blank\"> ${resItem.title}</a></h4>\r\n                        <div class=\"d-flex flex-wrap justify-content-start align-items-center text-secondary\">\r\n                            <span class=\"fs-7 fw-bold me-lg-2\">${resultScore[resItem.id]}</span>\r\n                            <ul class=\"d-flex align-items-center lh-1 me-lg-2 \">\r\n                            ${newResultScoreOjb[resItem.id]}\r\n                            </ul>                                \r\n                        </div>\r\n                        </div>\r\n                        `;\r\n                    }\r\n                \r\n                    \r\n                } \r\n            }\r\n        }\r\n        \r\n        \r\n    })\r\n    }\r\n    \r\n\r\n    if(relatedResource!==null){\r\n        relatedResource.innerHTML = relatedStr;\r\n    }\r\n}","\n\n//1. 頁面初始化\nfunction initResourceList(){\n  getResourcesForResources();\n  getCommentData();\n  //changeResourceAverageScore();\n}\ninitResourceList();\n\n\n/*****************top ***************/\n\nconst bannerBlockTitle = document.querySelector('.bannerBlock > h2');\n\nif(resTopic!==undefined && bannerBlockTitle!==null){\n  bannerBlockTitle.textContent = resTopic;\n\n}\n\n/*****************入門推薦 ***************/\n\nconst foundation1Basic = document.querySelector('#foundation1Basic > div.row');\nconst foundation2Free = document.querySelector('#foundation2Free > div.row');\nconst foundation3CN = document.querySelector('#foundation3CN > div.row');\n\nlet resourcesData = [];\nlet commentsData = [];\n\n//2. 取得資料\nfunction getResourcesForResources(){\n  axios.get(`${url}/resources`)\n  .then(res=>{\n    resourcesData = res.data;\n    renderFoundationRecommond();\n    renderFilterResultList();\n    \n  \n  }).catch(error=>{\n    console.log(error);\n  })\n}\n\nfunction getCommentData(){\n  axios.get(`${url}/comments`)\n  .then(res=>{\n    commentsData = res.data; \n  }).catch(error=>{\n    console.log(error);\n  })\n}\n\n\n//3. 渲染入門推薦資料\nfunction renderFoundationRecommond(){\n\n  let resultScore = getAverageScore();\n  let newResultScoreOjb = combineCommentStar(resultScore); //newResultScore\n\n  let itemNum1 = 0;\n  let itemNum2 = 0;\n  let itemNum3 = 0;\n  let renderMaxNum = 5;\n  //組各tab render HTML\n  let basicStr =\"\";\n  let freeStr=\"\";\n  let cnStr=\"\";\n\n  resourcesData.forEach( (item,index)=>{\n    \n    if(item.topics===\"JavaScript\"){\n      if(item.classify.level === \"初階\"){\n        if(itemNum1 <renderMaxNum){\n           basicStr += combineResouorceItem(item,index,resultScore,newResultScoreOjb,resourceIdObj);\n           itemNum1+=1;\n        }\n         \n      }\n      \n      if(item.classify.price === \"免費\"){\n        if(itemNum2 <renderMaxNum){\n          freeStr += combineResouorceItem(item,index,resultScore,newResultScoreOjb,resourceIdObj); \n          itemNum2+=1;\n        }\n         \n      }\n      \n      item.classify.lang.forEach(langItem=>{\n        if(langItem === \"繁體中文\"){\n          if(itemNum3 <renderMaxNum){\n            cnStr += combineResouorceItem(item,index,resultScore,newResultScoreOjb,resourceIdObj);\n            itemNum3+=1;\n          }\n          \n        }\n      })\n    }\n        \n\n  })\n\n  if(foundation1Basic!==null){\n    foundation1Basic.innerHTML = basicStr;\n  }\n  \n  if(foundation2Free!==null){\n    foundation2Free.innerHTML = freeStr;\n  }\n  \n  if(foundation3CN!==null){\n    foundation3CN.innerHTML = cnStr;\n  }\n\n  // foundation1Basic.innerHTML = basicStr;\n  // foundation2Free.innerHTML = freeStr;\n  // foundation3CN.innerHTML = cnStr;\n}\n\n\n//計算資源評論平均分數\nlet scoreTotal = {};  //每筆資源評價 總分\nlet resourceIdObj = {}; //每筆資源評價 筆數\nlet resultScore = {};  //每筆資源 平均分數(星星數)\nfunction getAverageScore(){\n  commentsData.forEach(item=>{\n      if(resourceIdObj[`${item.resourceId}`] === undefined){\n          resourceIdObj[`${item.resourceId}`] = 1;\n          scoreTotal[`${item.resourceId}`] = item.score;\n\n      }else{\n          resourceIdObj[item.resourceId] +=1;\n          scoreTotal[item.resourceId] += item.score;\n\n      }\n      resultScore[item.resourceId] = (scoreTotal[item.resourceId] /  resourceIdObj[item.resourceId]).toFixed(1);\n      //console.log(resultScore);\n\n  })\n  //changeResourceAverageScore();\n  return resultScore;\n}\n\n// 平均值存回 resourcesData\n// function changeResourceAverageScore(){\n//       axios.patch(`${url}/resources?id=${resId}`, {\n//         \"averageScore\" : `${resultScore[resId]}` \n//       })\n//       .then(res => {\n//         console.log(res.data);\n//       });\n// }\n\n\n\n//4. 組星星字串\nfunction combineCommentStar(resultScore){\n  //評論分數+星星+筆數 HTML\n  let newResultScore = {...resultScore};\n  let resourceIdArr = Object.keys(newResultScore);  //['1, '2, '3'] \n  let scoreArr = Object.values(newResultScore); //['4.0', '3.3', '4.5' ,'2.8'] \n\n  scoreArr.forEach((item,index)=>{\n    let starStr=\"\"; //星星HTML String\n    //星星數\n    for(let i=1; i<=item[0] ;i++){\n      starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star</span></li>`;\n      newResultScore[`${resourceIdArr[`${index}`]}`] = starStr;\n    }\n    \n    //半顆星星+空星星  \n      if(item[2]<=2){\n        for(let i=1; i<=(5-item[0]) ;i++){\n          starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star_outline</span></li> `;\n          newResultScore[`${resourceIdArr[`${index}`]}`] = starStr;\n        }\n        \n      }else if(item[2] >=3 && item[2] <=7){\n          starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star_half</span></li>`;\n          for(let i=1; i<=(5-item[0]-1) ;i++){\n            starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star_outline</span></li>`;\n          }\n          newResultScore[`${resourceIdArr[`${index}`]}`] = starStr;\n       \n      }else if(item[2]>=8){\n          starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star</span></li`;\n        for(let i=1; i<=(5-item[0]-1) ;i++){\n          starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star_outline</span></li>`;\n          newResultScore[`${resourceIdArr[`${index}`]}`] = starStr;\n        }\n      }\n\n  })\n  return newResultScore;\n}\n\n//5. 入門推薦組單一資源項目html\nfunction combineResouorceItem(item,index,resultScore,newResultScoreOjb,resourceIdObj){\n\n  if( item.imgUrl ===\"\"){\n    item.imgUrl = \"./assets/images/resources_cover/noimgCover.jpg\";\n  }\n\n  if(resultScore[`${index+1}`]===undefined || newResultScoreOjb[item.id]=== undefined || resourceIdObj[`${index+1}`]=== undefined ){\n\n    return  `\n    <div class=\"col-lg-2 col-md-4 col-6\">\n    <div>\n        <p class=\"text-center\">\n            <a href=\"./resource.html?id=${item.id}\" target=\"_blank\">\n            <img src=\"${item.imgUrl}\" alt=\"${item.title}\" onerror=\"this.src=./assets/images/resources_cover/noimgCover.jpg\"></a></p>\n        <div class=\"p-2\">\n            <h4 class=\"fs-7 ellipsis\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"> ${item.title}</a></h4>\n            <div class=\"d-flex flex-wrap justify-content-between align-items-center\">                             \n                <span class=\"fs-8\"> 尚無評價 </span>\n            </div>\n  \n        </div>\n    </div>\n    </div>\n    `;\n  }else{\n    return  `\n      <div class=\"col-lg-2 col-md-4 col-6\">\n      <div>\n          <p class=\"text-center\">\n              <a href=\"./resource.html?id=${item.id}\" target=\"_blank\">\n              <img src=\"${item.imgUrl}\" alt=\"${item.title}\" onerror=\"this.src=./assets/images/resources_cover/noimgCover.jpg\"></a></p>\n          <div class=\"p-2\">\n              <h4 class=\"fs-7 ellipsis\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"> ${item.title}</a></h4>\n\n              <div class=\"d-flex flex-wrap justify-content-between align-items-center\">\n                  <span class=\"fs-7 fw-bold me-lg-2\"> ${resultScore[`${index+1}`]}</span>\n                  <ul class=\"d-flex align-items-center lh-1 me-lg-2\">\n                  ${newResultScoreOjb[item.id]}\n                  </ul>                                \n                  <span class=\"fs-8\">(${resourceIdObj[`${index+1}`]})</span>\n              </div>\n\n          </div>\n      </div>\n      </div>\n      `;\n  }\n      \n}\n\n//判斷圖片處理\n\n\n//圖片顯示比例問題 \n\n\n/***************** 相關主題 ***************/\n\n\n\n/***************** 資源篩選 ***************/\n\nconst resourceItem = document.querySelector('.resourceItem');\n// const filter = document.querySelector('.filter');\nconst filterItemInput = document.querySelectorAll('.filterItem > input');  \n\n\n\n// final 渲染清單\nlet newResourcesRenderList = getRenderList(resourcesData);\n// let newResourcesRenderList = [];\n\n//1. checked 監聽 : 取得 checked 清單的關鍵字 + render\n\n\n/************************暫時新增************************************* */\n\nlet tempRenderList = [];\nlet groupNameArr=[];  // ['type', 'type', 'level']\n//let checkedKeyWords =[]; //\n\n\n//比對resourcesData原始資料, 符合條件的加入 tempRenderList \nfunction addToTempRenderList(filterKeyword,groupName){\n  resourcesData.forEach((resItem,resIndex)=>{\n    if(resItem.classify.lang.langth===1){\n      if(filterKeyword === resItem.classify[groupName] || \n        filterKeyword === resItem.classify.lang[0] ){\n          tempRenderList.push(resItem);\n          groupNameArr.push(groupName); \n          //checkedKeyWords.push(filterKeyword);\n      }\n    }else{\n      resItem.classify.lang.forEach(langItem=>{\n         if(filterKeyword === resItem.classify[groupName] ||\n           filterKeyword === langItem ){\n             tempRenderList.push(resItem);\n             groupNameArr.push(groupName); \n            // checkedKeyWords.push(filterKeyword);\n         }\n       })   \n    }\n\n    //每次加完先去除重複項目\n    const set = new Set();\n    tempRenderList = tempRenderList.filter((item) => {\n      return (!set.has(item.id) ? set.add(item.id) : false)\n    });\n\n    groupNameArr = groupNameArr.filter((item) => {\n      return (!set.has(item) ? set.add(item) : false)\n    });\n\n\n  })\n  console.log(\"tempRenderList\");\n  console.log(tempRenderList);\n  console.log(\"groupNameArr\");\n  console.log(groupNameArr);\n}\n\n\nfunction removeFromTempRenderList(filterKeyword,groupName){\n\n  //1. 同 groupName 情況\n  tempRenderList.forEach((resItem,resIndex)=>{\n\n    // console.log(\"groupName\",groupName);  //lang\n    // console.log(\"filterKeyword\",filterKeyword); //繁體中文\n\n    if(groupName === \"lang\"){\n      // console.log(resItem.classify.lang.length); \n      if(resItem.classify.lang.length===1){\n        if(filterKeyword === resItem.classify.lang[0] ){\n          tempRenderList.splice(resIndex,1);\n        }\n\n      }else{\n        //如果 lang 有多筆\n        resItem.classify.lang.forEach(langItem=>{\n          if(filterKeyword === langItem){\n            tempRenderList.splice(resIndex,1);\n          }\n          // tempRenderList = tempRenderList.filter(item=>{\n\n          //   return  langItem != filterKeyword;\n          // })\n        })\n\n        // tempRenderList = tempRenderList.filter(item=>{\n        //     item.classify.lang.forEach(langItem=>{\n        //       return  langItem != filterKeyword;\n        //     })\n        // })\n      }\n\n    }else if(filterKeyword === resItem.classify[groupName]){\n      tempRenderList = tempRenderList.filter(item=>{\n        return item.classify[groupName] != filterKeyword;\n      })\n    }\n\n   \n      \n      // if(groupName === \"lang\"){\n      //     if(resItem.classify.lang.length===1){\n      //       tempRenderList = tempRenderList.filter(item=>{\n      //         return item.classify.lang[0] != filterKeyword;\n      //       })\n      //     }\n      //     // else{\n      //     //   resItem.classify.lang.forEach(langItem=>{\n      //     //     tempRenderList = tempRenderList.filter(item=>{\n      //     //       return langItem != filterKeyword;\n      //     //     })\n      //     //   })\n      //     // }\n      // }else{\n         \n      // }\n    \n\n    // if(resItem.classify.lang.langth===1){\n    //   if(filterKeyword === resItem.classify.type ||\n    //     filterKeyword === resItem.classify.level ||\n    //     filterKeyword === resItem.classify.price ||  \n    //     filterKeyword === resItem.classify.lang[0] ){\n\n    //       tempRenderList.splice(resItem,1);\n    //       groupNameArr.splice(groupName,1); \n\n    //   }\n    // }\n    // else{\n    //   resItem.classify.lang.forEach(langItem=>{\n    //      if(filterKeyword === resItem.classify.type ||\n    //        filterKeyword === resItem.classify.level ||\n    //        filterKeyword === resItem.classify.price ||  \n    //        filterKeyword === langItem ){\n\n    //          tempRenderList.splice(resItem,1);\n    //          groupNameArr.splice(groupName,1); \n    //      }\n    //    })   \n    // }\n    // console.log(\"tempRenderList\");\n    // console.log(tempRenderList);\n    // console.log(\"groupNameArr\");\n    // console.log(groupNameArr);\n  })\n}\n\nfilterItemInput.forEach((inputItem,index)=>{\n  inputItem.addEventListener(\"change\",e=>{\n    \n    let filterKeyword = e.target.getAttribute(\"name\"); \n    let groupName = e.target.getAttribute(\"data-group\");\n    console.log(filterKeyword,groupName);\n\n    if (e.target.checked) {\n      //1. 檢查是否為第一筆資料 (即第一個checked 項目)\n      if(tempRenderList.length === 0 && groupNameArr.length === 0){\n        //比對resourcesData原始資料, 符合條件的加入 tempRenderList \n        addToTempRenderList(filterKeyword,groupName);\n        \n      }else{\n        groupNameArr.forEach(nameItem=>{\n          // if(groupName===nameItem){\n          //   addToTempRenderList(filterKeyword,groupName);\n          // }else{\n          //   tempRenderList.forEach(tempItem=>{\n          //       if(groupName==\"lang\"){\n          //           if(tempItem.classify.lang.length === 1 &&\n          //             filterKeyword !== tempItem.classify.lang[0]){\n          //                 tempRenderList.splice(tempItem,1);\n          //                 groupNameArr.push(groupName); \n          //           }\n          //       }else if(filterKeyword !== tempItem.classify[groupName]){\n        \n          //           tempRenderList.splice(tempItem,1);\n          //           groupNameArr.push(groupName); \n\n          //       }\n          //   })\n          // }\n          /****************上面是原本寫法***************88 */\n          // if(groupName===nameItem){\n          //     if(groupName==\"lang\"){\n              \n          //       //addToTempRenderList(filterKeyword,groupName);\n          //     }else{\n          //       addToTempRenderList(filterKeyword,groupName);\n          //     }\n          // }\n\n          if(groupName===nameItem){\n            addToTempRenderList(filterKeyword,groupName);\n          }else{\n            tempRenderList.forEach(tempItem=>{\n                if(groupName==\"lang\"){\n                    if(tempItem.classify.lang.length === 1){\n                      if(filterKeyword !== tempItem.classify.lang[0]){\n                          tempRenderList.splice(tempItem,1);    \n                      }  \n                    }else{\n                      tempItem.classify.lang.forEach(langItem=>{\n                        console.log(\"langItem\");\n                        console.log(langItem);\n                        console.log(\"tempItem\");\n                        console.log(tempItem);\n                        console.log(\"filterKeyword\");\n                        console.log(filterKeyword);\n                        // if(filterKeyword !== langItem){\n                        //   tempRenderList.splice(tempItem,1);\n                        // }\n                        tempRenderList = tempRenderList.filter(item=>{\n                          return langItem !== filterKeyword ;\n                        })\n                      })\n                    }\n                }else{\n                  if(filterKeyword !== tempItem.classify[groupName]){\n                    tempRenderList.splice(tempItem,1);\n                    \n                  }\n                }\n                groupNameArr.push(groupName);\n            })\n          }\n\n          console.log(\"tempRenderList\");\n          console.log(tempRenderList);\n          console.log(\"groupNameArr\");\n          console.log(groupNameArr);\n        }) //end groupNameArr forEach\n      }\n      \n    } else{\n      //checked == false\n      //補 groupNameArr tempRenderList 去除重複 \n      //removeFromTempRenderList(filterKeyword,groupName);\n      //console.log(\"tempRenderList\");\n      //console.log(tempRenderList);\n    }\n\n  })\n\n})\n\n\n\n\n/************************end 暫時新增************************************* */\n\n\n\n/************************暫時隱藏************************************* */\nlet filterCheckedArr=[];\nfilterItemInput.forEach((item,index)=>{\n  item.addEventListener(\"change\",e=>{\n    if (e.target.checked) {\n      let filterKeywords = item.getAttribute(\"name\");\n      filterCheckedArr.push(filterKeywords);\n    } else {\n      filterCheckedArr.forEach((arrItem,i)=>{\n          if(arrItem==item.getAttribute(\"name\")){\n            filterCheckedArr.splice(i,1);\n          }\n        })\n    }\n    console.log(\"filterCheckedArr\");\n    console.log(filterCheckedArr);\n    getRenderList(resourcesData);\n    renderFilterResultList();\n  })\n})\n\n\nfunction getRenderList(resourcesData){\n  //console.log(resourcesData);\n  //2. 比對關鍵字filterCheckedArr & resourcesData 取得要 render 的清單先放進 resourcesRenderList\n  let resourcesRenderList = [];\n  resourcesData.forEach(item=>{  \n\n    if(item.topics===\"JavaScript\"){\n      let langItemStr=\"\";  //取得 lang 陣列中的文字\n      item.classify.lang.forEach(langItem=>{  \n        langItemStr = langItem;\n        filterCheckedArr.forEach(checkedItem=>{    \n\n          if(item.classify.type === checkedItem ||\n            item.classify.level === checkedItem ||\n            item.classify.price === checkedItem ||\n            langItemStr === checkedItem\n          ){\n            \n              resourcesRenderList.push(item);\n            \n              // console.log(\"resourcesRenderList\")\n              // console.log(resourcesRenderList)\n          }     \n        })\n      })\n    }\n    \n  })\n\n  //3. 去除 resourcesRenderList 重複 id 項目\n  const set = new Set();\n  newResourcesRenderList = resourcesRenderList.filter((item) => {\n    //return (!set1.has(item.id) ? set1.add(item.id) : false)\n    //如果陣列中沒有該項目, 就加入陣列\n    if(!set.has(item.id)){  \n      return set.add(item.id)\n    }else {\n      return false;\n    }\n  });\n  // console.log(\"newResourcesRenderList\");\n  // console.log(newResourcesRenderList);\n  \n}  // end getRenderList(resourcesData)\n\n/************************暫時隱藏*************************************88 */\n\n\n//把 resourcesData 裡符合  filterCheckedArr 條件的項目丟進 resourcesRenderList \nfunction renderFilterResultList(){\n  // n 個結果結果\n  //filterAndSort();\n\n  getRenderList(resourcesData); //取得 final 渲染清單 newResourcesRenderList\n  //每一次checked有異動, 就重新取得要渲染的清單\n  // console.log(\"newResourcesRenderList\");\n  // console.log(newResourcesRenderList);\n  // console.log(newResourcesRenderList.length);\n \n  //取得分數\n  // let resultScore2 = getAverageScore();\n  // let newResultScoreOjb2 = combineCommentStar(resultScore2); \n\n  let renderfilterStr=\"\";\n  let finalRenderList = \"\";\n  if(newResourcesRenderList.length==0){\n    finalRenderList = resourcesData;\n  }else{\n    finalRenderList = newResourcesRenderList;\n  }\n\n  // console.log(\"renderfilterStr\");\n  // console.log(renderfilterStr);\n\n  //渲染資源\n  finalRenderList.forEach(item=>{\n    renderfilterStr +=`<div class=\"row my-3 \">\n    <div class=\"col-2 \">\n        <img src=\"${item.imgUrl}\" alt=\"${item.title}\">   \n    </div>\n      <div class=\"col-6\">\n          <h4 class=\"fs-7\">${item.title}</h4>\n          <div class=\"d-flex flex-wrap align-items-center\">\n              <span class=\"fs-7 fw-bold me-lg-2\">3.5</span>\n              <ul class=\"d-flex align-items-center lh-1 me-lg-2\">\n                  <li><span class=\"material-icons material-icons-sharp fs-8\">star</span></li>\n                  <li><span class=\"material-icons material-icons-sharp fs-8\">star</span></li>\n                  <li><span class=\"material-icons material-icons-sharp fs-8\">star</span></li>\n                  <li><span class=\"material-icons material-icons-sharp fs-8\">star_half</span></li>\n                  <li><span class=\"material-icons material-icons-sharp fs-8\">star_outline</span></li>\n              </ul>                                \n              <span class=\"fs-8\">(35)</span>\n              <p>${item.classify.type}, ${item.classify.level} , ${item.classify.price}, ${item.classify.lang} </p>\n          </div>\n      </div>\n      <div class=\"col-4\">\n          <div class=\"d-flex flex-column align-items-end\">\n              <button type=\"button\" class=\"btn btn-tiffany my-2 w-75\">前往資源</button>\n              <button type=\"button\" class=\"btn btn-yellowBrown w-75 my-2\">查看評論</button>\n          </div>\n      </div>\n    </div>\n        `;\n  })\n  \n  \n  if(resourceItem!==null){\n    resourceItem.innerHTML = renderfilterStr;\n  }\n\n\n}\n\n\n/***************************************8 */\n\n\n\n\n\n\n/***************** n 筆結果 / 清除篩選 / 排序 ***************/\n\nconst resultNumber = document.querySelector('.resultNumber');\nconst clearFilterBtn = document.querySelector('#clearFilterBtn');\nconst resourceSort = document.querySelector('#resourceSort');\n\nfunction filterAndSort(){\n  let filterResultNum = newResourcesRenderList.length;\n  let renderNum = 0;\n  //console.log(filterResultNum);\n  if(filterResultNum == 0){\n    resourcesData.forEach(item=>{\n      if(item.topics==\"JavaScript\"){\n        renderNum +=1;\n      }\n    })\n\n    filterResultNum = renderNum; \n\n    //clearFilterBtn.textContent = \"\";  //清除篩選結果按鈕文字\n\n  }\n // resultNumber.textContent = `${filterResultNum}個結果`;\n\n\n  clearFilterBtn.addEventListener(\"click\",e=>{\n    \n  })\n\n}\n\n\n","//  Unix时间戳转换为当前时间多久之前\r\n//  @param timespan  int         Unix时间戳\r\n//  @return timeSpanStr  string      转换之后的前台需要的字符串\r\n//  https://beltxman.com/1576.html\r\n\r\n// console.log(Ftime (1670564031));\r\n\r\nfunction Ftime (timespan) {\r\n    var dateTime = new Date(timespan * 1000);\r\n    var year = dateTime.getFullYear();\r\n    var month = dateTime.getMonth() + 1;\r\n    var day = dateTime.getDate();\r\n    var hour = dateTime.getHours();\r\n    var minute = dateTime.getMinutes();\r\n    //当前时间\r\n    var now = Date.parse(new Date());  //typescript转换写法\r\n    var milliseconds = 0;\r\n    var timeSpanStr;\r\n    //计算时间差\r\n    milliseconds = (now / 1000) - timespan;\r\n\r\n    //一分钟以内\r\n    if (milliseconds <= 60) {\r\n        timeSpanStr = '剛剛';\r\n    }\r\n    //大于一分钟小于一小时\r\n    else if (60 < milliseconds && milliseconds <= 60 * 60) {\r\n        timeSpanStr = Math.ceil((milliseconds / (60))) + '分鐘前';\r\n    }\r\n    //大于一小时小于等于一天\r\n    else if (60 * 60 < milliseconds && milliseconds <= 60 * 60 * 24) {\r\n        timeSpanStr = Math.ceil(milliseconds / (60 * 60)) + '小時前';\r\n    }\r\n    //大于一天小于等于15天\r\n    else if (60 * 60 * 24 < milliseconds && milliseconds <= 60 * 60 * 24 * 30) {\r\n        timeSpanStr = Math.ceil(milliseconds / (60 * 60 * 24)) + '天前';\r\n    }\r\n    //大于一个月小于一年\r\n    else if (60 * 60 * 24 * 30 < milliseconds && milliseconds <= 60 * 60 * 24 * 30 * 12){\r\n        timeSpanStr = Math.ceil(milliseconds / (60 * 60 * 24 * 30)) + '個月前';\r\n    }\r\n    //超过一年显示\r\n    else {\r\n        timeSpanStr = year + '年' + month + '月' + day + '日 ' + hour + ':' + minute;   \r\n    }\r\n    return timeSpanStr;\r\n}"]}