{"version":3,"sources":["acc_account.js","acc_profile.js","all.js","config.js","index.js","layout.js","login.js","resource.js","resource_list.js","signup.js","timestamp.js"],"names":["url","userId","location","href","split","localStorageUserId","localStorage","getItem","localStorageToken","pageClassify","headers","Authorization","homePage","userData","initAccount","axios","get","then","res","data","renderUserAccount","err","console","log","response","userEmail","document","querySelector","userPW","leftMenu","value","email","leftMenuStr","innerHTML","constraints","oldPassowrd","presence","message","length","minimum","newPassword","confirmpw","equality","attribute","initProfile","renderUserData","firstName","lastName","userTitle","userExp","profileImg","title","undefined","experiences","prefix","toUpperCase","profileImgStr","profileInputs","querySelectorAll","forEach","item","addEventListener","e","nextElementSibling","textContent","btnSaveProfile","patch","alert","locationHref","resTopic","resId","initIndex","getResourcesForIndex","goodRate1","goodRate2","goodRate3","goodRate1Tab","goodRate2Tab","goodRate3Tab","resourceType1","resourceType2","resourceType3","resource1Tab","resource2Tab","resource3Tab","resourcesData","commentsData","renderGoodRateList","renderNewFreeList","error","getCommentForIndex","commentScoreNum","getAverageScore","resultScore","commentNum","starStr","combineCommentStar","itemNum1","itemNum2","itemNum3","renderMaxNum","tabJS","tabHtml","tabPython","topics","combineResouorceItemType1","setAttribute","imgUrl","id","tabOnline","tabOffline","tabArticle","price","type","combineResouorceItem","beforeLogin","afterLogin","accountMenuImg","accountMenu","logOut","renderAccountMenu","accountMenuImgStr","accountMenuStr","setItem","loginAccount","loginPw","btnLogin","initLogin","getUserList","usersData","login","result","filter","userItem","preventDefault","post","accessToken","user","clear","parseFloat","initResourcePage","getResourcesForResources","getCommentData","getResourcesItem","getResourcesComment","getUserData","renderRelatedResource","resourceContent","resourceCommentData","renderResource","renderComment","imageNBrief","titleBox","btnBox","renderItem","userName","role","imageNBriefStr","titleBoxStr","btnBoxStr","level","lang","intro","commentList","commentSort","commentStr","btnReadMore","score","newResultScoreOjb","commentTimeAge","Ftime","commentTime","content","likeNum","dislikeNum","relatedResource","relatedTitle","relatedStr","renderNum","resItem","btnComment","commentContent","userInfo","btnCommentSubmit","commentStar","commentTextarea","renderBtnCommentContent","userInfoStr","thisTime","Date","now","toFixed","starNum","starItem","index","i","reload","initResourceList","bannerBlockTitle","foundation1Basic","foundation2Free","foundation3CN","thisTopicData","renderFoundationRecommond","renderFilterResultList","basicStr","freeStr","cnStr","langItem","scoreTotal","resourceIdObj","resourceId","newResultScore","resourceIdArr","Object","keys","scoreArr","values","resourceItem","filterItemInput","checkObj","renderList","filterKeyword","getAttribute","groupName","target","checked","push","hasType","hasLevel","hasPrice","checkLang","includes","some","str","renderfilterStr","combineResouorceItemType2","resultNumber","clearBtnText","clearFilter","clearFilterBtn","resourceSort","signUpForm","signupLastName","signupfirstName","signupMail","signupPw","signupPwConfirm","signUpFormInputs","btnSignUp","initSignup","lastname","firstname","password","errors","validate","timespan","dateTime","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","parse","milliseconds","timeSpanStr","Math","ceil"],"mappings":"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","file":"all.js","sourcesContent":["const url=\"http://localhost:3000\";\r\nlet userId = location.href.split(\"=\")[1];\r\nlet localStorageUserId = localStorage.getItem(\"userId\");  \r\nlet localStorageToken = localStorage.getItem(\"accessToken\");\r\nlet pageClassify = location.href.split(\"/\")[3].split(\".html\")[0];\r\nlet headers = {\r\n    Authorization: `Bearer ${localStorageToken}` \r\n}\r\nlet homePage = location.href.split(\"/\")[0]+`//`+location.href.split(\"/\")[2];\r\n\r\n//如果localStorage userid 是空的 或是 該id 跟 這個page的id 不同 ，就轉跳至首頁\r\n//取得該用戶資料\r\nlet userData=[];\r\nfunction initAccount(){\r\n    if(localStorageUserId == userId && localStorageUserId !==\"\"){\r\n        axios.get(`${url}/users?id=${localStorageUserId}`,headers)\r\n        .then(res=>{\r\n            userData = res.data;\r\n            //console.log(userData);\r\n            renderUserAccount();\r\n        \r\n        }).catch(err=>{\r\n            console.log(err.response);\r\n        })\r\n    }else{\r\n        if( location.href !== `${homePage}/index.html`){\r\n            if( pageClassify!==\"resource\" && pageClassify!==\"resource_list\" \r\n            && location.href!==homePage+\"/login.html\"\r\n            && location.href!==homePage+\"/signup.html\"\r\n            && location.href!==homePage+\"/acc_account.html\"\r\n            && location.href!==homePage+\"/acc_resources.html\"){\r\n                location.href = `./index.html`;\r\n            }\r\n        }\r\n    }\r\n}\r\ninitAccount();\r\n\r\n\r\n//渲染既有資料\r\nconst userEmail = document.querySelector('#userEmail');\r\nconst userPW = document.querySelector('#userPW');\r\n\r\nconst leftMenu = document.querySelector('.leftMenu');\r\n\r\n\r\nfunction renderUserAccount(){\r\n    userEmail.value = userData[0].email;\r\n\r\n    let leftMenuStr=`<ul class=\"nav flex-row flex-lg-column\">\r\n        <li class=\"nav-item \">\r\n        <a class=\"nav-link active ps-0 px-lg-3\" aria-current=\"page\" href=\"./acc_profile.html?userid=${localStorageUserId}\">個人資料</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n        <a class=\"nav-link ps-0 px-lg-3\" href=\"./acc_account.html?userid=${localStorageUserId}\">帳戶安全</a>\r\n        </li>\r\n        <!-- <li class=\"nav-item ps-0 px-lg-3\">\r\n        <a class=\"nav-link\" href=\"#\">通知</a>\r\n        </li> -->\r\n    </ul>  `;\r\n    \r\n    leftMenu.innerHTML = leftMenuStr;\r\n}\r\n\r\n\r\n\r\nconst constraints ={\r\n    oldPassowrd:{\r\n        presence: {message: \"必填欄位\"},\r\n        length: {\r\n            minimum: 5, \r\n            message: \"密碼長度請大於5\"\r\n        }\r\n    },\r\n    newPassword:{\r\n        presence: {message: \"必填欄位\"},\r\n        length: {\r\n            minimum: 5, \r\n            message: \"密碼長度請大於5\"\r\n        }\r\n    },\r\n    confirmpw:{\r\n        presence: {message: \"必填欄位\"},\r\n        equality:{\r\n            attribute:\"newPassword2\",\r\n            message: \"與前者輸入密碼不同\",\r\n            // comparator: function(v1, v2) {\r\n            //     return v1 === v2;\r\n            //   }\r\n        }\r\n    }\r\n}","const url=\"http://localhost:3000\";\r\nlet userId = location.href.split(\"=\")[1];\r\nlet localStorageUserId = localStorage.getItem(\"userId\");  \r\nlet localStorageToken = localStorage.getItem(\"accessToken\");\r\nlet pageClassify = location.href.split(\"/\")[3].split(\".html\")[0];\r\nlet headers = {\r\n    headers:{\r\n        \"authorization\": `Bearer ${localStorageToken}` \r\n    }\r\n}\r\nlet homePage = location.href.split(\"/\")[0]+`//`+location.href.split(\"/\")[2];\r\n\r\n//如果localStorage userid 是空的 或是 該id 跟 這個page的id 不同 ，就轉跳至首頁\r\n//取得該用戶資料\r\nlet userData=[];\r\nfunction initProfile(){\r\n    if(localStorageUserId == userId && localStorageUserId !==\"\"){\r\n        axios.get(`${url}/users?id=${localStorageUserId}`,headers)\r\n        .then(res=>{\r\n            userData = res.data;\r\n            //console.log(userData);\r\n            renderUserData();\r\n        \r\n        }).catch(err=>{\r\n            console.log(err.response);\r\n        })\r\n    }else{\r\n        if( location.href !== `${homePage}/index.html`){\r\n            if( pageClassify!==\"resource\" && pageClassify!==\"resource_list\" \r\n            && location.href!==homePage+\"/login.html\"\r\n            && location.href!==homePage+\"/signup.html\"\r\n            && location.href!==homePage+\"/acc_account.html\"\r\n            && location.href!==homePage+\"/acc_resources.html\"){\r\n                location.href = `./index.html`;\r\n            }\r\n        }\r\n    }\r\n}\r\ninitProfile();\r\n\r\n\r\n//渲染用戶既有資料\r\n\r\nconst firstName = document.querySelector('#firstName');\r\nconst lastName = document.querySelector('#lastName');\r\nconst userTitle = document.querySelector('#userTitle');\r\nconst userExp = document.querySelector('#userExp');\r\n// const websiteUrl = document.querySelector('#websiteUrl');\r\nconst profileImg = document.querySelector('.profileImg');\r\n\r\n//左側選單\r\nconst leftMenu = document.querySelector('.leftMenu');\r\n\r\nfunction renderUserData() {\r\n    firstName.value = userData[0].firstName;\r\n    lastName.value = userData[0].lastName;\r\n   \r\n    if(userData[0].title!=undefined){\r\n        userTitle.value = userData[0].title;\r\n    }\r\n    if(userData[0].experiences!=undefined){\r\n        userExp.value = userData[0].experiences;\r\n    }\r\n    // if( userData[0].links.websiteUrl!=undefined){\r\n    //     websiteUrl.value = userData[0].links.websiteUrl;\r\n    // }\r\n\r\n    // console.log(profileImg);\r\n    let prefix = (userData[0].firstName)[0].toUpperCase();\r\n    \r\n    let profileImgStr=`\r\n    <span class=\"userImg d-inline-block bg-primary p-4 rounded-circle fw-bold lh-1 text-white text-center\">${prefix}</span>`;\r\n    profileImg.innerHTML = profileImgStr;\r\n\r\n\r\n    let leftMenuStr=`<ul class=\"nav flex-row flex-lg-column\">\r\n        <li class=\"nav-item \">\r\n        <a class=\"nav-link active ps-0 px-lg-3\" aria-current=\"page\" href=\"./acc_profile.html?userid=${localStorageUserId}\">個人資料</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n        <a class=\"nav-link ps-0 px-lg-3\" href=\"./acc_account.html?userid=${localStorageUserId}\">帳戶安全</a>\r\n        </li>\r\n        <!-- <li class=\"nav-item ps-0 px-lg-3\">\r\n        <a class=\"nav-link\" href=\"#\">通知</a>\r\n        </li> -->\r\n    </ul>  `;\r\n    \r\n    leftMenu.innerHTML = leftMenuStr;\r\n\r\n}\r\n\r\n//如果欄位編輯, 檢查欄位格式\r\nconst profileInputs = document.querySelectorAll('.profileInput');\r\nif(profileInputs!==null){\r\n    profileInputs.forEach(item=>{\r\n        item.addEventListener(\"change\",e=>{\r\n            item.nextElementSibling.textContent = '';\r\n            if(firstName.value ==\"\"){\r\n                document.querySelector('.firstName').textContent = '必填欄位';\r\n            }\r\n            if(lastName.value==\"\"){\r\n                document.querySelector('.lastName').textContent = '必填欄位';\r\n            }\r\n            if(userTitle.value.length > 15){\r\n                document.querySelector('.userTitle').textContent = '字述請少於15';\r\n            }\r\n            // if(websiteUrl.value){\r\n    \r\n            // }\r\n        })\r\n    })\r\n}\r\n\r\n\r\n\r\n//上傳圖片\r\n\r\n//儲存按鈕監聽,格式正確才儲存\r\nconst btnSaveProfile=document.querySelector('.btnSaveProfile');\r\nif(btnSaveProfile!==null){\r\n    btnSaveProfile.addEventListener(\"click\",e=>{\r\n        if(firstName.value !==\"\" && lastName.value!==\"\" && userTitle.value.length < 15){\r\n               \r\n            axios.patch(`${url}/600/users/${localStorageUserId}`,{\r\n                \"lastName\" : lastName.value,\r\n                \"firstName\" : firstName.value,\r\n                \"title\" : userTitle.value,\r\n                \"experiences\" : userExp.value,\r\n            },headers)\r\n            .then(res=>{\r\n                alert(\"已成功更新\");\r\n                //document.write(`<script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>`)\r\n                //Swal.fire('Any fool can use a computer')\r\n                // Swal.fire({\r\n                //     position: 'top-end',\r\n                //     icon: 'success',\r\n                //     title: 'Your work has been saved',\r\n                //     showConfirmButton: false,\r\n                //     timer: 1500\r\n                // })\r\n                console.log(res.data);\r\n            }).catch(err=>{\r\n                console.log(err.response);\r\n            })\r\n           \r\n        }\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n","// let commentsData = [];\n// function getAllComment(){\n//     axios.get(`${url}/comments`)\n//     .then(res=>{\n//         commentsData = res.data;\n//         console.log(commentsData);\n    \n//     }).catch(error=>{\n//       console.log(error);\n//     })\n// }\n\n\n/*****************nab tab***************/\n//hover 切換\n// const navItem = document.querySelectorAll(\".goodRate .nav-link\");\n// const tabContent = document.querySelectorAll(\".goodRate .tab-pane\");\n// console.log(navItem);\n// console.log(tabContent);\n\n// navItem.forEach((value,index)=>{\n//   value.addEventListener('mouseover',(e)=>{\n//     console.log(\"tt\",e.target.getAttribute(\"id\"));\n\n//     let labelledby = tabContent[index].getAttribute(\"aria-labelledby\");\n    \n//     //console.log(tabContent[index].classList);\n  \n//     if(e.target.getAttribute(\"id\") == labelledby ){\n//       //console.log(\"yes\");\n//       tabContent[index].classList.add(\"show\");\n//       console.log(tabContent[index].classList);\n\n//     }\n//   })\n\n// })\n\n\n","const url=\"http://localhost:3000\";\r\n// const url=\"./json/db.json\"\r\n// const url=\"http://localhost:3000/users\"\r\n// const url=\"http://localhost:3000/resources\"\r\n// const url=\"http://localhost:3000/bookmarks\"\r\n// const url=\"http://localhost:3000/comments\"\r\n","let locationHref = location.href.split(\"/\");\r\nlet resTopic = location.href.split(\"=\")[1];\r\nlet resId = location.href.split(\"=\")[1];\r\nlet userId = location.href.split(\"=\")[1];\r\nlet localStorageUserId = localStorage.getItem(\"userId\");  \r\nlet pageClassify = locationHref[3].split(\".html\")[0];\r\nlet homePage = locationHref[0]+`//`+locationHref[2];\r\n\r\n// let resTopicNew = resTopic.split(\" \");\r\n// console.log(resTopic);\r\n// console.log(\"pageClassify\",pageClassify);\r\n// console.log(\"locationHref\",locationHref);\r\n\r\n//1. 頁面初始化\r\nfunction initIndex(){\r\n    getResourcesForIndex();\r\n    if(pageClassify==\"resource\"){\r\n        if(resId == undefined){\r\n            location.href = `./index.html`;\r\n        }\r\n    }\r\n    else if(pageClassify==\"resource_list\"){\r\n        if(resTopic == undefined){\r\n            location.href = `./index.html`;\r\n        }\r\n    }\r\n    \r\n    \r\n}\r\ninitIndex();\r\n\r\n//好評推薦\r\nconst goodRate1 = document.querySelector('#goodRate1 > div.row');\r\nconst goodRate2 = document.querySelector('#goodRate2 > div.row');\r\nconst goodRate3 = document.querySelector('#goodRate3 > div.row');\r\nconst goodRate1Tab = document.querySelector('#goodRate1-tab');\r\nconst goodRate2Tab = document.querySelector('#goodRate2-tab');\r\nconst goodRate3Tab = document.querySelector('#goodRate3-tab');\r\n\r\n//最新免費資源\r\nconst resourceType1 = document.querySelector('#resourceType1 > div.row');\r\nconst resourceType2 = document.querySelector('#resourceType2 > div.row');\r\nconst resourceType3 = document.querySelector('#resourceType3 > div.row');\r\nconst resource1Tab = document.querySelector('#resource1-tab');\r\nconst resource2Tab = document.querySelector('#resource2-tab');\r\nconst resource3Tab = document.querySelector('#resource3-tab');\r\n\r\n\r\nlet resourcesData = [];\r\nlet commentsData = [];\r\n\r\n//取得資源資料\r\nfunction getResourcesForIndex(){\r\n  axios.get(`${url}/resources`)\r\n  .then(res=>{\r\n    resourcesData = res.data;\r\n    document.title = \"Eng!neer 程式學習資源網\";\r\n    renderGoodRateList();\r\n    renderNewFreeList();\r\n  \r\n  }).catch(error=>{\r\n    console.log(error);\r\n  })\r\n}\r\n\r\nfunction getCommentForIndex(){\r\n    axios.get(`${url}/comments`)\r\n    .then(res=>{\r\n      commentsData = res.data;\r\n    \r\n    }).catch(error=>{\r\n      console.log(error);\r\n    })\r\n}\r\n\r\n//渲染好評推薦資料\r\nfunction renderGoodRateList(){\r\n    let commentScoreNum = getAverageScore();\r\n    let resultScore = commentScoreNum[0];\r\n    let commentNum = commentScoreNum[1];\r\n    let starStr = combineCommentStar(resultScore); \r\n\r\n    let itemNum1 = 0;\r\n    let itemNum2 = 0;\r\n    let itemNum3 = 0;\r\n    let renderMaxNum = 6;\r\n    let tabJS =\"\";\r\n    let tabHtml=\"\";\r\n    let tabPython=\"\";\r\n\r\n    resourcesData.forEach( (item)=>{\r\n        // console.log(\"resultScore\");\r\n        // console.log(resultScore);\r\n        switch (item.topics){\r\n            case \"JavaScript\" :\r\n                if(itemNum1 <renderMaxNum){\r\n                    tabJS += combineResouorceItemType1(item,resultScore,starStr,commentNum);\r\n                   itemNum1 +=1;\r\n                }\r\n                break;\r\n\r\n            case \"HTML/CSS\" :\r\n                if(itemNum2 < renderMaxNum){\r\n                    tabHtml += combineResouorceItemType1(item,resultScore,starStr,commentNum);\r\n                    itemNum2+=1;\r\n                }\r\n                break;\r\n\r\n            case \"Python\" :\r\n                if(itemNum3 < renderMaxNum){\r\n                     tabPython += combineResouorceItemType1(item,resultScore,starStr,commentNum);\r\n                itemNum3+=1\r\n                }\r\n               \r\n                break;\r\n        }\r\n    })\r\n\r\n    if(goodRate1 !==null ){\r\n        if(tabJS==\"\"){\r\n            goodRate1Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n        goodRate1.innerHTML = tabJS;\r\n    }\r\n    if(goodRate2 !==null ){\r\n        if(tabHtml==\"\"){\r\n            goodRate2Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n        goodRate2.innerHTML = tabHtml;\r\n    }\r\n    if(goodRate3 !==null ){\r\n        if(tabPython==\"\"){\r\n            goodRate3Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n        goodRate3.innerHTML = tabPython;\r\n    }\r\n\r\n}\r\n\r\n\r\n//組單一資源項目html - type 1\r\nfunction combineResouorceItemType1(item,resultScore,starStr,commentNum){\r\n\r\n  if( item.imgUrl ===\"\"){\r\n    item.imgUrl = \"./assets/images/resources_cover/noimgCover.jpg\";\r\n  }\r\n\r\n  if(resultScore[item.id]===undefined || starStr[item.id]=== undefined || commentNum[item.id]=== undefined ){\r\n\r\n    return  `\r\n    <div class=\"col-md-6 col-lg-4\">\r\n    <div class=\"d-flex p-2 align-items-center\">\r\n        <div class=\"row\">\r\n            <div class=\"col-6\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"><img src=\"${item.imgUrl}\" alt=\"${item.title}\" onerror=\"this.src=./assets/images/resources_cover/noimgCover.jpg\"></a></div>\r\n            \r\n            <div class=\"col-6\">\r\n                <h4 class=\"ellipsis\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"> ${item.title}</a></h4>\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                尚無評價\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n         \r\n        \r\n    </div>\r\n    </div>\r\n    `;\r\n  }else{\r\n    return  `\r\n    <div class=\"col-md-6 col-lg-4\">\r\n    <div class=\"d-flex p-2 align-items-center\">\r\n        <div class=\"row\">\r\n            <div class=\"col-6\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"><img src=\"${item.imgUrl}\" alt=\"${item.title}\" onerror=\"this.src=./assets/images/resources_cover/noimgCover.jpg\"></a></div>\r\n\r\n            <div class=\"col-6\">\r\n                <h4 class=\"ellipsis\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"> ${item.title}</a></h4>\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                    <span class=\"fs-6 fw-bold\"> ${resultScore[item.id]}</span>\r\n                    <ul class=\"d-flex align-items-center lh-1\">\r\n                    ${starStr[item.id]}\r\n                    </ul>                                \r\n                    <span class=\"fs-7\">(${commentNum[item.id]})</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    </div>\r\n    </div>`;\r\n  }\r\n      \r\n}\r\n\r\n//渲染最新免費資源\r\nfunction renderNewFreeList(){\r\n    let commentScoreNum = getAverageScore();\r\n    let resultScore = commentScoreNum[0];\r\n    let commentNum = commentScoreNum[1];\r\n    let starStr = combineCommentStar(resultScore);\r\n\r\n    let tabOnline =\"\";\r\n    let tabOffline=\"\";\r\n    let tabArticle=\"\";\r\n\r\n    resourcesData.forEach( (item)=>{\r\n        if(item.price===\"免費\"){\r\n            if(item.type===\"線上課程\"){\r\n                tabOnline += combineResouorceItem(item,resultScore,starStr,commentNum);\r\n            }\r\n\r\n            if(item.type===\"實體課程\"){\r\n                tabOffline += combineResouorceItem(item,resultScore,starStr,commentNum);\r\n            }\r\n\r\n            if(item.type===\"文章\"){\r\n                tabArticle += combineResouorceItem(item,resultScore,starStr,commentNum);\r\n            }\r\n        }\r\n \r\n    })\r\n\r\n    if(resourceType1 !==null ){\r\n        resourceType1.innerHTML = tabOnline;\r\n        if(tabOnline==\"\"){\r\n            resource1Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n    }\r\n    if(resourceType2 !==null ){\r\n        resourceType2.innerHTML = tabOffline;\r\n        if(tabOffline==\"\"){\r\n            resource2Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n    }\r\n    if(resourceType3 !==null ){\r\n        resourceType3.innerHTML = tabArticle;\r\n        if(tabArticle==\"\"){\r\n            resource3Tab.setAttribute(\"class\", \"d-none\");\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n","let localStorageUserId = localStorage.getItem(\"userId\");\r\n// console.log(localStorageUserId);\r\n\r\nconst beforeLogin = document.querySelector('.beforeLogin');\r\nconst afterLogin = document.querySelector('.afterLogin');\r\n\r\nconst accountMenuImg = document.querySelector('.accountMenuImg');\r\nconst accountMenu = document.querySelector('.accountMenu');\r\n\r\nconst logOut = document.querySelector('.logOut');\r\n\r\n//如果有取得 userid  就表示有登入\r\nif(localStorageUserId == null || localStorageUserId==\"\"){\r\n    afterLogin.setAttribute(\"class\",\"d-none\");\r\n}else{\r\n    if(beforeLogin!==null){\r\n        beforeLogin.setAttribute(\"class\",\"d-none\");\r\n    }\r\n\r\n    //get userData\r\n    let userData=[];\r\n   \r\n    axios.get(`${url}/users?id=${localStorageUserId}`).then(res=>{\r\n        userData=res.data;\r\n        renderAccountMenu(userData);\r\n       \r\n    }).catch(err=>{\r\n        console.log(err.response);\r\n    })\r\n}\r\n\r\n\r\n//隱藏登入註冊, 顯示會員功能, 帶入相關會員資訊 , 切換至會員頁時帶入會員 id 資料等\r\n//將 userid 渲染至選單連結中\r\nfunction renderAccountMenu(userData){\r\n    let prefix = (userData[0].firstName)[0].toUpperCase();\r\n\r\n    let accountMenuImgStr=`\r\n    <span class=\"userImg d-inline-block bg-primary px-2 py-2 rounded-circle fw-bold fs-7 lh-1 text-white text-center\">${prefix}</span>`;\r\n    let accountMenuStr=`<li><a class=\"dropdown-item\" href=\"./acc_profile.html?userid=${localStorageUserId}\">個人資料</a></li>\r\n    <li><a class=\"dropdown-item\" href=\"./acc_resources.html?userid=${localStorageUserId}\">我的資源</a></li>\r\n    <li><a class=\"dropdown-item\" href=\"#\">我的募集</a></li>\r\n    <li><a class=\"dropdown-item\" href=\"#\">我的學習</a></li>\r\n    <li><a class=\"dropdown-item\" href=\"#\">設定</a></li>`;\r\n\r\n    accountMenuImg.innerHTML=accountMenuImgStr;\r\n    accountMenu.innerHTML=accountMenuStr;\r\n}\r\n\r\n\r\n//如果登出,就清空 localStorage userId\r\nlogOut.addEventListener(\"click\",e=>{\r\n    localStorage.setItem('accessToken', \"\");\r\n    localStorage.setItem('userId',\"\");\r\n    beforeLogin.setAttribute(\"class\",\"d-block\");\r\n    afterLogin.setAttribute(\"class\",\"d-none\");\r\n    location.href = \"./index.html\";\r\n})\r\n\r\n","\r\nconst loginAccount = document.querySelector('#loginAccount');\r\nconst loginPw = document.querySelector('#loginPw');\r\nconst btnLogin = document.querySelector('#btnLogin');\r\n// const signUpFormInputs = document.querySelectorAll('input.form-control');  //input\r\n\r\n\r\nfunction initLogin(){\r\n    getUserList();\r\n}\r\ninitLogin();\r\n\r\n\r\n//取得用戶清單\r\nlet usersData = [];\r\nfunction getUserList(){\r\n    axios.get(\"http://localhost:3000/users\").then(res=>{\r\n        usersData = res.data;\r\n        login();\r\n    }).catch(err=>{\r\n        console.log(err.response);\r\n    })\r\n}\r\n\r\n//欄位檢查\r\n\r\n    if(document.querySelector(\"#loginAccount\")!==null){\r\n        document.querySelector(\"#loginAccount\").addEventListener(\"change\",e=>{\r\n            document.querySelector('.account').textContent=\"\";\r\n            if(loginAccount.value==\"\"){\r\n                document.querySelector('.account').textContent=\"請輸入帳號\";\r\n            }else{\r\n                document.querySelector('.account').textContent=\"\";\r\n            }\r\n            \r\n            let result = usersData.filter(userItem=>{\r\n                return userItem.email ===loginAccount.value;\r\n            })\r\n            // console.log(\"result\");\r\n            // console.log(result);\r\n            if(result.length==0){\r\n                document.querySelector('.account').textContent=\"此帳號不存在\";\r\n            }\r\n\r\n           \r\n            })\r\n    }\r\n    if(document.querySelector(\"#loginPw\")!==null){\r\n        document.querySelector(\"#loginPw\").addEventListener(\"change\",e=>{\r\n            document.querySelector('.password').textContent=\"\";\r\n            if(loginPw.value==\"\"){\r\n                document.querySelector('.password').textContent=\"請輸入密碼\";\r\n            }else{\r\n                document.querySelector('.password').textContent=\"\";\r\n            }\r\n        })\r\n    }\r\n\r\n    \r\n\r\n    if(btnLogin!==null){\r\n\r\n    btnLogin.addEventListener(\"click\",e=>{\r\n    e.preventDefault();\r\n\r\n        if(loginAccount.value===\"\"||loginPw.value===\"\"){\r\n            return\r\n        }\r\n\r\n        if(document.querySelector('.account').textContent==\"\" && \r\n        document.querySelector('.password').textContent==\"\" ){\r\n\r\n            axios.post(\"http://localhost:3000/login\",{\r\n                \"email\":loginAccount.value,\r\n                \"password\":loginPw.value\r\n\r\n            }).then(res=>{\r\n                localStorage.setItem('accessToken', `${res.data.accessToken}`);\r\n                localStorage.setItem('userId', res.data.user.id);\r\n                location.href = \"./index.html\";\r\n\r\n            }).catch(err=>{\r\n                document.querySelector('.password').textContent=\"密碼錯誤\";\r\n                localStorage.clear();\r\n            })\r\n\r\n        }\r\n\r\n\r\n    })\r\n    }   \r\n\r\n\r\n\r\n","let resId = parseFloat(location.href.split(\"=\")[1]);\r\nlet headers = {\r\n    headers:{\r\n        \"authorization\": `Bearer ${localStorageToken}` \r\n    }\r\n}\r\n\r\nfunction initResourcePage(){\r\n    getResourcesForResources();\r\n    getCommentData();\r\n    getResourcesItem(resId);\r\n    getResourcesComment(resId);\r\n\r\n    getUserData();\r\n}\r\ninitResourcePage();\r\n\r\nlet resourcesData = [];\r\nlet commentsData = [];\r\n\r\n// 取得所有資源資料\r\nfunction getResourcesForResources(){\r\n  axios.get(`${url}/resources`)\r\n  .then(res=>{\r\n    resourcesData = res.data;\r\n    //getCommentData();\r\n    //renderRelatedResource();\r\n\r\n  }).catch(error=>{\r\n    console.log(error);\r\n  })\r\n}\r\n\r\nfunction getCommentData(){\r\n  axios.get(`${url}/comments`)\r\n  .then(res=>{\r\n    commentsData = res.data; \r\n    renderRelatedResource();\r\n  }).catch(error=>{\r\n    console.log(error);\r\n  })\r\n}\r\n\r\n\r\nlet resourceContent=[];\r\nlet resourceCommentData=[];\r\n\r\n//取得單一資源>>用於渲染資源建立者\r\nfunction getResourcesItem(id){\r\n    axios.get(`${url}/resources?id=${id}&_expand=user`)\r\n    .then(res=>{\r\n        resourceContent = res.data;\r\n        renderResource();\r\n        renderRelatedResource();\r\n    \r\n    }).catch(error=>{\r\n      console.log(error);\r\n    })\r\n}\r\nfunction getResourcesComment(id){\r\n    axios.get(`${url}/comments?_expand=resouceId&&resourceId=${id}&&_expand=user`)\r\n    .then(res=>{\r\n        resourceCommentData = res.data;\r\n        renderResource();\r\n        renderComment();\r\n\r\n    }).catch(error=>{\r\n      console.log(error);\r\n    })\r\n}\r\n\r\n/******************資源資訊***********************/\r\n\r\nconst imageNBrief = document.querySelector('.imageNBrief');\r\nconst titleBox = document.querySelector('.titleBox');\r\nconst btnBox = document.querySelector('.btnBox');\r\n\r\n\r\nfunction renderResource(){\r\n    \r\n\r\n    let renderItem=resourceContent[0];\r\n    let userName =\"\";\r\n\r\n    if(renderItem!==undefined){\r\n        document.title = renderItem.title;\r\n        if( renderItem.user.role===\"admin\"){\r\n            userName = \"admin\"\r\n        }else{\r\n            userName =`${renderItem.user.lastName} ${renderItem.user.firstName} `;\r\n        }\r\n\r\n        let commentScoreNum = getAverageScore();\r\n        let resultScore = commentScoreNum[0];\r\n        let commentNum = commentScoreNum[1];\r\n        let starStr = combineCommentStar(resultScore);\r\n\r\n        let imageNBriefStr=\"\";\r\n        let titleBoxStr=\"\";\r\n        let btnBoxStr=\"\";\r\n\r\n        if( renderItem.imgUrl ===\"\"){\r\n            renderItem.imgUrl = \"./assets/images/resources_cover/noimgCover.jpg\";\r\n        }\r\n\r\n        if(resultScore[resId]===undefined || starStr[resId]=== undefined ){\r\n            titleBoxStr = `<h2 class=\"fs-5 fw-bold mt-md-0 mt-3\">${renderItem.title}</h2>\r\n            <div class=\"d-flex flex-wrap align-items-center text-secondary\">\r\n                <span class=\"fs-8 fw-bold me-lg-2\">尚無評價</span>\r\n            </div>\r\n            <div class=\"classify fs-7\">\r\n                <ul class=\"d-flex \">\r\n                    <li class=\"me-2\">  ${renderItem.topics}</li>\r\n                    <li class=\"me-2\">  ${renderItem.type}</li>\r\n                    <li class=\"me-2\">  ${renderItem.level}</li>\r\n                    <li class=\"me-2\">  ${renderItem.price}</li>\r\n                </ul>\r\n                <ul>\r\n                    <li class=\"me-2\">  ${renderItem.lang} </li>\r\n                    <li class=\"me-2\">建立者 : ${userName} </li>\r\n                </ul>\r\n            </div>`;\r\n        }else{\r\n            titleBoxStr = `<h2 class=\"fs-5 fw-bold mt-md-0 mt-3\">${renderItem.title}</h2>\r\n            <div class=\"d-flex flex-wrap align-items-center text-secondary\">\r\n                <span class=\"fs-5 fw-bold me-lg-2\"> ${resultScore[resId]}</span>\r\n                <ul class=\"d-flex align-items-center lh-1 me-lg-2\">\r\n                ${starStr[resId]}\r\n                </ul>                                \r\n                <span class=\"fs-8\">(${commentNum[resId]})</span>\r\n            </div>\r\n            <div class=\"classify fs-7\">\r\n                <ul class=\"d-flex \">\r\n                    <li class=\"me-2\">  ${renderItem.topics}</li>\r\n                    <li class=\"me-2\">  ${renderItem.type}</li>\r\n                    <li class=\"me-2\">  ${renderItem.level}</li>\r\n                    <li class=\"me-2\">  ${renderItem.price}</li>\r\n                </ul>\r\n                <ul>\r\n                    <li class=\"me-2\">  ${renderItem.lang} </li>\r\n                    <li class=\"me-2\">建立者 : ${userName} </li>\r\n                </ul>\r\n            </div>`;\r\n        }\r\n\r\n\r\n        btnBoxStr = `\r\n        <a href=\"${renderItem.url}\" target=\"_blank\" type=\"button\" class=\"btn btn-sm btn-secondary my-2 text-white px-lg-4 py-2 fs-6\">前往資源</a>\r\n        <div class=\"d-flex justify-content-center flex-row flex-md-column flex-lg-row align-items-center\">                    \r\n            <a href=\"#\" role=\"button\" class=\"d-flex align-items-center me-2 \">\r\n                <span class=\"material-icons \">bookmark_border</span>\r\n                <!-- <span class=\"material-icons\">bookmark</span> -->\r\n                <span>收藏</span>\r\n            </a>\r\n\r\n            <a href=\"#\" role=\"button\" class=\" d-flex align-items-center me-2 \">\r\n                <span class=\"material-icons material-icons-outlined\">feedback</span>\r\n                <!-- <span class=\"material-icons\">feedback</span> -->\r\n                <span>回報</span>\r\n            </a>\r\n        </div>`;\r\n\r\n        imageNBriefStr = `\r\n        <img class=\"d-md-block\" src=\"${renderItem.imgUrl}\" alt=\"${renderItem.title}\">\r\n                    <div class=\"mt-md-3 text-dark\">${renderItem.intro}</div>`;\r\n        \r\n        \r\n        if(imageNBrief!==null){\r\n            imageNBrief.innerHTML = imageNBriefStr;\r\n        }\r\n        if(titleBox!==null){\r\n            titleBox.innerHTML = titleBoxStr;\r\n        }\r\n        if(btnBox!==null){\r\n            btnBox.innerHTML = btnBoxStr;\r\n        }\r\n\r\n    }\r\n   \r\n}\r\n\r\n\r\n/******************資源評論***********************/\r\n\r\nconst commentList=document.querySelector('.resourceComment > .commentList');\r\nconst commentSort=document.querySelector('#commentSort');\r\n\r\n\r\nfunction renderComment(){\r\n\r\n    let commentStr=\"\";\r\n    let userName =\"\";\r\n    // console.log(resourceCommentData)\r\n\r\n    if(resourceCommentData.length===0){\r\n        const btnReadMore = document.querySelector('.btnReadMore');\r\n        if(btnReadMore!==null){\r\n            btnReadMore.setAttribute(\"class\",\"d-none\");\r\n        }\r\n    }\r\n    //let resultScore = getAverageScore();\r\n    let commentNum = 0;\r\n    resourceCommentData.forEach(item=>{\r\n        let resultScore = {\r\n            \"1\":`${item.score}`\r\n        };\r\n        let newResultScoreOjb = combineCommentStar(resultScore);\r\n\r\n        if(item.user.role===\"admin\"){\r\n            userName = \"admin\"\r\n        }else{\r\n            userName =`${item.user.firstName} ${item.user.lastName}`;\r\n        }\r\n\r\n        let prefix = (item.user.firstName)[0].toUpperCase();\r\n        let commentTimeAge = Ftime(item.commentTime);\r\n        commentStr+=`\r\n        <div class=\"col mb-3 position-relatvie\" style=\"z-index:10;\">\r\n            <div class=\"card card-body position-relatvie d-flex justify-content-between\" style=\"z-index:10;\">\r\n                <div class=\"d-flex align-items-lg-center flex-column flex-lg-row justify-content-between\"> \r\n                    <h3 class=\"card-title fs-7 d-flex align-items-center justify-content-lg-start justify-content-between\">\r\n\r\n                        <span class=\"userImg d-inline-block bg-primary px-2 py-2 rounded-circle fw-bold fs-7 lh-1 text-white text-center\">${prefix}</span>\r\n\r\n                        <p class=\"mb-0 mx-2 text-start\">\r\n                            ${userName}<br/>\r\n                            <span class=\"fs-9 text-gray\">${item.user.title}</span>\r\n                        </p>\r\n                        \r\n                    </h3>\r\n                    <div class=\"d-flex flex-lg-column justify-content-between\">\r\n                        <ul class=\"card-text d-flex align-items-center lh-1\">\r\n                        ${newResultScoreOjb[1]}\r\n                        \r\n                        </ul> \r\n                        <p class=\"mb-0 text-end\">\r\n                            <span class=\"fs-9 text-gray\">${commentTimeAge}</span></p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"d-flex flex-column\">\r\n                    <div class=\"form-floating my-3\"> \r\n                        <p>${item.content}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"d-flex justify-content-between fs-8\">\r\n                    <!-- like & dislike -->\r\n                    <div class=\"d-flex align-items-center\">\r\n                        <a href=\"#\">\r\n                            <span class=\"material-icons-outlined fs-6\">thumb_up_alt</span></a>\r\n                        <span class=\"mx-2\">${item.likeNum}</span>\r\n                        <!-- <a href=\"#\">\r\n                        <span class=\"material-icons fs-6\">thumb_up_alt</span></a> -->\r\n\r\n                            <a href=\"#\">\r\n                            <span class=\"material-icons-outlined fs-6\">thumb_down_alt</span></a>\r\n                            <span class=\"mx-2\">${item.dislikeNum}</span>\r\n                            <!-- <a href=\"#\">\r\n                            <span class=\"material-icons fs-6\">thumb_down_alt</span></a> -->\r\n\r\n                    </div>\r\n\r\n                    <div class=\"position-relatvie\" >\r\n                        <a class=\"d-flex align-items-center\" data-bs-toggle=\"collapse\" href=\"#commentOffense${commentNum+1}\" role=\"button\" aria-expanded=\"false\" aria-controls=\"commentOffense\">\r\n                            <span class=\"material-icons-outlined\">report</span>\r\n                            <span>檢舉</span>\r\n                        </a>\r\n\r\n                        <div class=\"offenseItem border bg-light rounded-3 p-3 collapse position-absolute end-0\" id=\"commentOffense${commentNum+1}\" style=\"z-index:0;\">\r\n                            <div class=\"form-check\">\r\n                                <input class=\"form-check-input\" type=\"radio\" name=\"offenseItem\" id=\"offenseItem1\">\r\n                                <label class=\"form-check-label\" for=\"offenseItem1\">\r\n                                    偏離主題\r\n                                </label>\r\n                            </div>\r\n                            <div class=\"form-check\">\r\n                                <input class=\"form-check-input\" type=\"radio\" name=\"offenseItem\" id=\"offenseItem2\">\r\n                                <label class=\"form-check-label\" for=\"offenseItem2\">\r\n                                    垃圾內容及廣告宣傳\r\n                                </label>\r\n                            </div>\r\n                            <div class=\"form-check\">\r\n                                <input class=\"form-check-input\" type=\"radio\" name=\"offenseItem\" id=\"offenseItem3\">\r\n                                <label class=\"form-check-label\" for=\"offenseItem3\">\r\n                                    騷擾內容及不雅用語\r\n                                </label>\r\n                            </div>\r\n                            <button class=\"btn btn-primary btn-sm text-white\" type=\"submit\">送出</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div><!--end card-->\r\n        </div>`;\r\n\r\n        commentNum +=1;\r\n\r\n    })\r\n\r\n    if(commentList!==null){\r\n         commentList.innerHTML = commentStr;\r\n    }\r\n    if(commentStr==\"\"){\r\n        commentSort.setAttribute(\"class\",\"d-none\");\r\n        commentList.innerHTML = `<div class=\"text-center\">目前尚無評論，歡迎您留言分享寶貴的經驗唷!</div>`;\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n/******************相關資源***********************/\r\n\r\nconst relatedResource = document.querySelector('.relatedResource');\r\nconst relatedTitle = document.querySelector('h3.relatedTitle');\r\n\r\n\r\nfunction renderRelatedResource(){\r\n    let relatedStr=\"\";\r\n    let renderNum = 1;\r\n\r\n    let commentScoreNum = getAverageScore();\r\n    let resultScore = commentScoreNum[0];\r\n    let commentNum = commentScoreNum[1];\r\n    let starStr = combineCommentStar(resultScore);\r\n    \r\n    if(resourcesData!==undefined){\r\n        resourcesData.forEach(resItem=>{\r\n        // let resultScore = getAverageScore();\r\n        // let newResultScoreOjb = combineCommentStar(resultScore);\r\n\r\n        if(resourceContent.length!==0){\r\n            //console.log(resourceContent);\r\n            if(resItem.topics === resourceContent[0].topics \r\n                && resItem.id !== resourceContent[0].id){\r\n                renderNum +=1;   \r\n                if(renderNum <=5 ){\r\n                    if(resultScore[resItem.id]==undefined||starStr[resItem.id]==undefined || commentNum[resItem.id] == undefined){\r\n                        relatedStr+=`\r\n                        <div class=\"my-4\">\r\n                        <h4 class=\"fs-7\"><a href=\"./resource.html?id=${resItem.id}\" target=\"_blank\"> ${resItem.title}</a></h4>\r\n                            <div class=\"d-flex flex-wrap justify-content-start align-items-center\">\r\n                                <span class=\"fs-8 text-gray me-lg-2\">尚無評價</span>                           \r\n                            </div>\r\n                        </div>\r\n                        `;\r\n                    }else{\r\n                        relatedStr+=`\r\n                        <div class=\"my-4\">\r\n                        <h4 class=\"fs-7\"><a href=\"./resource.html?id=${resItem.id}\" target=\"_blank\"> ${resItem.title}</a></h4>\r\n                        <div class=\"d-flex flex-wrap justify-content-start align-items-center text-secondary\">\r\n                            <span class=\"fs-7 fw-bold me-lg-2\">${resultScore[resItem.id]}</span>\r\n                            <ul class=\"d-flex align-items-center lh-1 me-lg-2 \">\r\n                            ${starStr[resItem.id]}\r\n                            </ul>   \r\n                            <span class=\"fs-8\">(${commentNum[resItem.id]})</span>                             \r\n                        </div>\r\n                        </div>\r\n                        `;\r\n                    }\r\n                \r\n                    \r\n                } \r\n            }\r\n        }\r\n        \r\n        \r\n        })\r\n    }\r\n    \r\n\r\n    if(relatedResource!==null){\r\n        relatedResource.innerHTML = relatedStr;\r\n    }\r\n    if(relatedTitle!==null){\r\n        if(relatedStr==\"\"){\r\n            relatedTitle.setAttribute(\"class\",\"d-none\");\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/******************立即評論***********************/\r\n\r\nconst btnComment = document.querySelector('.btnComment');\r\nconst commentContent = document.querySelector('.commentContent');\r\nconst userInfo = document.querySelector('h3.userInfo');\r\nconst btnCommentSubmit = document.querySelector('.btnCommentSubmit');\r\n\r\nconst commentStar = document.querySelectorAll('.commentStar > li > a >span');\r\nconst commentTextarea = document.querySelector('#commentTextarea');\r\n\r\n\r\n//取得該用戶資料\r\nlet localStorageUserId = localStorage.getItem(\"userId\");  \r\nlet localStorageToken = localStorage.getItem(\"accessToken\");\r\n\r\nlet userData=[];\r\nfunction getUserData(){\r\n    \r\n    axios.get(`${url}/users?id=${localStorageUserId}`)\r\n    .then(res=>{\r\n        userData = res.data;\r\n        console.log(userData);\r\n        renderBtnCommentContent();\r\n  \r\n    }).catch(error=>{\r\n      console.log(error);\r\n    })\r\n\r\n}\r\n\r\n//渲染按鈕 //更新 collapseComment id\r\nfunction renderBtnCommentContent(){\r\n    //console.log(localStorageUserId,localStorageToken);\r\n\r\n    btnComment.setAttribute(\"href\",`#collapseComment${resId}`);\r\n    btnComment.setAttribute(\"aria-controls\",`collapseComment${resId}`);\r\n    commentContent.setAttribute(\"id\",`collapseComment${resId}`);\r\n\r\n    // console.log(\"resId\");\r\n    // console.log(resId);\r\n\r\n    //如果有登入\r\n    let userInfoStr=\"\";\r\n    if(localStorageUserId !==\"\" && localStorageUserId !== null){\r\n        let prefix = (userData[0].firstName)[0].toUpperCase();\r\n        \r\n        userInfoStr=`\r\n        <span class=\"userImg d-inline-block bg-primary px-2 py-2 rounded-circle fw-bold fs-7 lh-1 text-white text-center\">${prefix}</span>\r\n        <p class=\"mb-0 mx-2 text-start\">\r\n            ${userData[0].firstName} ${userData[0].lastName}<br/>\r\n            <span class=\"fs-9 text-gray\">${userData[0].title}</span>\r\n\r\n        </p>`;\r\n        \r\n        userInfo.innerHTML = userInfoStr;\r\n\r\n    }else{\r\n         btnComment.setAttribute(\"href\",``);\r\n         commentContent.setAttribute(\"class\",\"d-none\");\r\n         btnComment.addEventListener(\"click\",e=>{\r\n            alert(\"請先登入\");\r\n            location.href=\"./login.html\"\r\n        })\r\n    }\r\n}\r\n\r\nlet thisTime = ((Date.now())/1000).toFixed(0);\r\n// console.log(\"thisTime\");\r\n// console.log(thisTime);\r\n\r\nlet starNum = 0;\r\n\r\n//checked 星星\r\n// console.log(commentStar);\r\n\r\n\r\ncommentStar.forEach((starItem,index)=>{\r\n    starItem.addEventListener(\"click\",e=>{\r\n        \r\n        for(let i=0 ; i<= commentStar.length-1 ; i++){\r\n            commentStar[i].textContent = \"star_outline\"\r\n            starNum =0;\r\n        }\r\n\r\n        for(let i=0 ; i<= index ; i++){\r\n            commentStar[i].textContent = \"star\";\r\n            starNum +=1;\r\n        }\r\n        //console.log(starNum);\r\n        console.log(starNum);\r\n        \r\n        //return starNum;\r\n        //console.log(starNum);\r\n    })\r\n   // submitComment();\r\n    \r\n})\r\n\r\n\r\n//檢查留言字數\r\nif(commentTextarea!==null){\r\n    commentTextarea.addEventListener(\"change\",e=>{\r\n        if( commentTextarea.value.length < 20){\r\n            document.querySelector('.commentTextarea').textContent =\"字數須超過20字\"\r\n            return;\r\n        }else{\r\n            document.querySelector('.commentTextarea').textContent =\"\";\r\n        }\r\n    \r\n    })\r\n}\r\n\r\n\r\n//送出評論\r\n// function submitComment(){\r\n    if(btnCommentSubmit!=null){\r\n    btnCommentSubmit.addEventListener(\"click\",e=>{\r\n        axios.post(`${url}/600/comments/`,{\r\n            \"resourceId\": resId,\r\n            \"userId\": localStorageUserId,\r\n            \"commentTime\": thisTime,\r\n            \"score\": starNum,\r\n            \"content\": commentTextarea.value,\r\n            \"likeNum\": 0,\r\n            \"dislikeNum\": 0\r\n        },headers).then(res=>{\r\n            location.reload();\r\n            //console.log(res.data)\r\n        }).catch(err=>{\r\n            console.log(err.response);\r\n        })\r\n    \r\n    })\r\n}\r\n// }\r\n","\n\n//1. 頁面初始化\nfunction initResourceList(){\n  getResourcesForResources();\n  getCommentData();\n  //changeResourceAverageScore();\n}\ninitResourceList();\n\n\n/*****************top ***************/\n\nconst bannerBlockTitle = document.querySelector('.bannerBlock > h2');\n\nif(resTopic!==undefined && bannerBlockTitle!==null){\n  bannerBlockTitle.textContent = resTopic;\n\n}\n\n/*****************入門推薦 ***************/\n\nconst foundation1Basic = document.querySelector('#foundation1Basic > div.row');\nconst foundation2Free = document.querySelector('#foundation2Free > div.row');\nconst foundation3CN = document.querySelector('#foundation3CN > div.row');\n\nlet resourcesData = [];\nlet commentsData = [];\nlet thisTopicData = [];\n\n//2. 取得資料\nfunction getResourcesForResources(){\n  axios.get(`${url}/resources`)\n  .then(res=>{\n    resourcesData = res.data.filter(item=>{\n      return item.topics == resTopic;\n    })\n    renderFoundationRecommond();\n    renderFilterResultList();\n\n  }).catch(error=>{\n    console.log(error);\n  })\n}\n\nfunction getCommentData(){\n  axios.get(`${url}/comments`)\n  .then(res=>{\n    commentsData = res.data; \n  }).catch(error=>{\n    console.log(error);\n  })\n}\n\n\n//3. 渲染入門推薦資料\nfunction renderFoundationRecommond(){\n\n  let commentScoreNum = getAverageScore();\n  let resultScore = commentScoreNum[0];\n  let commentNum = commentScoreNum[1];\n  let starStr = combineCommentStar(resultScore); //newResultScore\n\n  let itemNum1 = 0;\n  let itemNum2 = 0;\n  let itemNum3 = 0;\n  let renderMaxNum = 5;\n  //組各tab render HTML\n  let basicStr =\"\";\n  let freeStr=\"\";\n  let cnStr=\"\";\n\n  resourcesData.forEach( (item,index)=>{\n    \n   \n      if(item.level === \"初階\"){\n        if(itemNum1 <renderMaxNum){\n           basicStr += combineResouorceItem(item,resultScore,starStr,commentNum);\n           itemNum1+=1;\n        }\n         \n      }\n      \n      if(item.price === \"免費\"){\n        if(itemNum2 <renderMaxNum){\n          freeStr += combineResouorceItem(item,resultScore,starStr,commentNum); \n          itemNum2+=1;\n        }\n         \n      }\n      \n      item.lang.forEach(langItem=>{\n        if(langItem === \"繁體中文\"){\n          if(itemNum3 <renderMaxNum){\n            cnStr += combineResouorceItem(item,resultScore,starStr,commentNum);\n            itemNum3+=1;\n          }\n          \n        }\n      })\n    \n  })\n\n  if(foundation1Basic!==null){\n    document.title = resTopic;\n    foundation1Basic.innerHTML = basicStr;\n  }\n  \n  if(foundation2Free!==null){\n    document.title = resTopic;\n    foundation2Free.innerHTML = freeStr;\n  }\n  \n  if(foundation3CN!==null){\n    document.title = resTopic;\n    foundation3CN.innerHTML = cnStr;\n  }\n}\n\n\nfunction getAverageScore(){\n\nlet scoreTotal = {};  //每筆資源評價 總分\nlet resourceIdObj = {}; //每筆資源評價 筆數\nlet resultScore = {};  //每筆資源 平均分數(星星數)\n\n  commentsData.forEach(item=>{\n      if(resourceIdObj[item.resourceId] === undefined){\n          resourceIdObj[item.resourceId] = 1;\n          scoreTotal[item.resourceId] = item.score;\n         \n      }else{\n          resourceIdObj[item.resourceId] +=1;\n          scoreTotal[item.resourceId] += item.score;\n          \n      }\n      resultScore[item.resourceId] = (scoreTotal[item.resourceId] /  resourceIdObj[item.resourceId]).toFixed(1);\n\n  })\n  // console.log(\"resourceIdObj\",resourceIdObj);\n  // console.log(\"scoreTotal\",scoreTotal);\n  // console.log(\"resultScore\",resultScore);\n  return [resultScore,resourceIdObj];\n}\n\n//4. 組星星字串\nfunction combineCommentStar(resultScore){\n  //評論分數+星星+筆數 HTML\n  let newResultScore = {...resultScore};\n  let resourceIdArr = Object.keys(newResultScore);  //['1, '2, '3'] \n  let scoreArr = Object.values(newResultScore); //['4.0', '3.3', '4.5' ,'2.8'] \n\n  scoreArr.forEach((item,index)=>{\n    let starStr=\"\"; //星星HTML String\n    //星星數\n    for(let i=1; i<=item[0] ;i++){\n      starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star</span></li>`;\n      newResultScore[`${resourceIdArr[`${index}`]}`] = starStr;\n    }\n    \n    //半顆星星+空星星  \n      if(item[2]<=2){\n        for(let i=1; i<=(5-item[0]) ;i++){\n          starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star_outline</span></li> `;\n          newResultScore[`${resourceIdArr[`${index}`]}`] = starStr;\n        }\n        \n      }else if(item[2] >=3 && item[2] <=7){\n          starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star_half</span></li>`;\n          for(let i=1; i<=(5-item[0]-1) ;i++){\n            starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star_outline</span></li>`;\n          }\n          newResultScore[`${resourceIdArr[`${index}`]}`] = starStr;\n       \n      }else if(item[2]>=8){\n          starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star</span></li`;\n        for(let i=1; i<=(5-item[0]-1) ;i++){\n          starStr+=`<li><span class=\"material-icons material-icons-sharp fs-8\">star_outline</span></li>`;\n          newResultScore[`${resourceIdArr[`${index}`]}`] = starStr;\n        }\n      }\n\n  })\n  return newResultScore;\n}\n\n//5. 入門推薦組單一資源項目html\nfunction combineResouorceItem(item,resultScore,starStr,commentNum){\n\n  if( item.imgUrl ===\"\"){\n    item.imgUrl = \"./assets/images/resources_cover/noimgCover.jpg\";\n  }\n\n  if(resultScore[item.id]===undefined || starStr[item.id]=== undefined || commentNum[item.id]=== undefined ){\n\n    return  `\n    <div class=\"col-lg-2 col-md-4 col-6\">\n    <div>\n        <p class=\"text-center\">\n            <a href=\"./resource.html?id=${item.id}\" target=\"_blank\">\n            <img src=\"${item.imgUrl}\" alt=\"${item.title}\" onerror=\"this.src=./assets/images/resources_cover/noimgCover.jpg\"></a></p>\n        <div class=\"p-2\">\n            <h4 class=\"fs-7 ellipsis\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"> ${item.title}</a></h4>\n            <div class=\"d-flex flex-wrap justify-content-between align-items-center\">                             \n                <span class=\"fs-8 text-gray\"> 尚無評價 </span>\n            </div>\n  \n        </div>\n    </div>\n    </div>\n    `;\n  }else{\n    return  `\n      <div class=\"col-lg-2 col-md-4 col-6\">\n      <div>\n          <p class=\"text-center\">\n              <a href=\"./resource.html?id=${item.id}\" target=\"_blank\">\n              <img src=\"${item.imgUrl}\" alt=\"${item.title}\" onerror=\"this.src=./assets/images/resources_cover/noimgCover.jpg\"></a></p>\n          <div class=\"p-2\">\n              <h4 class=\"fs-7 ellipsis\"><a href=\"./resource.html?id=${item.id}\" target=\"_blank\"> ${item.title}</a></h4>\n\n              <div class=\"d-flex flex-wrap justify-content-between align-items-center text-secondary\">\n                  <span class=\"fs-7 fw-bold me-lg-2\"> ${resultScore[item.id]}</span>\n                  <ul class=\"d-flex align-items-center lh-1 me-lg-2\">\n                  ${starStr[item.id]}\n                  </ul>                                \n                  <span class=\"fs-8\">(${commentNum[item.id]})</span>\n              </div>\n\n          </div>\n      </div>\n      </div>\n      `;\n  }\n      \n}\n\n/***************** 相關主題 ***************/\n\n\n\n/***************** 資源篩選 ***************/\n\nconst resourceItem = document.querySelector('.resourceItem');\nconst filterItemInput = document.querySelectorAll('.filterItem > input');  \n\nlet checkObj={};\nlet renderList=[];\n\n// checked 監聽 : 取得 checked 清單的關鍵字 + render\nfilterItemInput.forEach((item,index)=>{\n\n  item.addEventListener(\"change\",e=>{\n    let filterKeyword = item.getAttribute(\"name\");\n    let groupName = item.getAttribute(\"data-group\");\n    console.log(filterKeyword,groupName);\n\n    if (e.target.checked) {\n      if(checkObj[groupName]===undefined){\n        checkObj[groupName]=[];\n        checkObj[groupName].push(filterKeyword);\n      }else{\n        checkObj[groupName].push(filterKeyword);\n      }\n    }else {\n        checkObj[groupName] = checkObj[groupName].filter(item=>{\n          return filterKeyword !=item;\n        })  \n        if(checkObj[groupName].length===0){\n          delete checkObj[groupName];\n        }\n    }\n\n    //  console.log(\"checkObj\");\n    //  console.log(checkObj);\n\n    renderList = resourcesData.filter(resItem=>{\n      \n      let hasType = true ;  \n      let hasLevel =true;\n      let hasPrice =true;\n      let checkLang = true;\n  \n      if(checkObj.type){\n        hasType = checkObj.type.includes(resItem.type);\n      }\n      if(checkObj.level){\n        hasLevel = checkObj.level.includes(resItem.level);\n      }\n      if(checkObj.price){\n        hasPrice = checkObj.price.includes(resItem.price);\n      }\n  \n      checkLang = resItem.lang.some((str) => {\n        //console.log(str);\n        if (!checkObj.lang) {\n          return true;\n        }\n        return checkObj.lang.includes(str);\n      });\n  \n      return hasType && hasLevel && hasPrice && checkLang ;\n  \n    })\n    // console.log(renderList);\n    renderFilterResultList(); \n\n  })\n})\n\n\n\nfunction renderFilterResultList(){ \n\n  let commentScoreNum = getAverageScore();\n  let resultScore = commentScoreNum[0];\n  let commentNum = commentScoreNum[1];\n  let starStr = combineCommentStar(resultScore);\n\n    let renderfilterStr=\"\";\n    if(renderList.length===0){\n      resourcesData.forEach(renderItem=>{\n        renderfilterStr += combineResouorceItemType2(renderItem,resultScore,starStr,commentNum);\n      })\n\n      if(resultNumber!==undefined){\n        resultNumber.setAttribute(\"class\",\"d-none\");\n      }\n      if(clearBtnText!==undefined){\n        clearBtnText.setAttribute(\"class\",\"d-none\");\n      }\n      \n\n      if(checkObj.type !== undefined || checkObj.level !== undefined || checkObj.price !== undefined || checkObj.lang !== undefined ){\n        renderfilterStr = \"沒有符合條件的項目\";\n      }\n    }else{\n      if(resultNumber!==undefined){\n         resultNumber.setAttribute(\"class\",\"d-inline-block\");\n          resultNumber.textContent = `${renderList.length} 個篩選結果`;\n      }\n      if(clearBtnText!==undefined){\n        clearBtnText.setAttribute(\"class\",\"d-inline-block\");\n      }\n      \n    \n      if(checkObj.type==undefined && checkObj.level==undefined && checkObj.price==undefined && checkObj.lang==undefined ){\n        resultNumber.setAttribute(\"class\",\"d-none\");\n        clearBtnText.setAttribute(\"class\",\"d-none\");\n      }\n\n      clearFilter();\n      \n\n      renderList.forEach(renderItem=>{\n        renderfilterStr += combineResouorceItemType2(renderItem,resultScore,starStr,commentNum);\n      })\n    }\n\n    if(resourceItem!==null){\n      resourceItem.innerHTML = renderfilterStr;\n    }\n}\n\n\nfunction combineResouorceItemType2(renderItem,resultScore,starStr,commentNum){\n  if( renderItem.imgUrl ===\"\"){\n    renderItem.imgUrl = \"./assets/images/resources_cover/noimgCover.jpg\";\n  }\n\n  if(resultScore[renderItem.id]===undefined || starStr[renderItem.id]=== undefined || commentNum[renderItem.id]=== undefined ){\n    return `<div class=\"row my-3 \">\n    <div class=\"col-2 \">\n      <a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\"><img src=\"${renderItem.imgUrl}\" alt=\"${renderItem.title}\"></a>\n    </div>\n      <div class=\"col-6\">\n          <h4 class=\"fs-7\"><a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\">${renderItem.title}</a></h4>\n          <div class=\"d-flex flex-wrap align-items-center\">\n              <span class=\"fs-8 text-gray fw-bold me-lg-2\"> 尚無評價</span>\n              <p class=\"text-dark fs-8\" >test:${renderItem.type}, ${renderItem.level} , ${renderItem.price}, ${renderItem.lang} </p>\n          </div>\n      </div>\n      <div class=\"col-4\">\n          <div class=\"d-flex flex-column flex-lg-row  align-items-end\">\n              <a href=\"${renderItem.url}\" target=\"_blank\" role=\"button\" class=\"btn btn-tiffany my-2 w-75 mx-2\">前往資源</a>\n              <a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\" role=\"button\" class=\"btn btn-yellowBrown my-2 w-75 mx-2\">查看內容</a>\n          </div>\n      </div>\n    </div>`;\n  }else{\n    return `<div class=\"row my-3 \">\n  <div class=\"col-2 \">\n     <a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\"><img src=\"${renderItem.imgUrl}\" alt=\"${renderItem.title}\"></a>  \n  </div>\n    <div class=\"col-6\">\n     <h4 class=\"fs-7\"><a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\">${renderItem.title}</a></h4>\n        <div class=\"d-flex flex-wrap align-items-center text-secondary\">\n            <span class=\"fs-7 fw-bold me-lg-2\"> ${resultScore[renderItem.id]}</span>\n            <ul class=\"d-flex align-items-center lh-1 me-lg-2  \">\n            ${starStr[renderItem.id]}\n            </ul>                                \n            <span class=\"fs-8\">(${commentNum[renderItem.id]})</span>\n            <p class=\"text-dark fs-8\">test ${renderItem.type}, ${renderItem.level} , ${renderItem.price}, ${renderItem.lang} </p>\n        </div>\n    </div>\n    <div class=\"col-4\">\n        <div class=\"d-flex flex-column flex-lg-row  align-items-end\">\n          <a href=\"${renderItem.url}\" target=\"_blank\" role=\"button\" class=\"btn btn-tiffany my-2 w-75 mx-2\">前往資源</a>\n          <a href=\"./resource.html?id=${renderItem.id}\" target=\"_blank\" role=\"button\" class=\"btn btn-yellowBrown my-2 w-75 mx-2\">查看內容</a>\n        </div>  \n    </div>\n  </div>\n      `;\n  }\n  \n}\n\n\n\n/***************** n 筆結果 / 清除篩選 / 排序 ***************/\n\nconst resultNumber = document.querySelector('.resultNumber');\nconst clearBtnText = document.querySelector('.clearBtnText');\nconst clearFilterBtn = document.querySelector('#clearFilterBtn');\nconst resourceSort = document.querySelector('#resourceSort');\n\nfunction clearFilter(){\n  clearFilterBtn.addEventListener(\"click\",e=>{\n    if(checkObj.type){\n      delete checkObj.type;\n    }\n    if(checkObj.level){\n      delete checkObj.level;\n    }\n    if(checkObj.price){\n      delete checkObj.price;\n    }\n    if(checkObj.lang){\n      delete checkObj.lang;\n    }\n    filterItemInput.forEach(item=>{\n      item.checked = false;\n    })\n    renderFilterResultList();\n    console.log(\"click check\");\n    console.log(checkObj);\n  })\n  \n}\n\n\n\n\n","const signUpForm = document.querySelector('form.signUpForm');  //form\r\n\r\nconst signupLastName = document.querySelector('#signupLastName');\r\nconst signupfirstName = document.querySelector('#signupfirstName');\r\nconst signupMail = document.querySelector('#signupMail');\r\nconst signupPw = document.querySelector('#signupPw');\r\nconst signupPwConfirm = document.querySelector('#signupPwConfirm');\r\n\r\nconst signUpFormInputs = document.querySelectorAll('input.signupInput');  //input\r\nconst btnSignUp = document.querySelector('#btnSignUp');\r\n\r\n//console.log(signUpFormInputs);\r\n\r\n\r\nfunction initSignup(){\r\n    getUserList();\r\n}\r\ninitSignup();\r\n\r\n\r\n\r\n//驗證欄位內容\r\nconst constraints ={\r\n    lastname:{\r\n        presence: {message: \"必填欄位\"},\r\n    },\r\n    firstname:{\r\n        presence: {message: \"必填欄位\"},\r\n    },\r\n    email:{\r\n        presence: {message: \"必填欄位\"},\r\n        email:{\r\n            email:true,\r\n            message: \"請填寫正確的信箱格式\"\r\n        },\r\n       \r\n    },\r\n    password:{\r\n        presence: {message: \"必填欄位\"},\r\n        length: {\r\n            minimum: 5, \r\n            message: \"密碼長度請大於5\"\r\n        }\r\n    },\r\n    confirmpw:{\r\n        presence: {message: \"必填欄位\"},\r\n        equality:{\r\n            attribute:\"password\",\r\n            message: \"與前者輸入密碼不同\",\r\n            // comparator: function(v1, v2) {\r\n            //     return v1 === v2;\r\n            //   }\r\n        }\r\n    }\r\n}\r\n\r\n\r\nsignUpFormInputs.forEach(item=>{\r\n    item.addEventListener(\"change\",e=>{\r\n       \r\n        item.nextElementSibling.textContent = '';\r\n        let errors = validate(signUpForm, constraints);\r\n\r\n        let result = usersData.filter(userItem=>{\r\n            return userItem.email === signupMail.value;\r\n        })\r\n\r\n        if(result.length!==0){\r\n            document.querySelector('.email').textContent=\"此帳號已存在\";\r\n        }else{\r\n            document.querySelector('.email').textContent =\"\";\r\n        }\r\n\r\n    \r\n        //有錯就呈現在畫面上\r\n        if (errors) {\r\n          Object.keys(errors).forEach( keys=> {\r\n            //console.log(keys);\r\n            document.querySelector(`.${keys}`).textContent = errors[keys][0].split(\" \")[1];\r\n          });\r\n        }\r\n    })\r\n})\r\n\r\n\r\n\r\n//取得用戶清單\r\nlet usersData = [];\r\nfunction getUserList(){\r\n    axios.get(\"http://localhost:3000/users\").then(res=>{\r\n        usersData = res.data\r\n    }).catch(err=>{\r\n        console.log(err.response);\r\n    })\r\n}\r\n\r\n\r\n//註冊 post\r\nif(btnSignUp!==null){\r\n    btnSignUp.addEventListener(\"click\",e=>{\r\n    e.preventDefault();\r\n\r\n    if(signupLastName.value===\"\"||signupfirstName.value===\"\"||signupMail.value===\"\"||signupPw.value===\"\"||signupPwConfirm.value===\"\"){\r\n        // console.log(\"有空欄位\");\r\n        return;\r\n    }\r\n\r\n    signUpFormInputs.forEach(item=>{\r\n        if(item.nextElementSibling.textContent !== '' ){\r\n            console.log(\"有錯誤訊息\");\r\n            return;\r\n        }\r\n    })\r\n\r\n    if(signupPw.value!== signupPwConfirm.value){\r\n        return;\r\n    }\r\n\r\n    axios.post(\"http://localhost:3000/users\",{\r\n        \"lastName\": signupLastName.value,\r\n        \"firstName\": signupfirstName.value,\r\n        \"email\": signupMail.value,\r\n        \"password\": signupPw.value,\r\n        \"role\": \"user\",\r\n        \"title\":\"\",\r\n        \"experiences\":\"\",\r\n        \"links\":{\"websiteUrl\":\"\"}\r\n\r\n    }).then(res=>{\r\n        console.log(res.data);\r\n        alert('成功註冊')\r\n        location.href ='./login.html';\r\n\r\n    }).catch(err=>{\r\n        console.log(err.response);\r\n    })\r\n\r\n})\r\n}\r\n\r\n\r\n","\r\n\r\nfunction Ftime (timespan) {\r\n    var dateTime = new Date(timespan * 1000);\r\n    var year = dateTime.getFullYear();\r\n    var month = dateTime.getMonth() + 1;\r\n    var day = dateTime.getDate();\r\n    var hour = dateTime.getHours();\r\n    var minute = dateTime.getMinutes();\r\n   \r\n    var now = Date.parse(new Date());  //typescript轉換\r\n    var milliseconds = 0;\r\n    var timeSpanStr;\r\n    //時間差\r\n    milliseconds = (now / 1000) - timespan;\r\n\r\n    // < 1min\r\n    if (milliseconds <= 60) {\r\n        timeSpanStr = '剛剛';\r\n    }\r\n    // > 1min < 60min\r\n    else if (60 < milliseconds && milliseconds <= 60 * 60) {\r\n        timeSpanStr = Math.ceil((milliseconds / (60))) + '分鐘前';\r\n    }\r\n    // >1hr < 24hr \r\n    else if (60 * 60 < milliseconds && milliseconds <= 60 * 60 * 24) {\r\n        timeSpanStr = Math.ceil(milliseconds / (60 * 60)) + '小時前';\r\n    }\r\n    // >1day > 15day \r\n    else if (60 * 60 * 24 < milliseconds && milliseconds <= 60 * 60 * 24 * 30) {\r\n        timeSpanStr = Math.ceil(milliseconds / (60 * 60 * 24)) + '天前';\r\n    }\r\n    // > 1month < 12 month \r\n    else if (60 * 60 * 24 * 30 < milliseconds && milliseconds <= 60 * 60 * 24 * 30 * 12){\r\n        timeSpanStr = Math.ceil(milliseconds / (60 * 60 * 24 * 30)) + '個月前';\r\n    }\r\n    // > 1year\r\n    else {\r\n        timeSpanStr = year + '年' + month + '月' + day + '日 ' + hour + ':' + minute;   \r\n    }\r\n    return timeSpanStr;\r\n}\r\n\r\n\r\n//  https://beltxman.com/1576.html\r\n"]}